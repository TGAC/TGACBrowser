
/* jquery.cytoscapeweb.all.min.js */

/**
 * This file is part of Cytoscape Web 2.0-prerelease-snapshot-2012.05.14-12.35.01.
 * 
 * Cytoscape Web is free software: you can redistribute it and/or modify it
 * under the terms of the GNU Lesser General Public License as published by the Free
 * Software Foundation, either version 3 of the License, or (at your option) any
 * later version.
 * 
 * Cytoscape Web is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more
 * details.
 * 
 * You should have received a copy of the GNU Lesser General Public License along with
 * Cytoscape Web. If not, see <http://www.gnu.org/licenses/>.
 */
 
(function(a){a.cytoscapeweb=function(){return a.cytoscapeweb.init.apply(this,arguments)};a.cytoscapeweb.fn={}})(jQuery);(function(b,a){a.is={string:function(c){return c!=null&&typeof c==typeof""},fn:function(c){return c!=null&&typeof c==typeof function(){}},array:function(c){return c!=null&&c instanceof Array},plainObject:function(c){return c!=null&&typeof c==typeof{}&&!a.is.array(c)},number:function(c){return c!=null&&typeof c==typeof 1&&!isNaN(c)},color:function(c){return c!=null&&typeof c==typeof""&&b.Color(c).toString()!=""
},bool:function(c){return c!=null&&typeof c==typeof true},elementOrCollection:function(c){return a.is.element(c)||a.is.collection(c)},element:function(c){return c instanceof a.CyElement},collection:function(c){return c instanceof a.CyCollection},emptyString:function(c){if(c==null){return true}else{if(a.is.string(c)){return c.match(/^\s+$/)!=null}}return false},nonemptyString:function(c){return c!=null&&a.is.string(c)&&c.match(/^\s+$/)==null}}})(jQuery,jQuery.cytoscapeweb);(function(b,a){a.util={copy:function(c){if(c==null){return c
}if(a.is.array(c)){return b.extend(true,[],c)}else{if(a.is.plainObject(c)){return b.extend(true,{},c)}else{return c}}},mapEmpty:function(e){var d=true;if(e!=null){for(var c in e){d=false;break}}return d},setMap:function(c){var d=c.map;b.each(c.keys,function(f,e){if(f<c.keys.length-1){if(d[e]==null){d[e]={}}d=d[e]}else{d[e]=c.value}})},getMap:function(c){var f=c.map;for(var e=0;e<c.keys.length;e++){var d=c.keys[e];f=f[d];if(f==null){return f}}return f},capitalize:function(c){if(a.is.emptyString(c)){return c
}return c.charAt(0).toUpperCase()+c.substring(1)}}})(jQuery,jQuery.cytoscapeweb);(function(e,c){var d=false;var b=false;var a=c.console={option:function(f,g){if(f==d){return d=(g===undefined?d:g)}else{if(f==b){return b=(g===undefined?b:g)}}},debug:function(){if(d||!b||e.browser.msie){return}if(window.console!=null&&window.console.debug!=null){window.console.debug.apply(window.console,arguments)}else{if(window.console!=null&&window.console.log!=null){window.console.log.apply(window.console,arguments)
}}},log:function(){if(d||e.browser.msie){return}if(window.console!=null&&window.console.log!=null){window.console.log.apply(window.console,arguments)}},warn:function(){if(d||e.browser.msie){return}if(window.console!=null&&window.console.warn!=null){window.console.warn.apply(window.console,arguments)}else{a.log.apply(window.console,arguments)}},error:function(){if(d||e.browser.msie){return}if(window.console!=null&&window.console.error!=null){window.console.error.apply(window.console,arguments);if(window.console.trace!=null){window.console.trace()
}}else{a.log.apply(window.console,arguments);throw"Cytoscape Web encountered the previously logged error";if(window.console.trace!=null){window.console.trace()}}}}})(jQuery,jQuery.cytoscapeweb);(function(h,c){var f={};c.extensions=f;var d={};c.modules=d;function b(l,k,m){var j={};j[k]=m;switch(l){case"core":case"collection":c.fn[l](j)}return c.util.setMap({map:f,keys:[l,k],value:m})}function g(k,j){return c.util.getMap({map:f,keys:[k,j]})}function e(m,k,l,j,n){return c.util.setMap({map:d,keys:[m,k,l,j],value:n})
}function a(m,k,l,j){return c.util.getMap({map:d,keys:[m,k,l,j]})}c.extension=function(){if(arguments.length==2){return g.apply(this,arguments)}else{if(arguments.length==3){return b.apply(this,arguments)}else{if(arguments.length==4){return a.apply(this,arguments)}else{if(arguments.length==5){return e.apply(this,arguments)}else{c.console.error("Invalid extension access syntax")}}}}}})(jQuery,jQuery.cytoscapeweb);(function(b,a){b.fn.cytoscapeweb=function(f){if(f=="get"){var g=b(this).data("cytoscapeweb");
return g.cy}else{if(a.is.fn(f)){var e=f;var g=b(this).data("cytoscapeweb");if(g!=null&&g.cy!=null&&g.ready){e.apply(g.cy,[])}else{if(g==null){g={}}if(g.readies==null){g.readies=[]}g.readies.push(e);b(this).data("cytoscapeweb",g)}}else{if(a.is.plainObject(f)){return b(this).each(function(){var j=b.extend({},f,{container:b(this)});b.cytoscapeweb(j)})}else{var h=[];var c=[];for(var d=1;d<arguments.length;d++){c[d-1]=arguments[d]}b(this).each(function(){var k=b(this).data("cytoscapeweb");var m=k.cy;var l=f;
if(m!=null&&a.is.fn(m[l])){var j=m[l].apply(m,c);h.push(j)}});if(h.length==1){h=h[0]}else{if(h.length==0){h=b(this)}}return h}}}};a.init=function(c){if(a.is.plainObject(c)){return new a.CyCore(c)}else{if(a.is.string(c)){return a.extension.apply(a.extension,arguments)}}};if(b.fn.cy==null&&b.cy==null){b.fn.cy=b.fn.cytoscapeweb;b.cy=b.cytoscapeweb}})(jQuery,jQuery.cytoscapeweb);(function(b,a){a.fn.core=function(d,e){b.each(d,function(f,g){c.prototype[f]=g})};function c(e){var g=this;var f={layout:{name:"grid"},renderer:{name:"svg"},style:{}};
var d=b.extend(true,{},f,e);if(d.container==null){a.console.error("Cytoscape Web must be called on an element; specify `container` in options or call on selector directly with jQuery, e.g. $('#foo').cy({...});");return}else{if(b(d.container).size()>1){a.console.error("Cytoscape Web can not be called on multiple elements in the functional call style; use the jQuery selector style instead, e.g. $('.foo').cy({...});");return}}this._private={options:d,style:d.style,nodes:{},edges:{},continuousMapperBounds:{nodes:{},edges:{}},continuousMapperUpdates:[],live:{},selectors:{},listeners:{},animation:{elements:null},scratch:{},layout:null,renderer:null,notificationsEnabled:true,zoomEnabled:true,panEnabled:true};
g.initRenderer(d.renderer);g.load(d.elements,function(){var h=g.container().data("cytoscapeweb");if(h==null){h={}}h.cy=g;h.ready=true;if(h.readies!=null){b.each(h.readies,function(j,k){g.bind("ready",k)});h.readies=[]}b(d.container).data("cytoscapeweb",h);g.startAnimationLoop();if(a.is.fn(d.ready)){d.ready.apply(g,[g])}g.trigger("ready")},d.done)}a.CyCore=c;a.fn.core({container:function(){return b(this._private.options.container)}});a.fn.core({options:function(){return a.util.copy(this._private.options)
}});a.fn.core({json:function(e){var d={};var f=this;d.elements={};f.elements().each(function(g,h){var j=h.group();if(d.elements[j]==null){d.elements[j]=[]}d.elements[j].push(h.json())});d.style=f.style();d.scratch=a.util.copy(f.scratch());d.zoomEnabled=f._private.zoomEnabled;d.panEnabled=f._private.panEnabled;d.layout=a.util.copy(f._private.options.layout);d.renderer=a.util.copy(f._private.options.renderer);return d}})})(jQuery,jQuery.cytoscapeweb);(function(b,a){a.fn.core({add:function(g){var h;
var k=this;if(a.is.element(g)){var e=g;h=e.collection().restore()}else{if(a.is.collection(g)){var j=g;h=j.restore()}else{if(a.is.array(g)){var f=g;h=new a.CyCollection(k,f)}else{if(a.is.plainObject(g)&&(a.is.array(g.nodes)||a.is.array(g.edges))){var c=g;var f=[];b.each(["nodes","edges"],function(l,m){if(a.is.array(c[m])){b.each(c[m],function(n,o){var p=b.extend({},o,{group:m});f.push(p)})}});h=new a.CyCollection(k,f)}else{var d=g;h=(new a.CyElement(k,d)).collection()}}}}return h.filter(function(){return !this.removed()
})},remove:function(d){if(!a.is.elementOrCollection(d)){d=d}else{if(a.is.string(d)){var c=d;d=this.$(c)}}return d.remove()},load:function(e,f,d){var h=this;h.elements().remove();h.notifications(false);var c=[];if(e!=null){if(a.is.plainObject(e)||a.is.array(e)){h.add(e)}}function g(){h.one("layoutready",function(j){h.notifications(true);h.trigger(j);h.notify({type:"load",collection:h.elements(),style:h._private.style});h.one("load",f);h.trigger("load")}).one("layoutstop",function(){h.one("done",d);
h.trigger("done")});h.layout(h._private.options.layout)}if(window.chrome){setTimeout(function(){g()},30)}else{g()}return this}})})(jQuery,jQuery.cytoscapeweb);(function(b,a){a.fn.core({startAnimationLoop:function(){var h=this;var n=this._private;var g=10;var o=false;var k=true;n.animation.elements=new a.CyCollection(h);var l=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;if(l==null||!k){l=function(p){window.setTimeout(function(){p(+new Date)
},g)}}var d=h.container()[0];function m(){function p(){l(function(q){e(q);m()},d)}if(o){setTimeout(function(){p()},g)}else{p()}}m();function e(p){n.animation.elements.each(function(t,z){try{z=z.element();var x=z._private.animation.current;var v=z._private.animation.queue;if(x.length==0){var r=v;var u=r.length>0?r.shift():null;if(u!=null){u.callTime=+new Date;x.push(u)}}var y=[];for(var t=0;t<x.length;t++){var s=x[t];f(z,s,p);if(x[t].done){y.push(s);x.splice(t,1);t--}}b.each(y,function(B,A){var q=A.params.complete;
if(a.is.fn(q)){q.apply(z,[p])}})}catch(w){}});if(n.animation.elements.size()>0){h.notify({type:"draw",collection:n.animation.elements})}n.animation.elements=n.animation.elements.filter(function(){var r=this;var q=r._private.animation.queue;var s=r._private.animation.current;return s.length>0||q.length>0})}function f(p,u,q){var r=u.properties;var v=u.params;var s=u.callTime;var t;if(v.duration==0){t=1}else{t=Math.min(1,(q-s)/v.duration)}function w(y){if(y.end!=null){var z=y.start;var x=y.end;b.each(x,function(A,B){if(c(z[A],x[A])){p._private[y.field][A]=j(z[A],x[A],t)
}})}}if(r.delay==null){w({end:r.position,start:u.startPosition,field:"position"});w({end:r.bypass,start:u.startStyle,field:"bypass"})}if(a.is.fn(v.step)){v.step.apply(p,[q])}if(t>=1){u.done=true}return t}function c(q,p){if(q==null||p==null){return false}if(a.is.number(q)&&a.is.number(p)){return true}else{if((q)&&(p)){return true}}return false}function j(s,t,x){if(a.is.number(s)&&a.is.number(t)){return s+(t-s)*x}else{if((s)&&(t)){var v=b.Color(s).fix().toRGB();var u=b.Color(t).fix().toRGB();function q(A,r){var B=r-A;
var z=A;return Math.round(x*B+z)}var p=q(v.red(),u.red());var w=q(v.green(),u.green());var y=q(v.blue(),u.blue());return b.Color([p,w,y],"RGB").toHEX().toString()}}return undefined}}})})(jQuery,jQuery.cytoscapeweb);(function(e,a){a.fn.core({one:d({target:"cy",one:true}),bind:d({target:"cy"}),unbind:c({target:"cy"}),trigger:b({target:"cy"}),delegate:function(f,g,j,h){this.$(f).live(g,j,h);return this},undelegate:function(f,g,h){this.$(f).die(g,h);return this},on:function(g,f,j,h){if(a.is.string(f)){this.$(f).live(g,j,h)
}else{f=undefined;j=f;h=j;this.bind(g,j,h)}return this},off:function(h,f,g){if(a.is.string(f)){this.$(f).live(events,g)}else{g=f;f=undefined;this.unbind(events,g)}return this},background:function(){var g=this;if(g._private.background==null){var f=["on","off","bind","unbind","one","trigger"];g._private.background={};e.each(f,function(h,j){g._private.background[j]=function(){return g["bg"+a.util.capitalize(j)].apply(g,arguments)}})}return g._private.background},bgOne:d({target:"bg",one:true}),bgOn:d({target:"bg"}),bgOff:c({target:"bg"}),bgBind:d({target:"bg"}),bgUnbind:c({target:"bg"}),bgTrigger:b({target:"bg"})});
function d(g){var f={target:"cy",one:false};g=e.extend({},f,g);return function(h,l,k){var m=this;var j=m._private.listeners;if(k===undefined){k=l;l=undefined}if(k==null){return m}h=h.split(/\s+/);e.each(h,function(n,o){if(a.is.emptyString(o)){return}if(j[g.target]==null){j[g.target]={}}if(j[g.target][o]==null){j[g.target][o]=[]}j[g.target][o].push({callback:k,data:l,one:g.one})});return m}}function c(g){var f={target:"cy"};g=e.extend({},f,g);return function(h,k){var l=this;var j=l._private.listeners;
if(j[g.target]==null){return l}h=h.split(/\s+/);e.each(h,function(m,n){if(a.is.emptyString(n)){return}if(k===undefined){delete j[g.target][n];return l}else{for(var m=0;m<j[g.target][n].length;m++){var o=j[g.target][n][m];if(o.callback==k){j[g.target][n].splice(m,1);m--}}}});return l}}function b(g){var f={target:"cy"};g=e.extend({},f,g);return function(h,l){var k=this;var q=k._private.listeners;var o=g.target;var r;if(a.is.plainObject(h)){r=h.type}else{r=h}if(q[o]==null||q[o][r]==null){return}for(var m=0;
m<q[o][r].length;m++){var j=q[o][r][m];var n;if(a.is.plainObject(h)){n=h}else{n=e.Event(h)}n.data=j.data;n.cy=n.cytoscapeweb=k;var p=[n];if(l!=null){if(!a.is.array(l)){l=[l]}e.each(l,function(t,s){p.push(s)})}if(j.one){q[o][r].splice(m,1);m--}j.callback.apply(k,p)}}}})(jQuery,jQuery.cytoscapeweb);(function(b,a){a.fn.core({layout:function(c){var d=this;if(c==null){c=this._private.options.layout}this.initLayout(c);d.trigger("layoutstart");this._private.layout.run();return this},initLayout:function(e){if(e==null){a.console.error("Layout options must be specified to run a layout");
return}if(e.name==null){a.console.error("A `name` must be specified to run a layout");return}var d=e.name;var c=a.extension("layout",d);if(c==null){a.console.error("Can not apply layout: No such layout `%s` found; did you include its JS file?",d);return}this._private.layout=new c(b.extend({},e,{renderer:this._private.renderer,cy:this}));this._private.options.layout=e}})})(jQuery,jQuery.cytoscapeweb);(function(b,a){a.fn.core({notify:function(f){if(!this._private.notificationsEnabled){return}var e=this.renderer();
if(a.is.element(f.collection)){var c=f.collection;f.collection=new a.CyCollection(cy,[c])}else{if(a.is.array(f.collection)){var d=f.collection;f.collection=new a.CyCollection(cy,d)}}if(this.getContinuousMapperUpdates().length!=0){f.updateMappers=true;this.clearContinuousMapperUpdates()}e.notify(f)},notifications:function(c){var d=this._private;if(c===undefined){return d.notificationsEnabled}else{d.notificationsEnabled=c?true:false}},noNotifications:function(c){this.notifications(false);c();this.notifications(true)
}})})(jQuery,jQuery.cytoscapeweb);(function(b,a){a.fn.core({renderer:function(){return this._private.renderer},initRenderer:function(d){var e=this;var c=a.extension("renderer",d.name);if(c==null){a.console.error("Can not initialise: No such renderer `$s` found; did you include its JS file?",d.name);return}this._private.renderer=new c(b.extend({},d,{cy:e,style:e._private.style,styleCalculator:{calculate:function(l,u){if(a.is.plainObject(u)){var p;if(u.customMapper!=null){p=u.customMapper.apply(l,[l.data()])
}else{if(u.passthroughMapper!=null){var r=u.passthroughMapper;p=l._private.data[r]}else{if(u.discreteMapper!=null){var r=u.discreteMapper.attr;var m=u.discreteMapper.mapped;var s=l.data(r);b.each(m,function(w,x){if(w==s){p=x}})}else{if(u.continuousMapper!=null){var f=u.continuousMapper;if(f.attr.name==null||typeof f.attr.name!=typeof""){a.console.error("For style.%s.%s, `attr.name` must be defined as a string since it's a continuous mapper",l.group(),styleName);return}var g=e._private.continuousMapperBounds[l._private.group][f.attr.name];
g={min:g==null?0:g.min,max:g==null?0:g.max};if(f.attr.min!=null){g.min=f.attr.min}if(f.attr.max!=null){g.max=f.attr.max}if(g!=null){var k=l.data(f.attr.name);var o=(k-g.min)/(g.max-g.min);if(g.max==g.min){o=1}if(o>1){o=1}else{if(o<0||k==null||isNaN(o)){o=0}}if(k==null&&u.defaultValue!=null){p=u.defaultValue}else{if(a.is.number(f.mapped.min)&&a.is.number(f.mapped.max)){p=o*(f.mapped.max-f.mapped.min)+f.mapped.min}else{if((f.mapped.min)&&(f.mapped.max)){var n=b.Color(f.mapped.min).fix().toRGB();var v=b.Color(f.mapped.max).fix().toRGB();
var h=Math.round(n.red()*(1-o)+v.red()*o);var j=Math.round(n.green()*(1-o)+v.green()*o);var t=Math.round(n.blue()*(1-o)+v.blue()*o);p=b.Color([h,j,t],"RGB").toHEX().toString()}else{a.console.error("Unsupported value used in mapper for `style.%s.%s` with min mapped value `%o` and max `%o` (neither number nor colour)",l.group(),f.styleName,f.mapped.min,f.mapped.max);return}}}}else{a.console.error("Attribute values for `%s.%s` must be numeric for continuous mapper `style.%s.%s` (offending %s: `%s`)",l.group(),f.attr.name,l.group(),styleName,l.group(),l.data("id"));
return}}}}}var q=u.defaultValue;if(p==null){p=q}}else{p=u}return p}}}))}})})(jQuery,jQuery.cytoscapeweb);(function($,$$){$$.fn.core({scratch:function(name,value){if(value===undefined){return eval("this._private.scratch."+name)}else{eval("this._private.scratch."+name+" = "+value+";");return this}},removeScratch:function(name){if(name===undefined){structs.scratch={}}else{eval("delete this._private.scratch."+name+";")}return this}})})(jQuery,jQuery.cytoscapeweb);(function(c,a){a.fn.core({collection:function(d){if(a.is.string(d)){return this.$(d)
}else{if(a.is.elementOrCollection(d)){return d.collection()}}return new a.CyCollection(this)},getElementById:function(d){return this._private.nodes[d]||this._private.edges[d]||new a.CyCollection(this)},nodes:b({addLiveFunction:true,group:"nodes"}),edges:b({addLiveFunction:true,group:"edges"}),elements:function(){return this.$.apply(this,arguments)},$:b({addLiveFunction:true}),filter:function(d){if(a.is.string(d)){return this.$(d)}else{if(a.is.fn(d)){return this.$(d).filter(d)}}}});function b(f){var e={group:undefined,addLiveFunction:false};
f=c.extend({},e,f);var d=[];if(f.group==null){d=["nodes","edges"]}else{d=[f.group]}return function(g){var k=this;var h=[];if(g==null){g=""}c.each(d,function(l,m){c.each(k._private[m],function(o,n){h.push(n)})});var j=new a.CyCollection(k,h);var g;if(f.group!=null){g=new a.CySelector(k,f.group,g)}else{g=new a.CySelector(k,g)}return g.filter(j,f.addLiveFunction)}}})(jQuery,jQuery.cytoscapeweb);(function(b,a){a.fn.core({style:function(d){var c;if(d===undefined){c=a.util.copy(this._private.style)}else{this._private.style=a.util.copy(d);
c=this;this.notify({type:"style",style:this._private.style})}return c},getContinuousMapperUpdates:function(){var d=this;var c=d._private;return c.continuousMapperUpdates},clearContinuousMapperUpdates:function(){var d=this;var c=d._private;c.continuousMapperUpdates=[]},addContinuousMapperBounds:function(k,d,e){var f=this;var m=f._private;var n=k._private.group;if(a.is.number(e)){if(m.continuousMapperBounds[n][d]==null){m.continuousMapperBounds[n][d]={min:e,max:e,vals:[]}}var c=m.continuousMapperBounds[n][d];
var l=c.vals;var h=false;var o=null,g=null;if(l.length>0){o=l[0];g=l[l.length-1]}for(var j=0;j<l.length;j++){if(e<=l[j]){l.splice(j,0,e);h=true;break}}if(!h){l.push(e)}c.min=l[0];c.max=l[l.length-1];if(o!=c.min||g!=c.max){m.continuousMapperUpdates.push({group:k.group(),element:k})}}},updateContinuousMapperBounds:function(h,d,k,e){var f=this;var l=f._private;var m=h._private.group;var c=l.continuousMapperBounds[m][d];if(c==null){this.addContinuousMapperBounds(h,d,e);return}var j=c.vals;var n=null,g=null;
if(j.length>0){n=j[0];g=j[j.length-1]}this.removeContinuousMapperBounds(h,d,k);this.addContinuousMapperBounds(h,d,e);if(n!=c.min||g!=c.max){l.continuousMapperUpdates.push({group:h.group(),element:h})}},removeContinuousMapperBounds:function(j,d,e){var f=this;var l=f._private;var m=j._private.group;var c=l.continuousMapperBounds[m][d];if(c==null){return}var n=null,g=null;var k=c.vals;if(k.length>0){n=k[0];g=k[k.length-1]}for(var h=0;h<k.length;h++){if(e==k[h]){k.splice(h,1);break}}if(k.length>0){c.min=k[0];
c.max=k[k.length-1]}else{c.min=null;c.max=null}if(n!=c.min||g!=c.max){l.continuousMapperUpdates.push({group:j.group(),element:j})}}})})(jQuery,jQuery.cytoscapeweb);(function(b,a){a.fn.core({panning:function(c){if(c!==undefined){this._private.panEnabled=c?true:false}else{return this._private.panEnabled}return this},zooming:function(c){if(c!==undefined){this._private.zoomEnabled=c?true:false}else{return this._private.zoomEnabled}return this},pan:function(d){var c=this.renderer().pan(d);if(c==null){this.trigger("pan");
return this}return c},panBy:function(d){var c=this.renderer().panBy(d);if(c==null){this.trigger("pan");return this}return c},fit:function(d){var c=this.renderer().fit({elements:d,zoom:true});if(c==null){this.trigger("zoom");this.trigger("pan");return this}return c},zoom:function(d){var c=this.renderer().zoom(d);if(c!=null){return c}else{this.trigger("zoom");return this}},center:function(c){this.renderer().fit({elements:c,zoom:false});this.trigger("pan");return this},centre:function(){return this.center.apply(cy,arguments)
},reset:function(){this.renderer().pan({x:0,y:0});this.renderer().zoom(1);this.trigger("zoom");this.trigger("pan");return this}})})(jQuery,jQuery.cytoscapeweb);(function(d,c){c.fn.collection=function(f,g){d.each(f,function(h,j){c.CyCollection.prototype[h]=j;c.CyElement.prototype[h]=function(){var k=this.collection();return j.apply(k,arguments)}})};var b={prefix:{nodes:"n",edges:"e"},id:{nodes:0,edges:0},generate:function(l,g,k){var f=c.is.element(g)?g._private:g;var h=f.group;var j=k!=null?k:this.prefix[h]+this.id[h];
if(l.getElementById(j).empty()){this.id[h]++}else{while(!l.getElementById(j).empty()){j=this.prefix[h]+(++this.id[h])}}return j}};function e(j,h,g){var f=this;g=(g===undefined||g?true:false);if(j===undefined||h===undefined||!(j instanceof c.CyCore)){c.console.error("An element must have a core reference and parameters set");return}if(h.group!="nodes"&&h.group!="edges"){c.console.error("An element must be of type `nodes` or `edges`; you specified `%s`",h.group);return}this.length=1;this[0]=this;this._private={cy:j,data:c.util.copy(h.data)||{},position:c.util.copy(h.position)||{},listeners:{},group:h.group,bypass:c.util.copy(h.bypass)||{},style:{},removed:true,selected:h.selected?true:false,selectable:h.selectable||h.selectable===undefined?true:false,locked:h.locked?true:false,grabbed:false,grabbable:h.grabbable||h.grabbable===undefined?true:false,classes:{},animation:{current:[],queue:[]},renscratch:{},scratch:{},edges:{},children:{}};
if(h.renderedPosition!=null){this._private.position=this.cy().renderer().modelPoint(h.renderedPosition)}if(c.is.string(h.classes)){d.each(h.classes.split(/\s+/),function(l,k){if(k!=""){f._private.classes[k]=true}})}if(g===undefined||g){this.restore()}}c.CyElement=e;e.prototype.cy=function(){return this._private.cy};e.prototype.element=function(){return this};e.prototype.collection=function(){return new a(this.cy(),[this])};function a(m,l){if(m===undefined||!(m instanceof c.CyCore)){c.console.error("A collection must have a reference to the core");
return}var k={};var g=[];var h=false;if(l==null){l=[]}else{if(l.length>0&&!c.is.element(l[0])){h=true;var f=[];d.each(l,function(o,n){if(n.data==null){n.data={}}var q=n.data;if(q.id==null){q.id=b.generate(m,n)}else{if(m.getElementById(q.id).size()!=0){c.console.error("Can not create element: an element in the visualisation already has ID `%s`",q.id);return}}var p=new c.CyElement(m,n,false);f.push(p)});l=f}}d.each(l,function(o,n){if(n==null){return}var p=n._private.data.id;if(k[p]==null){k[p]=true;
g.push(n)}});for(var j=0;j<g.length;j++){this[j]=g[j]}this.length=g.length;this._private={cy:m,ids:k};if(h){this.restore()}}c.CyCollection=a;a.prototype.cy=function(){return this._private.cy};a.prototype.element=function(){return this[0]};a.prototype.collection=function(){return this};c.fn.collection({json:function(){var h=this.element()._private;var g=c.util.copy({data:h.data,position:h.position,group:h.group,bypass:h.bypass,removed:h.removed,selected:h.selected,selectable:h.selectable,locked:h.locked,grabbed:h.grabbed,grabbable:h.grabbable,classes:"",scratch:h.scratch});
var f=[];d.each(h.classes,function(j,k){f.push(j)});d.each(f,function(k,j){g.classes+=j+(k<f.length-1?" ":"")});return g}});c.fn.collection({restore:function(h){var k=[];if(h===undefined){h=true}function j(q,n){if(!q.removed()){return}var l=q.cy()._private;var p=q._private.data;var r=q.cy();if(p.id==null){p.id=b.generate(r,q)}else{if(q.cy().getElementById(p.id).size()!=0){c.console.error("Can not create element: an element in the visualisation already has ID `%s`",p.id);return}}if(c.is.fn(n)){var o=n(q);
if(o!==undefined&&!o){return}}q._private.removed=false;l[q._private.group][p.id]=q;var m=q;d.each(p,function(s,t){m.cy().addContinuousMapperBounds(m,s,t)});k.push(q)}var g=this.filter(function(){return this.isNode()}).each(function(){j(this)});var f=this.filter(function(){return this.isEdge()}).each(function(){j(this,function(u){var p=u._private.data;var n=u.cy();var r=["source","target"];for(var q=0;q<r.length;q++){var s=r[q];var m=p[s];if(m==null||m==""){c.console.error("Can not create edge with id `%s` since it has no `%s` attribute set in `data` (must be non-empty value)",p.id,s);
return false}else{if(n.getElementById(m).empty()){c.console.error("Can not create edge with id `%s` since it specifies non-existant node as its `%s` attribute with id `%s`",p.id,s,m);return false}}}var l=u.cy().getElementById(p.source);var o=u.cy().getElementById(p.target);function t(y,w,x){var v=w.element()._private.data.id;var z=x.element()._private.data.id;if(y._private.edges[v]==null){y._private.edges[v]={}}y._private.edges[v][z]={edge:x,source:l,target:o}}t(l,o,u);t(o,l,u)})});g.each(function(){var o=this._private.data.parent;
if(o!=null){var n=this.cy().getElementById(o);if(n.empty()){c.console.error("Node with id `%s` specifies non-existant parent `%s`; hierarchy will be ignored",this.id(),o)}else{var l=false;var m=n;while(!m.empty()){if(this.same(m)){c.console.error("Node with id `%s` has self as ancestor; hierarchy will be ignored",this.id());l=true;delete this.element()._private.data.parent;break}m=m.parent()}if(!l){n.element()._private.children[this.id()]=this}}}});k=new c.CyCollection(this.cy(),k);if(k.length>0){if(h){k.rtrigger("add")
}else{k.trigger("add")}}return this}});c.fn.collection({removed:function(){return this.element()._private.removed},inside:function(){return !this.removed()}});c.fn.collection({remove:function(h){var k=[];var g={};var f={};if(h===undefined){h=true}this.each(function(){if(this.isNode()){var n=this.element();f[n.id()]=this;function m(o){d.each(o._private.edges,function(p,q){d.each(q,function(s,r){g[s]=r.edge})})}m(n);function l(o){if(o.children().nonempty()){d.each(o._private.children,function(p,q){f[p]=q;
m(q);if(q.children().nonempty()){l(q)}})}}l(n)}if(this.isEdge()){g[this.id()]=this}});d.each([g,f],function(l,m){d.each(m,function(s,n){var o=n.element();var p=o._private.group;o._private.removed=true;delete o.cy()._private[o.group()][o.id()];d.each(o._private.data,function(t,u){o.cy().removeContinuousMapperBounds(o,t,u)});k.push(o);if(o.isEdge()){var q=o.source().element();var r=o.target().element();delete q._private.edges[r.id()][o.id()];delete r._private.edges[q.id()][o.id()]}})});var j=new c.CyCollection(this.cy(),k);
if(j.size()>0){if(h){this.cy().notify({type:"remove",collection:j})}j.trigger("remove")}return this}})})(jQuery,jQuery.cytoscapeweb);(function(b,a){a.fn.collection({animated:function(){return this.element()._private.animation.current.length>0}});a.fn.collection({clearQueue:function(){return this.each(function(){this.element()._private.animation.queue=[]})}});a.fn.collection({delay:function(d,c){return this.animate({delay:d},{duration:d,complete:c})}});a.fn.collection({animate:function(d,e){var c=+new Date;
return this.each(function(){var j=this;var k=a.util.copy(j._private.position);var f=a.util.copy(j.style());var g=this.cy()._private;e=b.extend(true,{},{duration:400},e);switch(e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200;break}if(d==null||(d.position==null&&d.bypass==null&&d.delay==null)){return}if(j.animated()&&(e.queue===undefined||e.queue)){h()}else{n()}var l;function h(){l=j._private.animation.queue;m()}function n(){l=j._private.animation.current;m()}function m(){l.push({properties:d,params:e,callTime:c,startPosition:k,startStyle:f});
g.animation.elements=g.animation.elements.add(j)}})}});a.fn.collection({stop:function(c,d){this.each(function(){var e=this;b.each(e._private.animation.current,function(f,g){if(d){b.each(g.properties,function(h,j){b.each(j,function(l,k){e._private[h][l]=k})})}});e._private.animation.current=[];if(c){e._private.animation.queue=[]}});this.cy().notify({collection:this,type:"draw"});return this}});a.fn.collection({show:function(){this.cy().renderer().showElements(this.collection());return this}});a.fn.collection({hide:function(){this.cy().renderer().hideElements(this.collection());
return this}});a.fn.collection({visible:function(){return this.cy().renderer().elementIsVisible(this.element())}})})(jQuery,jQuery.cytoscapeweb);(function(b,a){a.fn.collection({addClass:function(d){d=d.split(/\s+/);var c=this;b.each(d,function(f,e){if(a.is.emptyString(e)){return}c.each(function(){this._private.classes[e]=true})});c.rtrigger("class");return c}});a.fn.collection({hasClass:function(c){return this.element()._private.classes[c]==true}});a.fn.collection({toggleClass:function(j,d){var f=j.split(/\s+/);
var e=this;var g=[];function c(m,l){var n=m._private.classes[l]!==undefined;delete m._private.classes[l];if(n){g.push(m)}}function h(m,l){var n=m._private.classes[l]===undefined;m._private.classes[l]=true;if(n){g.push(m)}}e.each(function(){var l=this;b.each(f,function(n,m){if(m==null||m==""){return}if(d===undefined){if(l.hasClass(m)){c(l,m)}else{h(l,m)}}else{if(d){h(l,m)}else{c(l,m)}}})});if(g.length>0){var k=new a.CyCollection(e.cy(),g);k.rtrigger("class")}return e}});a.fn.collection({removeClass:function(e){e=e.split(/\s+/);
var c=this;var d=[];b.each(e,function(h,g){if(g==null||g==""){return}c.each(function(){var j=this._private.classes[g]!==undefined;delete this._private.classes[g];if(j){d.push(this)}})});if(d.length>0){var f=new a.CyCollection(c.cy(),d);f.rtrigger("class")}return c}})})(jQuery,jQuery.cytoscapeweb);(function(b,a){a.fn.collection({allAre:function(c){return this.filter(c).size()==this.size()},is:function(c){return new a.CySelector(this.cy(),c).filter(this).size()>0},same:function(c){c=this.cy().collection(c);
if(this.size()!=c.size()){return false}return this.intersect(c).size()==this.size()},allSame:function(c){return this.same.apply(this,arguments)},anySame:function(c){c=this.cy().collection(c);return this.intersect(c).size()>0},allAreNeighbors:function(c){c=this.cy().collection(c);return this.neighborhood().intersect(c).size()==c.size()},allAreNeighbours:function(){return this.allAreNeighbors.apply(this,arguments)}})})(jQuery,jQuery.cytoscapeweb);(function(d,a){a.fn.collection({data:b({attr:"data",allowBinding:true,bindingEvent:"data",settingTriggersEvent:true,settingEvent:"data",validKey:{forSet:function(e){switch(e){case"id":case"source":case"target":case"parent":return false;
default:return true}}},onSet:function(g,e,f){this.cy().updateContinuousMapperBounds(this,g,e,f)}})});a.fn.collection({removeData:c({attr:"data",event:"data",triggerEvent:true,onRemove:function(e,f){this.cy().removeContinuousMapperBounds(this,e,f)},validKey:function(e){switch(e){case"id":case"source":case"target":return false;default:return true}},essentialKeys:["id","source","target","parent"]})});a.fn.collection({id:function(){return this.element()._private.data.id}});a.fn.collection({position:b({attr:"position",allowBinding:true,bindingEvent:"position",settingTriggersEvent:true,settingEvent:"position",validKey:{forSet:function(e){return this.isNode()
},forGet:function(e){return this.isNode()}},validValue:function(e,f){return true},onSet:function(g,e,f){},onGet:function(e,f){}})});a.fn.collection({positions:function(f){if(a.is.plainObject(f)){this.each(function(g,h){d.each(f,function(j,k){h._private.position[j]=k})});this.rtrigger("position")}else{if(a.is.fn(f)){var e=f;this.each(function(g,h){var j=e.apply(h,[g,h]);d.each(j,function(k,l){h._private.position[k]=l})});this.rtrigger("position")}}}});a.fn.collection({renderedPosition:b({attr:"position",allowBinding:false,settingTriggersEvent:true,settingEvent:"position",validKey:{forSet:function(e){return this.isNode()
},forGet:function(e){return this.isNode()}},validValue:function(e,f){return true},override:{forSet:function(f,h){var g={};g[f]=h;var e=this.cy().renderer().modelPoint(g);this.element()._private.position[f]=e[f]},forGet:function(f){var e=this.position(false);var g=this.cy().renderer().renderedPoint(e);return g[f]},forObjectGet:function(){return this.cy().renderer().renderedPosition(this.element())}}})});a.fn.collection({renderedStyle:function(h){var g=this.element();var f=g.cy().renderer();var e=f.renderedStyle(g);
if(h===undefined){return e}else{return e[h]}}});a.fn.collection({style:function(e){var f=this.element();if(e===undefined){return a.util.copy(f._private.style)}else{if(e===false){return f._private.style}else{if(a.is.string(e)){return a.util.copy(f._private.style[e])}}}}});a.fn.collection({bypass:b({attr:"bypass",allowBinding:true,bindingEvent:"bypass",settingTriggersEvent:true,settingEvent:"bypass"})});a.fn.collection({removeBypass:c({attr:"bypass",event:"bypass",triggerEvent:true})});function b(e){var f={attr:"foo",allowBinding:false,bindingEvent:"foo",settingTriggersEvent:false,settingEvent:"foo",validKey:{forGet:function(h){return true
},forSet:function(h){return true}},override:{forSet:null,forGet:null,forObjectGet:null},validValue:function(h,j){return true},onSet:null,onGet:null,};var g=d.extend(true,{},f,e);return function(r,h){var s=this.element();var t=this;function p(v){if(g.validKey.forGet.apply(s,[v])){var u;if(a.is.fn(g.override.forGet)){u=g.override.forGet.apply(s,[v])}else{u=a.util.copy(s._private[g.attr][v])}if(a.is.fn(g.onGet)){g.onGet.apply(s,[v,u])}return u}else{}}function k(u,v){t.each(function(){if(g.validKey.forSet.apply(this,[u])&&g.validValue.apply(this,[u,v])){var w=this.element()._private[g.attr][u];
if(a.is.fn(g.override.forSet)){g.override.forSet.apply(this,[u,v])}else{this.element()._private[g.attr][u]=a.util.copy(v)}if(a.is.fn(g.onSet)){g.onSet.apply(s,[u,w,v])}}else{}})}function o(u,v){if(v===undefined){t.bind(g.bindingEvent,u)}else{t.bind(g.bindingEvent,v,u)}}function j(){if(g.settingTriggersEvent){t.rtrigger(g.settingEvent)}}function n(w){var u;var v=s._private[g.attr];if(a.is.fn(g.override.forObjectGet)){u=g.override.forObjectGet.apply(s,[])}else{u=v}if(w||w===undefined){u=a.util.copy(u)
}return u}if(r===undefined){return n()}else{if(r===false){return n(false)}else{if(h===undefined){if(a.is.string(r)){return p(r)}else{if(a.is.plainObject(r)){var m=r;d.each(m,function(u,v){k(u,v)});j()}else{if(g.allowBinding&&a.is.fn(r)){var q=r;o(q)}else{a.console.warn("Invalid first parameter for `%s()` for collection with element `%s` : expect a key string or an object"+(g.allowBinding?" or a handler function for binding":""),g.attr,s._private.data.id)}}}}else{if(g.allowBinding&&a.is.plainObject(r)&&a.is.fn(h)){var l=r;
var q=h;o(q,l)}else{if(a.is.string(r)){k(r,h);j()}else{a.console.warn("Invalid parameters for `%s()` for collection with element `%s` : expect a key string and a value"+(g.allowBinding?" or a data object and a handler function for binding":""),g.attr,s._private.data.id)}}}}}return this}}function c(e){var f={attr:"foo",event:"foo",triggerEvent:false,onRemove:function(h,j){},validKey:function(h){return true},essentialKeys:[]};var g=d.extend(true,{},f,e);return function(n){var o=this.element();var j=this;
function m(){j.each(function(){var r=this.element();var p=r._private[g.attr];var q={};d.each(g.essentialKeys,function(t,s){if(p[s]!==undefined){q[s]=p[s]}});r._private[g.attr]=q})}function h(p){j.each(function(){var q=this.element();if(g.validKey.apply(q,[p])){var r=q._private[g.attr][p];delete q._private[g.attr][p];if(a.is.fn(g.onRemove)){g.onRemove.apply(q,[p,r])}}})}function l(){if(g.triggerEvent){j.rtrigger(g.event)}}if(n===undefined){m();l()}else{if(a.is.string(n)){var k=n.split(/\s+/);d.each(k,function(q,p){if(a.is.emptyString(p)){return
}h(p)});l()}else{a.console.warn("Invalid parameters to `%s()` for collection with element `%s` : %o",g.attr,o._private.data.id,arguments)}}return this}}})(jQuery,jQuery.cytoscapeweb);(function(d,b){function a(e){return function(){var f=this.element();if(f.isNode()&&!f.removed()){var h=0;var g=this;g.connectedEdges().each(function(j,k){h+=e(g,k)});return h}else{return undefined}}}b.fn.collection({degree:a(function(f,e){if(e.source().same(e.target())){return 2}else{return 1}})});b.fn.collection({indegree:a(function(f,e){if(e.target().same(f)){return 1
}else{return 0}})});b.fn.collection({outdegree:a(function(f,e){if(e.source().same(f)){return 1}else{return 0}})});function c(f,e){return function(){var g=null;this.nodes().each(function(h,j){var k=j[f]();if(k!=null&&(g==null||e(k,g))){g=k}});return g}}b.fn.collection({minDegree:c("degree",function(f,e){return f<e})});b.fn.collection({maxDegree:c("degree",function(f,e){return f>e})});b.fn.collection({minIndegree:c("indegree",function(f,e){return f<e})});b.fn.collection({maxIndegree:c("indegree",function(f,e){return f>e
})});b.fn.collection({minOutdegree:c("outdegree",function(f,e){return f<e})});b.fn.collection({maxOutdegree:c("outdegree",function(f,e){return f>e})});b.fn.collection({totalDegree:function(){var e=0;this.nodes().each(function(f,g){e+=g.degree()});return e}})})(jQuery,jQuery.cytoscapeweb);(function(d,c){c.fn.collection({trigger:function(f,g){this.each(function(){var k=this;var o=c.is.plainObject(f)?f.type:f;var j=this.cy()._private;var n=this._private.listeners[o];function m(s,r){if(s!=null&&c.is.fn(s.callback)){var r=c.is.plainObject(f)?f:d.Event(o);
r.data=s.data;r.cy=r.cytoscapeweb=cy;var q=[r];if(g!=null){if(!c.is.array(g)){g=[g]}d.each(g,function(u,t){q.push(t)})}s.callback.apply(k,q)}}if(n!=null){d.each(n,function(q,r){m(r)});for(var l=0;l<n.length;l++){function h(){n.splice(l,1);l--}if(n[l].one){h()}else{if(n[l].once){var p=n[l];p.collection.each(function(q,r){if(!r.same(k)){r.unbind(o,p.callback)}});h()}}}}if(j.live[o]!=null){d.each(j.live[o],function(s,t){var q=new c.CySelector(k.cy(),s);var r=q.filter(k.collection());if(r.size()>0){d.each(t,function(u,v){m(v)
})}})}k.cy().trigger(f,g)});return this}});c.fn.collection({rtrigger:function(f,g){this.cy().notify({type:f,collection:this.filter(function(){return !this.removed()})});this.trigger(f,g)}});c.fn.collection({live:function(){c.console.warn("`live()` can be called only on collections made from top-level selectors");return this}});c.fn.collection({die:function(){c.console.warn("`die()` can be called only on collections made from top-level selectors");return this}});c.fn.collection({bind:a({listener:function(){return{}
}})});c.fn.collection({one:a({listener:function(){return{one:true}}})});c.fn.collection({once:a({listener:function(g,f){return{once:true,collection:g}},after:function(g,h,f){}})});c.fn.collection({on:function(f,g,h){return this.bind(f,g,h)}});c.fn.collection({off:function(f,g){return this.unbind(f,g)}});c.fn.collection({unbind:function(g,h){var f=(g||"").split(/\s+/);this.each(function(){var j=this;if(g===undefined){j._private.listeners={};return}d.each(f,function(k,n){if(c.is.emptyString(n)){return this
}var m=j._private.listeners[n];if(m!=null){for(var l=0;l<m.length;l++){var o=m[l];if(h==null||h==o.callback){m.splice(l,1);l--}}}})});return this}});var b="mousedown mouseup click mouseover mouseout mousemove touchstart touchmove touchend grab drag free";d.each(b.split(/\s+/),function(h,g){var f={};f[g]=e({event:g});c.fn.collection(f)});function e(g){var f={event:""};g=d.extend({},f,g);return function(j,k){if(c.is.fn(k)){return this.bind(g.event,j,k)}else{if(c.is.fn(j)){var h=j;return this.bind(g.event,h)
}else{return this.rtrigger(g.event,j)}}}}function a(g){var f={listener:function(){},after:function(){}};g=d.extend({},f,g);return function(j,k,l){var h=this;if(l===undefined){l=k;k=undefined}if(l==null){return this}d.each(j.split(/\s+/),function(m,n){if(c.is.emptyString(n)){return}h.each(function(){if(this._private.listeners[n]==null){this._private.listeners[n]=[]}var o=g.listener.apply(this,[h,this]);o.callback=l;o.data=k;this._private.listeners[n].push(o)});g.after.apply(h,[h,l,k])});return this
}}})(jQuery,jQuery.cytoscapeweb);(function(b,a){a.fn.collection({isNode:function(){return this.group()=="nodes"}});a.fn.collection({isEdge:function(){return this.group()=="edges"}});a.fn.collection({isLoop:function(){return this.isEdge()&&this.source().id()==this.target().id()}});a.fn.collection({group:function(){return this.element()._private.group}})})(jQuery,jQuery.cytoscapeweb);(function(b,a){a.fn.collection({each:function(d){if(a.is.fn(d)){for(var c=0;c<this.size();c++){var e=this.eq(c).element();
d.apply(e,[c,e])}}return this},toArray:function(){var d=[];for(var c=0;c<this.size();c++){d.push(this.eq(c).element())}return d},slice:function(f,c){var e=[];if(c==null){c=this.size()}if(f<0){f=this.size()+f}for(var d=f;d>=0&&d<c&&d<this.size();d++){e.push(this.eq(d))}return new a.CyCollection(this.cy(),e)},size:function(){return this.length},eq:function(c){return this[c]},empty:function(){return this.size()==0},nonempty:function(){return !this.empty()}})})(jQuery,jQuery.cytoscapeweb);(function($,$$){$$.fn.collection({scratch:defineAccessor({attr:"scratch"})});
$$.fn.collection({removeScratch:defineRemover({attr:"scratch"})});$$.fn.collection({renscratch:defineAccessor({attr:"renscratch"})});$$.fn.collection({removeRenscratch:defineRemover({attr:"renscratch"})});function defineAccessor(params){var defaults={attr:"scratch"};params=$.extend(true,{},defaults,params);return function(name,val){var self=this;if(name===undefined){return self.element()._private[params.attr]}var fields=name.split(".");function set(){self.each(function(){var self=this;var obj=self._private[params.attr];
$.each(fields,function(i,field){if(i==fields.length-1){return}obj=obj[field]});var lastField=fields[fields.length-1];obj[lastField]=val})}function get(){var obj=self.element()._private[params.attr];$.each(fields,function(i,field){obj=obj[field]});return obj}if(val===undefined){return get()}else{set()}return this}}function defineRemover(params){var defaults={attr:"scratch"};params=$.extend(true,{},defaults,params);return function(name){var self=this;if(name===undefined){self.each(function(){this._private[params.attr]={}
})}else{var names=name.split(/\s+/);$.each(names,function(i,name){self.each(function(){eval("delete this._private."+params.attr+"."+name+";")})})}return this}}})(jQuery,jQuery.cytoscapeweb);(function(d,b){function c(e){return function(){var f=arguments;if(f.length==2){this.bind(e.event,f[0],f[1])}else{if(f.length==1){this.bind(e.event,f[0])}else{if(f.length==0){var g=new b.CyCollection(this.cy());this.each(function(){if(e.ableField==null||this.element()._private[e.ableField]){this.element()._private[e.field]=e.value;
g=g.add(this)}});g.rtrigger(e.event)}}}return this}}function a(f){function e(h,j){var g={};g[h]=j;return g}b.fn.collection(e(f.field,function(){return this.element()._private[f.field]}));b.fn.collection(e(f.on,c({event:f.on,field:f.field,ableField:f.ableField,value:true})));b.fn.collection(e(f.off,c({event:f.off,field:f.field,ableField:f.ableField,value:false})))}a({field:"locked",on:"lock",off:"unlock"});a({field:"grabbable",on:"grabify",off:"ungrabify"});a({field:"selected",ableField:"selectable",on:"select",off:"unselect"});
a({field:"selectable",on:"selectify",off:"unselectify"});b.fn.collection({grabbed:function(){return this.element()._private.grabbed}})})(jQuery,jQuery.cytoscapeweb);(function(e,b){b.fn.collection({nodes:function(f){return this.filter(function(h,g){return g.isNode()}).filter(f)}});b.fn.collection({edges:function(f){return this.filter(function(h,g){return g.isEdge()}).filter(f)}});b.fn.collection({filter:function(f){var h=this.cy();if(b.is.fn(f)){var g=[];this.each(function(k,j){j=j.element();if(f.apply(j,[k,j])){g.push(j)
}});return new b.CyCollection(this.cy(),g)}else{if(b.is.string(f)||b.is.elementOrCollection(f)){return new b.CySelector(this.cy(),f).filter(this)}else{if(f===undefined){return this}}}b.console.warn("You must pass a function or a selector to cy.filter() et al");return new b.CyCollection(this.cy())}});b.fn.collection({not:function(f){if(f==null){return this}else{if(b.is.string(f)){f=this.filter(f)}var g=[];f=f.collection();this.each(function(k,j){var h=f._private.ids[j.id()];if(!h){g.push(j.element())
}});return new b.CyCollection(this.cy(),g)}}});b.fn.collection({intersect:function(m){var o=this;if(b.is.string(m)){var j=m;return this.filter(j)}if(b.is.element(m)){m=m.collection()}var f=[];var l=this;var k=m;var n=this.size()<m.size();var h=n?l._private.ids:k._private.ids;var g=n?k._private.ids:l._private.ids;e.each(h,function(p){if(g[p]){f.push(o.cy().getElementById(p))}});return new b.CyCollection(this.cy(),f)}});b.fn.collection({add:function(h){var g=this;if(h==null){return this}if(b.is.string(h)){var f=h;
h=this.cy().elements(f)}h=h.collection();var k=[];var j={};function l(n){if(n==null){return}if(j[n.id()]==null){k.push(n);j[n.id()]=true}}this.each(function(o,n){l(n)});var m=h.collection();m.each(function(o,n){l(n)});return new b.CyCollection(this.cy(),k)}});b.fn.collection({neighborhood:function(f){var g=[];this.nodes().each(function(h,j){j.connectedEdges().each(function(k,m){var l=m.connectedNodes().not(j);if(l.size()>0){g.push(l.element())}g.push(m.element())})});return this.connectedNodes().add(new b.CyCollection(this.cy(),g)).filter(f)
}});b.fn.collection({neighbourhood:function(f){return this.neighborhood(f)}});b.fn.collection({closedNeighborhood:function(f){return new b.CySelector(this.cy(),f).filter(this.neighborhood().add(this))}});b.fn.collection({closedNeighbourhood:function(f){return this.closedNeighborhood(f)}});b.fn.collection({openNeighborhood:function(f){return this.neighborhood(f)}});b.fn.collection({openNeighbourhood:function(f){return this.openNeighborhood(f)}});b.fn.collection({source:d({attr:"source"})});b.fn.collection({target:d({attr:"target"})});
function d(f){return function(g){var h=[];this.edges().each(function(){var j=this.cy().getElementById(this.data(f.attr)).element();h.push(j)});return new b.CyCollection(this.cy(),h).filter(g)}}b.fn.collection({edgesWith:a()});b.fn.collection({edgesTo:a({include:function(h,g,f){return f.target.same(g)}})});function a(g){var f={include:function(k,j,h){return true}};g=e.extend(true,{},f,g);return function(j){var h=[];if(b.is.string(j)){j=this.cy.$(j)}this.nodes().each(function(k,l){j.nodes().each(function(n,o){var m=l.element()._private.edges[o.id()];
if(m!=null){e.each(m,function(q,p){if(g.include(l,o,p)){h.push(p.edge)}})}})});return new b.CyCollection(this.cy(),h)}}b.fn.collection({connectedEdges:function(f){var g=[];this.nodes().each(function(h,j){e.each(j.element()._private.edges,function(k,l){e.each(l,function(n,m){g.push(m.edge)})})});return new b.CyCollection(this.cy(),g).filter(f)}});b.fn.collection({connectedNodes:function(f){return this.source().add(this.target()).filter(f)}});b.fn.collection({parallelEdges:c()});b.fn.collection({codirectedEdges:c({include:function(g,h,f){return f.source.same(g)&&f.target.same(h)
}})});function c(g){var f={include:function(j,k,h){return true}};g=e.extend(true,{},f,g);return function(h){var j=[];this.edges().each(function(k,l){var m=l.source().element();var n=l.target().element();e.each(m._private.edges[n.id()],function(p,o){if(g.include(m,n,o)){j.push(o.edge)}})});return new b.CyCollection(this.cy(),j).filter(h)}}b.fn.collection({parent:function(f){var g=[];this.each(function(){var h=this.cy().getElementById(this.data("parent"));if(h.size()>0){g.push(h.element())}});return new b.CyCollection(this.cy(),g).filter(f)
},parents:function(g){var h=[];var f=this.parent();while(f.nonempty()){f.each(function(){h.push(this.element())});f=f.parent()}return new b.CyCollection(this.cy(),h).filter(g)},children:function(f){var g=[];this.each(function(){var h=this.element();e.each(h._private.children,function(k,j){g.push(j)})});return new b.CyCollection(this.cy(),g).filter(f)},siblings:function(f){return this.parent().children().not(this).filter(f)},descendants:function(f){var g=[];function h(j){j.each(function(){g.push(this.element());
if(this.children().nonempty()){h(j.children())}})}h(this.children());return new b.CyCollection(this.cy(),g).filter(f)}})})(jQuery,jQuery.cytoscapeweb);(function($,$$){function CySelector(cy,onlyThisGroup,selector){if(cy===undefined||cy.$==null){$$.console.error("A selector must have a reference to the core");return}if(selector===undefined&&onlyThisGroup!==undefined){selector=onlyThisGroup;onlyThisGroup=undefined}var self=this;self._private={selectorText:null,invalid:true,cy:cy};function newQuery(){return{classes:[],colonSelectors:[],data:[],group:onlyThisGroup,ids:[],meta:[],collection:null,filter:null}
}if(selector==null||($$.is.string(selector)&&selector.match(/^\s*$/))){if(onlyThisGroup==null){self.length=0}else{self[0]=newQuery();self.length=1}}else{if($$.is.element(selector)){var collection=new $$.CyCollection(self.cy(),[selector]);self[0]=newQuery();self[0].collection=collection;self.length=1}else{if($$.is.collection(selector)){self[0]=newQuery();self[0].collection=selector;self.length=1}else{if($$.is.fn(selector)){self[0]=newQuery();self[0].filter=selector;self.length=1}else{if($$.is.string(selector)){var metaChar="[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]";
var variable="(?:[\\w-]|(?:\\\\"+metaChar+"))+";var comparatorOp="=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=";var boolOp="\\?|\\!|\\^";var string="\"(?:\\\\\"|[^\"])+\"|'(?:\\\\'|[^'])+'";var number="\\d*\\.\\d+|\\d+|\\d*\\.\\d+[eE]\\d+";var value=string+"|"+number;var meta="degree|indegree|outdegree";var separator="\\s*,\\s*";var className=variable;var id=variable;function cleanMetaChars(str){return str.replace(new RegExp("\\\\("+metaChar+")","g"),"\1")}$.each(comparatorOp.split("|"),function(i,op){comparatorOp+="|@"+op
});var exprs={group:{regex:"(node|edge)",populate:function(group){this.group=group+"s"}},state:{regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated)",populate:function(state){this.colonSelectors.push(state)}},id:{regex:"\\#("+id+")",populate:function(id){this.ids.push(cleanMetaChars(id))}},className:{regex:"\\.("+className+")",populate:function(className){this.classes.push(cleanMetaChars(className))}},dataExists:{regex:"\\[\\s*("+variable+")\\s*\\]",populate:function(variable){this.data.push({field:cleanMetaChars(variable)})
}},dataCompare:{regex:"\\[\\s*("+variable+")\\s*("+comparatorOp+")\\s*("+value+")\\s*\\]",populate:function(variable,comparatorOp,value){this.data.push({field:cleanMetaChars(variable),operator:comparatorOp,value:value})}},dataBool:{regex:"\\[\\s*("+boolOp+")\\s*("+variable+")\\s*\\]",populate:function(boolOp,variable){this.data.push({field:cleanMetaChars(variable),operator:boolOp})}},metaCompare:{regex:"\\{\\s*("+meta+")\\s*("+comparatorOp+")\\s*("+number+")\\s*\\}",populate:function(meta,comparatorOp,number){this.meta.push({field:cleanMetaChars(meta),operator:comparatorOp,value:number})
}}};self._private.selectorText=selector;var remaining=selector;var i=0;function consumeExpr(){var expr;var match;var name;$.each(exprs,function(n,e){var m=remaining.match(new RegExp("^"+e.regex));if(m!=null){match=m;expr=e;name=n;var consumed=m[0];remaining=remaining.substring(consumed.length);return false}});return{expr:expr,match:match,name:name}}function consumeWhitespace(){var match=remaining.match(/^\s+/);if(match){var consumed=match[0];remaining=remaining.substring(consumed.length)}}function consumeSeparators(){var match=remaining.match(new RegExp("^"+separator));
if(match){var consumed=match[0];remaining=remaining.substring(consumed.length);self[++i]=newQuery()}}self[0]=newQuery();consumeWhitespace();for(;;){consumeSeparators();var check=consumeExpr();if(check.name=="group"&&onlyThisGroup!=null&&self[i].group!=onlyThisGroup){$$.console.error("Group `%s` conflicts with implicit group `%s` in selector `%s`",self[i].group,onlyThisGroup,selector);return}if(check.expr==null){$$.console.error("The selector `%s` is invalid",selector);return}else{var args=[];for(var j=1;
j<check.match.length;j++){args.push(check.match[j])}check.expr.populate.apply(self[i],args)}if(remaining.match(/^\s*$/)){break}}self.length=i+1}else{$$.console.error("A selector must be created from a string; found %o",selector);return}}}}}self._private.invalid=false}$.cytoscapeweb.CySelector=CySelector;CySelector.prototype.cy=function(){return this._private.cy};CySelector.prototype.size=function(){return this.length};CySelector.prototype.eq=function(i){return this[i]};CySelector.prototype.find=function(){};
CySelector.prototype.filter=function(collection,addLiveFunction){var self=this;if(self._private.invalid){return new $$.CyCollection(self.cy())}var selectorFunction=function(i,element){for(var j=0;j<self.length;j++){var query=self[j];if(query.group!=null&&query.group!=element._private.group){continue}var allColonSelectorsMatch=true;for(var k=0;k<query.colonSelectors.length;k++){var sel=query.colonSelectors[k];var renderer=self.cy().renderer();switch(sel){case":selected":allColonSelectorsMatch=element.selected();
break;case":unselected":allColonSelectorsMatch=!element.selected();break;case":locked":allColonSelectorsMatch=element.locked();break;case":unlocked":allColonSelectorsMatch=!element.locked();break;case":visible":allColonSelectorsMatch=renderer.elementIsVisible(element);break;case":hidden":allColonSelectorsMatch=!renderer.elementIsVisible(element);break;case":grabbed":allColonSelectorsMatch=element.grabbed();break;case":free":allColonSelectorsMatch=!element.grabbed();break;case":removed":allColonSelectorsMatch=element.removed();
break;case":inside":allColonSelectorsMatch=!element.removed();break;case":grabbable":allColonSelectorsMatch=element.grabbable();break;case":ungrabbable":allColonSelectorsMatch=!element.grabbable();break;case":animated":allColonSelectorsMatch=element.animated();break;case":unanimated":allColonSelectorsMatch=!element.animated();break}if(!allColonSelectorsMatch){break}}if(!allColonSelectorsMatch){continue}var allIdsMatch=true;for(var k=0;k<query.ids.length;k++){var id=query.ids[k];var actualId=element._private.data.id;
allIdsMatch=allIdsMatch&&(id==actualId);if(!allIdsMatch){break}}if(!allIdsMatch){continue}var allClassesMatch=true;for(var k=0;k<query.classes.length;k++){var cls=query.classes[k];allClassesMatch=allClassesMatch&&element.hasClass(cls);if(!allClassesMatch){break}}if(!allClassesMatch){continue}function operandsMatch(params){var allDataMatches=true;for(var k=0;k<query[params.name].length;k++){var data=query[params.name][k];var operator=data.operator;var value=data.value;var field=data.field;var matches;
if(operator!=null&&value!=null){var fieldStr=""+params.fieldValue(field);var valStr=""+eval(value);var caseInsensitive=false;if(operator.charAt(0)=="@"){fieldStr=fieldStr.toLowerCase();valStr=valStr.toLowerCase();operator=operator.substring(1);caseInsensitive=true}if(operator=="="){operator="=="}switch(operator){case"*=":matches=fieldStr.search(valStr)>=0;break;case"$=":matches=new RegExp(valStr+"$").exec(fieldStr)!=null;break;case"^=":matches=new RegExp("^"+valStr).exec(fieldStr)!=null;break;default:if(caseInsensitive){var expr="fieldStr "+operator+" valStr";
matches=eval(expr)}else{var expr=params.fieldRef(field)+" "+operator+" "+value;matches=eval(expr)}}}else{if(operator!=null){switch(operator){case"?":matches=params.fieldTruthy(field);break;case"!":matches=!params.fieldTruthy(field);break;case"^":matches=params.fieldUndefined(field);break}}else{matches=!params.fieldUndefined(field)}}if(!matches){allDataMatches=false;break}}return allDataMatches}var allDataMatches=operandsMatch({name:"data",fieldValue:function(field){return element._private.data[field]
},fieldRef:function(field){return"element._private.data."+field},fieldUndefined:function(field){return element._private.data[field]===undefined},fieldTruthy:function(field){if(element._private.data[field]){return true}return false}});if(!allDataMatches){continue}var allMetaMatches=operandsMatch({name:"meta",fieldValue:function(field){return element[field]()},fieldRef:function(field){return"element."+field+"()"},fieldUndefined:function(field){return element[field]()==undefined},fieldTruthy:function(field){if(element[field]()){return true
}return false}});if(!allMetaMatches){continue}if(query.collection!=null){var matchesAny=query.collection._private.ids[element.id()]!=null;if(!matchesAny){continue}}if(query.filter!=null&&element.collection().filter(query.filter).size()==0){continue}return true}return false};if(self._private.selectorText==null){selectorFunction=function(){return true}}var filteredCollection=collection.filter(selectorFunction);if(addLiveFunction){var key=self.selector();var structs=self.cy()._private;filteredCollection.live=function(events,data,callback){var evts=events.split(/\s+/);
$.each(evts,function(i,event){if($$.is.emptyString(event)){return}if(callback===undefined){callback=data;data=undefined}if(structs.live[event]==null){structs.live[event]={}}if(structs.live[event][key]==null){structs.live[event][key]=[]}structs.live[event][key].push({callback:callback,data:data})});return this};filteredCollection.die=function(event,callback){if(event==null){$.each(structs.live,function(event){if(structs.live[event]!=null){delete structs.live[event][key]}})}else{var evts=event.split(/\s+/);
$.each(evts,function(j,event){if(callback==null){if(structs.live[event]!=null){delete structs.live[event][key]}}else{if(structs.live[event]!=null&&structs.live[event][key]!=null){for(var i=0;i<structs.live[event][key].length;i++){if(structs.live[event][key][i].callback==callback){structs.live[event][key].splice(i,1);i--}}}}})}return this}}return filteredCollection};CySelector.prototype.toString=CySelector.prototype.selector=function(){var str="";function clean(obj){if($$.is.string(obj)){return obj
}return""}for(var i=0;i<this.length;i++){var query=this[i];var group=clean(query.group);str+=group.substring(0,group.length-1);for(var j=0;j<query.data.length;j++){var data=query.data[j];str+="["+data.field+clean(data.operator)+clean(data.value)+"]"}for(var j=0;j<query.colonSelectors.length;j++){var sel=query.colonSelectors[i];str+=sel}for(var j=0;j<query.ids.length;j++){var sel="#"+query.ids[i];str+=sel}for(var j=0;j<query.classes.length;j++){var sel="."+query.classes[i];str+=sel}if(this.length>1&&i<this.length-1){str+=", "
}}return str}})(jQuery,jQuery.cytoscapeweb);(function(c,a){function b(d){c.cytoscapeweb("debug","Creating null renderer with options (%o)",d)}b.prototype.notify=function(d){c.cytoscapeweb("debug","Notify null renderer with params (%o)",d)};b.prototype.zoom=function(d){c.cytoscapeweb("debug","Zoom null renderer with params (%o)",d)};b.prototype.fit=function(d){c.cytoscapeweb("debug","Fit null renderer with params (%o)",d)};b.prototype.pan=function(d){c.cytoscapeweb("debug","Pan null renderer with params (%o)",d)
};b.prototype.panBy=function(d){c.cytoscapeweb("debug","Relative pan null renderer with params (%o)",d)};b.prototype.showElements=function(d){};b.prototype.hideElements=function(d){};b.prototype.elementIsVisible=function(d){return d._private.visible};b.prototype.renderedDimensions=function(){return{}};b.prototype.dimensions=function(){return{}};c.cytoscapeweb("renderer","null",b)})(jQuery,jQuery.cytoscapeweb);(function(j,m){var l={minZoom:0.001,maxZoom:1000,maxPan:-1>>>1,minPan:(-(-1>>>1)-1),selectionToPanDelay:500,dragToSelect:true,dragToPan:true,style:{selectors:{node:{fillColor:"#888",fillOpacity:1,borderColor:"#666",borderOpacity:1,opacity:1,borderWidth:0,borderStyle:"solid",height:10,width:10,shape:"ellipse",cursor:"pointer",visibility:"visible",labelValign:"top",labelHalign:"middle",labelText:{defaultValue:"",passthroughMapper:"label"},labelFillColor:"#000",labelOutlineColor:"#666",labelOutlineWidth:0,labelFontSize:"inherit",labelFontStyle:"normal",labelFontDecoration:"none",labelFontVariant:"italic",labelFontFamily:"Arial",labelFontWeight:"bold",labelOpacity:1,labelOutlineOpacity:1},edge:{lineColor:"#ccc",targetArrowColor:"#ccc",sourceArrowColor:"#ccc",targetArrowShape:"none",sourceArrowShape:"none",opacity:1,width:1,style:"solid",cursor:"pointer",visibility:"visible",labelText:{defaultValue:"",passthroughMapper:"label"},labelFillColor:"#000",labelOutlineColor:"#666",labelOutlineWidth:0,labelFontSize:"inherit",labelFontStyle:"normal",labelFontDecoration:"none",labelFontVariant:"italic",labelFontFamily:"Arial",labelFontWeight:"bold",labelOutlineOpacity:1,labelOpacity:1}},global:{panCursor:"grabbing",selectionFillColor:"#ccc",selectionOpacity:0.5,selectionBorderColor:"#888",selectionBorderWidth:1}}};
var t={};var d=function(u){j.cytoscapeweb("renderer","svg","linestyle",u.name,u);delete u.name};d({name:"solid",array:undefined});d({name:"dot",array:[1,5]});d({name:"longdash",array:[10,2]});d({name:"dash",array:[5,5]});var p=function(u){j.cytoscapeweb("renderer","svg","edgearrowshape",u.name,u);delete u.name};p({name:"triangle",svg:function(v,x,y,u,w){return v.polygon(x,[[0,1],[0.5,0],[1,1]])},centerPoint:{x:0.5,y:0.5}});p({name:"square",svg:function(v,x,y,u,w){return v.polygon(x,[[0,0],[0,1],[1,1],[1,0]])
},centerPoint:{x:0.5,y:0.5}});p({name:"circle",svg:function(v,x,y,u,w){return v.circle(x,0.5,0.5,0.5)},centerPoint:{x:0.5,y:0.5}});p({name:"diamond",svg:function(v,x,y,u,w){return v.polygon(x,[[0.5,0],[1,0.5],[0.5,1],[0,0.5]])},centerPoint:{x:0.5,y:0.5}});p({name:"tee",svg:function(v,x,y,u,w){return v.rect(x,0,0,1,0.5)},centerPoint:{x:0.5,y:0.5}});var n=function(u){j.cytoscapeweb("renderer","svg","nodeshape",u.name,u);delete u.name};n({name:"ellipse",svg:function(v,x,y,u,w){return v.ellipse(x,u.x,u.y,w.width,w.height)
},update:function(v,x,y,u,w){v.change(y.renscratch("svg"),{cx:u.x,cy:u.y,rx:w.width/2,ry:w.height/2})},intersectionShape:Ellipse});n({name:"rectangle",svg:function(v,x,y,u,w){return v.rect(x,u.x-w.width/2,u.y-w.height/2,w.width,w.height)},update:function(v,x,y,u,w){v.change(y.renscratch("svg"),{x:u.x-w.width/2,y:u.y-w.height/2,width:w.width,height:w.height})},intersectionShape:Rectangle});n({name:"roundrectangle",svg:function(v,x,y,u,w){return v.rect(x,u.x-w.width/2,u.y-w.height/2,w.width,w.height,w.width/4,w.height/4)
},update:function(v,x,y,u,w){v.change(y.renscratch("svg"),{x:u.x-w.width/2,y:u.y-w.height/2,width:w.width,height:w.height})},intersectionShape:Rectangle});n({name:"triangle",svg:function(v,x,y,u,w){return v.polygon(x,[[u.x,u.y-w.height/2],[u.x+w.width/2,u.y+w.height/2],[u.x-w.width/2,u.y+w.height/2]])},update:function(v,x,y,u,w){v.change(y.renscratch("svg"),{points:[[u.x,u.y-w.height/2],[u.x+w.width/2,u.y+w.height/2],[u.x-w.width/2,u.y+w.height/2]]})},intersectionShape:Polygon});function r(u){if(u!=null&&typeof u==typeof""&&(u=="hidden"||u=="visible")){return u
}else{m.console.error("SVG renderer does not recognise %o as a valid visibility",u)}}function b(u){if(u!=null&&typeof u==typeof 1&&!isNaN(u)&&0<=u&&u<=1){return u}else{m.console.error("SVG renderer does not recognise %o as a valid percent (should be between 0 and 1)",u)}}function q(u){if(u!=null&&typeof u==typeof""&&j.Color(u)!=""){return j.Color(u).toHEX()}else{m.console.error("SVG renderer does not recognise %o as a valid colour",u)}}function c(u){if(u!=null&&typeof u==typeof 1&&!isNaN(u)){return u
}else{m.console.error("SVG renderer does not recognise %o as a valid number",u)}}function o(v){var u=j.cytoscapeweb("renderer","svg","nodeshape",v);if(u==null){m.console.error("SVG renderer does not recognise %s as a valid node shape",v)}return u}function e(v){var u=j.cytoscapeweb("renderer","svg","linestyle",v);if(u==null){m.console.error("SVG renderer does not recognise %s as a valid line style",v)}return u}function k(u){if(u=="none"||u==null){return null}return j.cytoscapeweb("renderer","svg","edgearrowshape",u)
}function s(u){if(u!=null&&typeof u==typeof""&&(u=="left"||u=="right"||u=="middle")){return u}else{m.console.error("SVG renderer does not recognise %o as a valid label horizonal alignment",u)}}function g(u){if(u!=null&&typeof u==typeof""&&(u=="top"||u=="bottom"||u=="middle")){return u}else{m.console.error("SVG renderer does not recognise %o as a valid label vertical alignment",u)}}function h(u){if(u=="grab"){if(j.browser.webkit){return"-webkit-grab"}else{if(j.browser.mozilla){return"-moz-grab"}else{return"move"
}}}else{if(u=="grabbing"){if(j.browser.webkit){return"-webkit-grabbing"}else{if(j.browser.mozilla){return"-moz-grabbing"}else{return"move"}}}else{return u}}}function f(u){m.console.debug("Creating SVG renderer with options (%o)",u);this.options=j.extend({},l,u);this.setStyle(u.style);this.cy=u.cy;m.console.debug("SVG renderer is using style (%o)",this.style)}f.prototype.init=function(x){var w=this;this.cy=this.options.cy;var u=this.cy.container();var v=u.svg("get");this.container=u;this.svg=v;if(v!=null){u.svg("destroy")
}u.css({padding:"0 !important"});u.svg({onLoad:function(y){if(w.scale==null){w.scale=1}if(w.translation==null){w.translation={x:0,y:0}}u.find("svg").css("overflow","hidden");v=y;w.svg=v;w.svg.change();w.svgBg=v.rect(0,0,"100%","100%",{fill:"white",opacity:0});w.edgesGroup=v.group();w.nodesGroup=v.group();w.svgRoot=j(w.nodesGroup).parents("svg:first")[0];w.selectedElements=w.cy.collection();w.touchingNodes=w.cy.collection();w.defs=w.svg.defs();w.makeBackgroundInteractive();x()},settings:{height:"100%",width:"100%"}})
};f.prototype.offsetFix=function(v){var u=this;if(v.offsetX==null||v.offsetY==null){v.offsetX=v.clientX-u.cy.container().offset().left;v.offsetY=v.clientY-u.cy.container().offset().top}};f.prototype.makeBackgroundInteractive=function(){var D=this;var M=D.svgRoot;var O=D.options.selectionToPanDelay;D.shiftDown=false;j(window).bind("keydown keyup",function(R){D.shiftDown=R.shiftKey});function v(R){return R.target==M||j(R.target).parents("g:last")[0]==D.edgesGroup||j(R.target)[0]==D.svgBg}j(M).bind("mousedown",function(T){if(T.button!=0){return
}if(v(T)){T.preventDefault();D.offsetFix(T);var U=null;var S={};var V=true;var X=true;if(!D.options.dragToSelect){X=false}if(!D.options.dragToPan){V=false}if(V&&X){V=false;X=true}var ae=T.pageX;var ab=T.pageY;var R=T.offsetX;var ag=T.offsetY;var af=0;var ad=0;var ac=false;function aa(){if(ac){return}ac=true;D.svg.change(M,{cursor:h(D.style.global.panCursor)})}if(D.options.dragToPan){var W=setTimeout(function(){if(!D.cy.panning()){return}V=true;X=false},O)}var Y=function(am){clearTimeout(W);var ak=am.pageX-ae;
var aj=am.pageY-ab;ae=am.pageX;ab=am.pageY;af+=ak;ad+=aj;if(V){D.translation.x+=ak;D.translation.y+=aj;aa();D.pan(D.translation)}if(X){if(U==null){U=D.svg.rect(R,ag,0,0,{fill:q(D.style.global.selectionFillColor),opacity:b(D.style.global.selectionOpacity),stroke:q(D.style.global.selectionBorderColor),strokeWidth:c(D.style.global.selectionBorderWidth)})}else{var al=Math.abs(af);var ai=Math.abs(ad);var ah=af>=0?R:R+af;var an=ad>=0?ag:ag+ad;S={x1:ah,y1:an,x2:ah+al,y2:an+ai};D.svg.change(U,{x:ah,y:an,width:al,height:ai})
}}};j(window).bind("mousemove",Y);var Z=function(ah){if(ah.type=="mouseup"&&ah.button!=0){return}clearTimeout(W);j(window).unbind("mousemove",Y);j(window).unbind("mouseup",Z);j(window).unbind("blur",Z);j(M).unbind("mouseup",Z);if(V){D.svg.change(M,{cursor:null})}if(X){if(U!=null&&S.x1!=null&&!isNaN(S.x1)){D.selectElementsFromIntersection(U,S);D.svgRemove(U)}else{if(!D.shiftDown){D.unselectAll()}}}};j(window).bind("mouseup",Z);j(window).bind("blur",Z);j(M).bind("mouseup",Z)}}).bind("mousewheel",function(W,X,T,S){if(!D.cy.panning()||!D.cy.zooming()){return
}D.offsetFix(W.originalEvent);var R={x:W.originalEvent.offsetX,y:W.originalEvent.offsetY};var U=0.5;if(j.browser.mozilla||j.browser.msie){U=0.167}var V=D.zoom()*(1+S*U);D.zoomAboutPoint(R,V);D.cy.trigger("zoom");D.cy.trigger("pan");W.preventDefault()});function H(U,S){var R,X;var V=D.cy.container().offset();var T=U.originalEvent.touches;var W=T[S];R=W.pageX-V.left;X=W.pageY-V.top;return{x:R,y:X}}function I(S){var T=H(S,0);var R=H(S,1);return{x:(T.x+R.x)/2,y:(T.y+R.y)/2}}function y(S){var T=H(S,0);
var R=H(S,1);return D.getDistance(T,R)}function N(R){return R.originalEvent.touches==null?0:R.originalEvent.touches.length}function x(R,S){return N(R)>=S}function L(R){if(R>=2){P=true;u=true;clearTimeout(w);w=setTimeout(function(){u=false},F)}else{P=false}}var F=100;var P=false;var u=false;var w=null;var J=true;var Q,z,E,B,A,K,G,C;j(M).bind("touchstart",function(R){if(!v(R)||D.touchingNodes.size()>0){return}R.preventDefault();B=H(R,0);if(x(R,2)){Q=I(R);z=D.modelPoint(Q);E=y(R);A=H(R,1);L(2)}else{L(1);
J=true}C=false}).bind("touchmove",function(S){if(!v(S)||D.touchingNodes.size()>0){return}J=false;if(x(S,2)){L(2);G=H(S,1)}else{L(1)}S.preventDefault();var Y={x:0,y:0};if(x(S,1)&&D.cy.panning()){K=H(S,0);if(x(S,2)&&D.cy.zooming()){var R=y(S);var T=R/E;Q=D.renderedPoint(z);if(T!=1){var X=1.5;var W={x:K.x-B.x,y:K.y-B.y};var V={x:G.x-A.x,y:G.y-A.y};Y={x:(W.x+V.x)/2,y:(W.y+V.y)/2};if(T>1){T=(T-1)*X+1}else{T=1-(1-T)*X}var U=D.zoom()*T;D.zoomAboutPoint(Q,U,Y);E=R}}else{if(!u){Y={x:K.x-B.x,y:K.y-B.y};D.panBy(Y)
}}B=K;A=G}}).bind("touchend",function(R){if(J&&v(R)){D.unselectAll()}});j(M).bind("mousedown mouseup click mouseover mouseout mousemove touchstart touchmove touchend",function(S){if(v(S)){var R=j.extend({},S,{cyTarget:D.cy});D.cy.background().trigger(R);D.cy.trigger(R)}})};f.prototype.zoomAboutPoint=function(A,B,u){var C=this;var v=C.cy;if(!v.panning()||!v.zooming()){return}var x=C.pan();var z=C.zoom();var y=B;if(u==null){u={x:0,y:0}}var w={x:-y/z*(A.x-x.x-u.x)+A.x,y:-y/z*(A.y-x.y-u.y)+A.y};C.transform({translation:w,scale:y})
};f.prototype.zoom=function(v){var x=this.cy;if(!x.zooming()){return}if(v===undefined){return this.scale}else{if(typeof v==typeof{}){var u=v;var w;if(u.position!==undefined){w=this.renderedPoint(u.position)}else{w=u.renderedPosition}if(w!==undefined){this.zoomAboutPoint(w,v.level)}else{this.transform({scale:u.level})}}else{this.transform({scale:v})}}};f.prototype.fit=function(D){var u=D.elements;var L=D.zoom;var C=this.cy;if(!C.panning()||(L!==undefined&&!C.zooming())){return}if(u==null||u.size()==0){u=this.cy.elements()
}if(u.is(":removed")){m.console.debug("SVG renderer does not take into account removed elements when fitting");u=u.filter(":inside")}m.console.debug("Fit SVG renderer to view bounds");var A=this.nodesGroup.getBBox();var y,I,v,H;function E(O){if(O.height==0||O.width==0){return}var N=O.x;var z=N+O.width;var M=O.y;var w=M+O.height;if(N<y||y==null){y=N}if(z>v||v==null){v=z}if(M<I||I==null){I=M}if(w>H||H==null){H=w}}u.nodes().each(function(){var z=this.renscratch("svg").getBBox();var w=this.renscratch("svgLabel").getBBox();
E(z);E(w)});u.edges().each(function(){var O=this.source().id();var P=this.target().id();var z=lf=0.4;if(O==P){var N=this.renscratch("svg").getBBox();N.x2=N.x+N.width;N.y2=N.y+N.height;N.x1=N.x;N.y1=N.y;var M={};M.x=N.x1+N.width*lf;M.y=N.y1+N.height*lf;M.width=N.x2-M.x;M.height=N.y2-M.y;var w=this.renscratch("svgLabel").getBBox();E(M);E(w)}else{var N=this.renscratch("svg").getBBox();var w=this.renscratch("svgLabel").getBBox();E(N);E(w)}});var J=v-y;var F=H-I;var x=this.cy.container().width();var K=this.cy.container().height();
var B=Math.min(x/J,K/F);if(L){this.transform({translation:{x:-y*B-(J*B-x)/2,y:-I*B-(F*B-K)/2},scale:B})}else{var G=this.scale;this.transform({translation:{x:-y*G+x/2-(v-y)/2*G,y:-I*G+K/2-(H-I)/2*G}})}};f.prototype.panBy=function(u){if(!this.cy.panning()){return}m.console.debug("Relatively pan SVG renderer with position (%o)",u);this.transform({translation:{x:this.translation.x+c(u.x),y:this.translation.y+c(u.y)}})};f.prototype.pan=function(u){if(!this.cy.panning()){return}m.console.debug("Pan SVG renderer with position (%o)",u);
if(u===undefined){return{x:this.translation.x,y:this.translation.y}}if(u==null||typeof u!=typeof{}){m.console.error("You can not pan without specifying a proper position object; `%o` is invalid",u);return}this.transform({translation:{x:c(u.x),y:c(u.y)}})};f.prototype.capTransformation=function(z){var u=z.translation;var y=z.scale;var C=this;var v=C.options.maxZoom;var x=C.options.minZoom;var B=C.options.minPan;var w=C.options.maxPan;var A=true;var D=true;if(u!=null){if(u.x<B){u.x=B;D=false}else{if(u.x>w){u.x=w;
D=false}}if(u.y<B){u.y=B;D=false}else{if(u.y>w){u.y=w;D=false}}}else{u=C.translation}if(y!=null){if(y>v){y=v;A=false}else{if(y<x){y=x;A=false}}}else{y=C.scale}return{scale:y,translation:u,valid:A&&D,validScale:A,validTranslation:D}};f.prototype.transform=function(x){var v=this;var u=v.capTransformation(x);if(u.valid){v.translation=u.translation;v.scale=u.scale}else{if(x.capScale){m.console.debug("Capping zoom level %o to %o",v.scale,u.scale);v.scale=u.scale}if(x.capTranslation){m.console.debug("Capping translation %o to %o",v.translation,u.translation);
v.translation=u.translation}}function w(y){if(v.svg==null||y==null){return}v.svg.change(y,{transform:"translate("+v.translation.x+","+v.translation.y+") scale("+v.scale+")"})}w(v.nodesGroup);w(v.edgesGroup)};f.prototype.calculateStyleField=function(w,A){var u=this;var y=u.options.styleCalculator;var v=u.style.selectors;var x=undefined;var z=w.bypass(false)[A];if(z!==undefined){x=z}else{j.each(v,function(B,C){var D=C[A];if(D!=null&&w.is(B)){x=D}})}return y.calculate(w,x)};f.prototype.calculateStyle=function(x){var u=this;
var B=u.options.styleCalculator;var w=u.style.selectors;var y={};j.each(w,function(C,D){if(x.is(C)){y=j.extend(y,D)}});y=j.extend(y,x.bypass(false));j.each(y,function(C,D){y[C]=B.calculate(x,D)});x._private.style=y;if(x.isEdge()){var z=x.source();var A=x.target();function v(){if(z.style("visibility")=="visible"&&A.style("visibility")=="visible"){return r(y.visibility)}else{return"hidden"}}y.visibility=v()}return y};f.prototype.svgRemove=function(u){var v=j(u);var x=j(this.svgRoot);function w(z){var A=j(z);
var y=false;if(A.parent().size()==0){return false}A.parents().each(function(){if(this==x[0]){y=true}});return y}if(u==null||!w(u)){return}this.svg.remove(u)};f.prototype.updateNodePositionFromShape=function(v){var x=v.style(false);var w=v.renscratch("svgGroup");var u=v.position(false);o(x.shape).update(this.svg,w,v,u,x)};f.prototype.makeSvgEdgeInteractive=function(y){var v=y.renscratch("svg");var z=y.renscratch("svgTargetArrow");var x=y.renscratch("svgSourceArrow");var w=j(v).parents("svg:first")[0];
var u=this;j(v).add(z).add(x).bind("mouseup mousedown click touchstart touchmove touchend mouseover mousemove mouseout",function(A){if(u.edgeEventIsValid(y,A)){y.trigger(A)}}).bind("click touchend",function(A){u.selectElement(y)})};f.prototype.makeSvgNodeLabelInteractive=function(u){};f.prototype.makeSvgNodeInteractive=function(x){var v=x.renscratch("svg");var w=j(v).parents("svg:first")[0];var u=this;var y=null;j(v).bind("mousedown touchstart",function(B){y=false;x.trigger(B);if(x.grabbed()||x.locked()||!x.grabbable()){B.preventDefault();
return}if(B.type=="touchstart"&&B.originalEvent.touches.length>1){return}x._private.grabbed=true;x.trigger(j.extend({},B,{type:"grab"}));u.touchingNodes=u.touchingNodes.add(x);var J,H;if(B.type=="touchstart"){var E=B.originalEvent.touches;var D=E[E.length-1];J=D.pageX;H=D.pageY}else{J=B.pageX;H=B.pageY}var A;if(x.selected()){A=u.selectedElements.add(x).filter(":grabbable")}else{A=x.collection()}var I=true;var F=function(M){y=true;var P,O;if(M.type=="touchmove"){var N=B.originalEvent.touches;var Q=N[N.length-1];
P=Q.pageX;O=Q.pageY}else{P=M.pageX;O=M.pageY}var L=(P-J)/u.zoom();var K=(O-H)/u.zoom();J=P;H=O;A.each(function(R,S){S.element()._private.position.x+=L;S.element()._private.position.y+=K});u.updatePosition(A);if(I){if(M.type!="touchmove"){u.moveToFront(x)}I=false}else{x.trigger(j.extend({},M,{type:"position"}));x.trigger(j.extend({},M,{type:"drag"}))}};j(window).bind("mousemove touchmove",F);var C=false;var z=0;var G=function(K){if(K.type=="touchend"&&K.originalEvent.touches.length!=0){return}if(!C){C=true
}else{return}j(window).unbind("mousemove touchmove",F);j(window).unbind("mouseup touchend blur",G);j(v).unbind("mouseup touchend",G);x._private.grabbed=false;u.touchingNodes=u.touchingNodes.not(x);x.trigger(j.extend({},K,{type:"free"}))};j(window).bind("mouseup touchend blur",G);j(v).bind("mouseup touchend",G);B.preventDefault()}).bind("mouseup touchend",function(z){x.trigger(j.extend({},z));if(y==false){y=null;x.trigger(j.extend({},z,{type:"click"}));u.selectElement(x)}}).bind("mouseover mouseout mousemove",function(z){if(u.nodeEventIsValid(x,z)){x.trigger(j.extend({},z))
}})};f.prototype.edgeEventIsValid=function(w,x){var u=j(x.relatedTarget);var v=this;switch(x.type){case"mouseover":case"mouseout":return u.parent().parent().size()>0;default:return true}};f.prototype.nodeEventIsValid=function(w,x){var u=j(x.relatedTarget);var v=this;switch(x.type){case"mouseover":case"mouseout":return u.parent().parent().size()>0;default:return true}};f.prototype.modelPoint=function(w){var v=this;var u={};if(w.x!==undefined){u.x=(w.x-v.pan().x)/v.zoom()}if(w.y!==undefined){u.y=(w.y-v.pan().y)/v.zoom()
}return u};f.prototype.renderedPoint=function(v){var u=this;var w={};if(v.x!==undefined){w.x=v.x*u.zoom()+u.pan().x}if(v.y!==undefined){w.y=v.y*u.zoom()+u.pan().y}return w};f.prototype.renderedPosition=function(v){var u=this;return u.renderedPoint(v.position(false))};f.prototype.hideElements=function(u){u.each(function(w,v){v.bypass(false).visibility="hidden"});this.updateBypass(u)};f.prototype.showElements=function(w){var v=this;var u=this.cy.collection();w.each(function(y,x){x.bypass(false).visibility="visible"
});this.updateBypass(w)};f.prototype.elementIsVisible=function(u){return u.style(false).visibility!="hidden"};f.prototype.renderedStyle=function(w){var v=this;var x=w.style();var u=["width","height","borderWidth","labelOutlineWidth"];j.each(u,function(y,z){if(x[z]!=null){x[z]=x[z]*v.zoom()}});return x};f.prototype.unselectElements=function(u){u=u.collection();u.unselect();this.selectedElements=this.selectedElements.not(u)};f.prototype.selectElementsFromIntersection=function(x,z){var v=this;var w=this.cy.collection();
var u=this.cy.collection();function y(F){if(!v.elementIsVisible(F)){return false}var I=o(F.style("shape")).intersectionShape;var M=v.modelPoint({x:z.x1,y:z.y1});var J=v.modelPoint({x:z.x2,y:z.y2});var D=v.svg.rect(M.x,M.y,J.x-M.x,J.y-M.y);var B=Intersection.intersectShapes(new Rectangle(D),new I(F.renscratch("svg")));v.svgRemove(D);var Q=v.zoom();var O=F.renderedPosition().x;var L=F.renderedPosition().y;var P=F.renderedStyle().width+F.style("borderWidth")*Q;var G=F.renderedStyle().height+F.style("borderWidth")*Q;
var C=z.x1;var N=z.y1;var A=z.x2;var K=z.y2;var E=C<=O&&O<=A&&N<=L&&L<=K;var H=B.points.length>0;return E||H}this.cy.elements().each(function(B,A){if(A.isNode()){if(y(A)){w=w.add(A)}}else{if(v.elementIsVisible(A)&&y(A.source())&&y(A.target())){w=w.add(A)}}});if(!v.shiftDown){u=u.add(this.cy.elements().filter(function(A,B){return B.selected()&&!w.allSame(B)}))}u.unselect();w.select();v.selectedElements=v.selectedElements.not(u);v.selectedElements=v.selectedElements.add(w)};f.prototype.selectElement=function(w){var v=this;
var u=v.cy.collection();var x=v.cy.collection();if(!v.shiftDown){u=u.add(v.cy.elements().filter(function(y,z){return z.selected()&&!w.same(z)}))}if(v.shiftDown){if(w.selected()){u=u.add(w)}else{x=x.add(w)}}else{if(!w.selected()){x=x.add(w)}}u.unselect();x.select();v.selectedElements=v.selectedElements.not(u);v.selectedElements=v.selectedElements.add(x);v.moveToFront(x)};f.prototype.moveToFront=function(v){v=v.collection();var u=this;v.each(function(x,w){u.svgRemove(w.renscratch("svgGroup"));u.makeSvgElement(w);
u.updatePosition(v.closedNeighborhood().edges())})};f.prototype.unselectAll=function(){this.unselectElements(this.cy.elements())};f.prototype.makeSvgNode=function(w){var y=w.position(false);var u=this;if(y.x==null||y.y==null){m.console.debug("SVG renderer is ignoring creating of node `%s` with position (%o, %o)",w.id(),y.x,y.y);return}var v;var x=this.calculateStyle(w);var z=this.svg.group(this.nodesGroup);w.renscratch("svgGroup",z);v=o(x.shape).svg(this.svg,z,w,y,x);w.renscratch("svg",v);this.makeSvgNodeLabel(w);
w.renscratch("svg",v);m.console.debug("SVG renderer made node `%s` with position (%i, %i)",w.id(),y.x,y.y);this.makeSvgNodeInteractive(w);this.updateElementStyle(w,x);return v};f.prototype.makeSvgNodeLabel=function(w){var v=this;var u=w.position("x");var z=w.position("y");w.renscratch().svgLabelGroup=v.svg.group(w.renscratch().svgGroup);w.renscratch().svgLabelOutline=v.svg.text(w.renscratch().svgLabelGroup,u,z,"label init");w.renscratch().svgLabel=v.svg.text(w.renscratch().svgLabelGroup,u,z,"label init")
};f.prototype.positionSvgNodeLabel=function(w){var v=this;var u=w.position("x");var z=w.position("y");v.svg.change(w.renscratch().svgLabel,{x:u,y:z});v.svg.change(w.renscratch().svgLabelOutline,{x:u,y:z})};f.prototype.makeSvgEdgePath=function(K){var G=this;var ai=K.target();var Q=K.source();var z=ai.data("id")==Q.data("id");var ad;var M=Q.position("x");var av=Q.position("y");var L=ai.position("x");var au=ai.position("y");if(M==L&&av==au){L++;au++}var J=K.parallelEdges();var D=J.size();var aa;var C;
var ac=20;var aj=20;var W,T,S;var Z=G.getDistance({x:M,y:av},{x:L,y:au});var al=200;if(!z&&F){ac=Math.min(20+4000/Z,al)}J.each(function(aw,ax){if(ax==K){aa=aw}});function v(){var aw=C!=0;var ax=G.svg.createPath();if(ad!=null){G.svgRemove(ad)}if(z){ad=G.svg.path(K.renscratch("svgGroup"),ax.move(M,av).curveC(T.x,T.y,S.x,S.y,L,au))}else{if(aw){ad=G.svg.path(K.renscratch("svgGroup"),ax.move(M,av).curveQ(W.x,W.y,L,au))}else{ad=G.svg.path(K.renscratch("svgGroup"),ax.move(M,av).line(L,au))}}}if(z){var O=Q.style("height");
var I=Q.style("width");ac+=Math.max(I,O);C=aa;ac+=aj*(C);var ap=ac;T={x:M,y:av-O/2-ap};S={x:M-I/2-ap,y:av};v()}else{var ae=D%2==0;if(ae){C=aa-D/2+(aa<D/2?0:1);if(C>0){C-=0.5}else{C+=0.5}}else{C=aa-Math.floor(D/2)}var F=C!=0;if(Q.id()>ai.id()){C*=-1}if(F){W=T=S=G.getOrthogonalPoint({x:M,y:av},{x:L,y:au},ac*C)}else{W=T={x:L,y:au};S={x:M,y:av}}v()}var u=G.calculateStyleField(K,"width");var af=G.calculateStyleField(ai,"shape");var X=G.calculateStyleField(Q,"shape");var w=G.calculateStyleField(K,"targetArrowShape");
var ar=G.calculateStyleField(K,"sourceArrowShape");var an=3;var A=10;while(an*u<A){an++}var aq=an;var x=aq*u;var af=o(af).intersectionShape;var X=o(X).intersectionShape;var y=Intersection.intersectShapes(new Path(ad),new af(ai.renscratch("svg")));var ag=y.points[y.points.length-1];y=Intersection.intersectShapes(new Path(ad),new X(Q.renscratch("svg")));var H=y.points[0];var ab=aq*u;var E=-1*(this.getAngle(T,{x:M,y:av})-90);var V=-1*(this.getAngle(S,{x:L,y:au})-90);if(ag!=null){if(w!="none"){var N=G.getPointAlong(ag,S,x/2,ag);
L=N.x;au=N.y}else{if(ag!=null){L=ag.x;au=ag.y}}}if(H!=null){if(ar!="none"){var U=G.getPointAlong(H,T,x/2,H);M=U.x;av=U.y}else{M=H.x;av=H.y}}v();if(K.renscratch("svgTargetArrow")!=null){this.svgRemove(K.renscratch("svgTargetArrow"))}if(w!="none"){var am=k(w);var Y={x:L-am.centerPoint.x*ab,y:au-am.centerPoint.y*ab,};var B=am.centerPoint;var ao=am==null?null:am.svg(this.svg,K.renscratch("svgGroup"),K,K.position(false),K.style(false));K.renscratch("svgTargetArrow",ao);this.svg.change(ao,{transform:"translate("+Y.x+" "+Y.y+") scale("+ab+") rotate("+V+" "+B.x+" "+B.y+")"})
}if(K.renscratch("svgSourceArrow")!=null){this.svgRemove(K.renscratch("svgSourceArrow"))}if(ar!="none"){var R=k(ar);var P={x:M-R.centerPoint.x*ab,y:av-R.centerPoint.y*ab,};var ak=R.centerPoint;var ah=R==null?null:R.svg(this.svg,K.renscratch("svgGroup"),K,K.position(false),K.style(false));K.renscratch().svgSourceArrow=ah;this.svg.change(ah,{transform:"translate("+P.x+" "+P.y+") scale("+ab+") rotate("+E+" "+ak.x+" "+ak.y+")"})}var at;if(z){at={x:(T.x+S.x)/2*0.85+ai.position("x")*0.15,y:(T.y+S.y)/2*0.85+ai.position("y")*0.15}
}else{if(F){at={x:(W.x+(M+L)/2)/2,y:(W.y+(av+au)/2)/2}}else{at={x:(M+L)/2,y:(av+au)/2}}}K.renscratch("svgLabelGroup",G.svg.group(K.renscratch().svgGroup));K.renscratch("svgLabelOutline",G.svg.text(K.renscratch().svgLabelGroup,at.x,at.y,"label init"));K.renscratch("svgLabel",G.svg.text(K.renscratch().svgLabelGroup,at.x,at.y,"label init"));K.renscratch().svg=ad;return ad};f.prototype.markerDrawFix=function(){this.forceRedraw()};window.redraw=f.prototype.forceRedraw=function(){this.svg.change(this.svgRoot,{opacity:0});
this.svg.change(this.svgRoot,{opacity:Math.random()});this.svg.change(this.svgRoot,{opacity:1});var u=this.svg.rect(0,0,this.cy.container().width(),this.cy.container().height());this.svgRemove(u)};f.prototype.getAngle=function(A,z){var v=function(B){return B*180/Math.PI};var y=this.getDistance(A,z);var x=z.x-A.x;var u=-1*(z.y-A.y);var w=v(Math.acos(x/y));if(u<0){return 360-w}else{return w}};f.prototype.getOrthogonalPoint=function(z,y,v){var x={x:z.x-y.x,y:z.y-y.y};var w=this.getNormalizedPoint({x:x.y,y:-x.x},1);
var u={x:(z.x+y.x)/2,y:(z.y+y.y)/2};return{x:u.x+w.x*v,y:u.y+w.y*v}};f.prototype.getPointAlong=function(y,x,w,z){var u={x:x.x-y.x,y:x.y-y.y};var v=this.getNormalizedPoint({x:u.x,y:u.y},1);if(z==null){z=x}return{x:z.x+v.x*w,y:z.y+v.y*w}};f.prototype.getNormalizedPoint=function(x,w){var v=Math.sqrt(x.x*x.x+x.y*x.y);var u=w/v;return{x:x.x*u,y:x.y*u}};f.prototype.getDistance=function(v,u){return Math.sqrt((u.x-v.x)*(u.x-v.x)+(u.y-v.y)*(u.y-v.y))};f.prototype.makeSvgEdge=function(v){var u=this;var x=v.source().element();
var z=v.target().element();if(x==null||z==null){m.console.debug("SVG renderer is ignoring creating of edge `%s` with missing nodes");return}var B=x.position(false);var y=z.position(false);if(B.x==null||B.y==null||y.x==null||y.y==null){m.console.debug("SVG renderer is ignoring creating of edge `%s` with position (%o, %o, %o, %o)",v.id(),B.x,B.y,y.x,y.y);return}var w=this.calculateStyle(v);var A=this.svg.group(this.edgesGroup);v.renscratch().svgGroup=A;this.svg.change(A);this.makeSvgEdgePath(v);m.console.debug("SVG renderer made edge `%s` with position (%i, %i, %i, %i)",v.id(),B.x,B.y,y.x,y.y);
this.makeSvgEdgeInteractive(v);this.updateElementStyle(v,w);return v.renscratch().svg};f.prototype.makeSvgElement=function(v){var u;if(v.group()=="nodes"){u=this.makeSvgNode(v)}else{if(v.group()=="edges"){u=this.makeSvgEdge(v)}}return u};f.prototype.getSvgElement=function(u){if(u.renscratch().svg!=null){return u.renscratch().svg}else{return this.makeSvgElement(u)}};f.prototype.updateSelection=function(u){this.updateElementsStyle(u)};f.prototype.updateClass=function(u){this.updateElementsStyle(u)};
f.prototype.updateData=function(v,u){this.updateElementsStyle(v);if(u){this.updateMapperBounds(v)}};f.prototype.updateMapperBounds=function(v){var u=this.cy.elements();if(v.nodes().size()>0&&v.edges().size()>0){}else{u=u.filter(function(){return this.group()==v.eq(0).group()})}u=u.not(v);this.updateElementsStyle(u)};f.prototype.updateElementsStyle=function(v){var u=this;v=v.collection();v.nodes().each(function(x,w){u.updateElementStyle(w)});v.edges().each(function(x,w){u.updateElementStyle(w)});v.nodes().neighborhood().edges().not(v.edges()).each(function(x,w){u.updatePosition(w)
})};f.prototype.setStyle=function(u){this.style=j.extend(true,{},l.style,u)};f.prototype.updateStyle=function(u){var v=this.cy.elements();this.setStyle(u);this.updateElementsStyle(v)};f.prototype.updateBypass=function(v){var u=this;v=v.collection();v.nodes().each(function(x,w){u.updateElementStyle(w)});v.edges().add(v.closedNeighborhood().edges()).each(function(w,x){u.updateElementStyle(x)})};f.prototype.updateElementStyle=function(u,v){if(u.isNode()){this.updateNodeStyle(u,v)}else{if(u.isEdge()){this.updateEdgeStyle(u,v)
}}};f.prototype.updateNodeStyle=function(x,w){var B=x.style(false).shape;x._private.style=w!=null?w:this.calculateStyle(x);var u=x.style(false);var C=x.style(false).shape;if(x.renscratch().svg==null){m.console.error("SVG renderer can not update style for node `%s` since it has no SVG element",x.id());return}if(C!=B){this.svgRemove(x.renscratch().svgGroup);this.makeSvgNode(x);return}this.svg.change(x.renscratch().svg,{"pointer-events":"visible",fill:q(u.fillColor),fillOpacity:b(u.fillOpacity),stroke:c(u.borderWidth)>0?q(u.borderColor):"none",strokeWidth:c(u.borderWidth),strokeDashArray:e(u.borderStyle).array,strokeOpacity:b(u.borderOpacity),cursor:h(u.cursor),visibility:r(u.visibility)});
this.svg.change(x.renscratch().svgGroup,{opacity:b(u.opacity)});var y={visibility:r(u.visibility),"pointer-events":"none",fill:q(u.labelFillColor),"font-family":u.labelFontFamily,"font-weight":u.labelFontWeight,"font-style":u.labelFontStyle,"text-decoration":u.labelFontDecoration,"font-variant":u.labelFontVariant,"font-size":u.labelFontSize,"text-rendering":"geometricPrecision"};this.svg.change(x.renscratch().svgLabelGroup,{opacity:b(u.labelOpacity)});this.svg.change(x.renscratch().svgLabelOutline,{stroke:q(u.labelOutlineColor),strokeWidth:c(u.labelOutlineWidth)*2,fill:"none",opacity:b(u.labelOutlineOpacity)});
this.svg.change(x.renscratch().svgLabelOutline,y);this.svg.change(x.renscratch().svgLabel,y);var v=u.labelText==null?"":u.labelText;x.renscratch().svgLabel.textContent=v;x.renscratch().svgLabelOutline.textContent=v;var A=g(u.labelValign);var z=s(u.labelHalign);this.svg.change(x.renscratch().svgGroup,{fillOpacity:b(u.fillOpacity)});o(u.shape).update(this.svg,this.nodesGroup,x,x.position(false),u);this.updateLabelPosition(x,A,z);m.console.debug("SVG renderer collapsed mappers and updated style for node `%s` to %o",x.id(),u)
};f.prototype.updateLabelPosition=function(x,C,z){var A=3;var I=0;var F=0;var E=0;var u=0;var D=x.renscratch().svgLabel.textContent;if(x.isNode()){this.positionSvgNodeLabel(x)}var w;var B;var v;if(D==null||D==""){return}if(x.isNode()){E=x.style(false).height;u=x.style(false).width}if(z=="middle"){w={"text-anchor":"middle"}}else{if(z=="right"){w={"text-anchor":"start"};I=u/2+A}else{if(z=="left"){w={"text-anchor":"end"};I=-u/2-A}}}var H=parseInt(window.getComputedStyle(x.renscratch().svgLabel)["fontSize"]);
var G=j.browser.msie?H/3:0;if(C=="middle"){B={style:"alignment-baseline: central; dominant-baseline: central;"};F=0+G}else{if(C=="top"){B={style:"alignment-baseline: normal; dominant-baseline: normal;"};F=-E/2-A}else{if(C=="bottom"){B={style:"alignment-baseline: normal; dominant-baseline: normal;"};F=E/2+H}}}v={transform:"translate("+I+","+F+")"};var y=j.extend({},w,B,v);this.svg.change(x.renscratch().svgLabelOutline,y);this.svg.change(x.renscratch().svgLabel,y)};f.prototype.updateEdgeStyle=function(A,x){var G=A.style(false).targetArrowShape;
var y=A.style(false).sourceArrowShape;A._private.style=x!=null?x:this.calculateStyle(A);var u=A.style(false);if(A.renscratch().svg==null){m.console.error("SVG renderer can not update style for edge `%s` since it has no SVG element",A.id());return}var z=A.source().style();var E=A.renscratch().oldSourceStyle||z;var w=A.target().style();var H=A.renscratch().oldTargetStyle||w;var I=A.style(false).targetArrowShape;var C=A.style(false).sourceArrowShape;var F=z.height!=E.height||z.width!=E.width||w.height!=H.height||w.width!=H.width||z.shape!=E.shape||w.shape!=H.shape||z.borderWidth!=E.borderWidth||w.borderWidth!=H.borderWidth;
var D=A.renscratch().oldStyle==null||A.renscratch().oldStyle.width!=u.width;A.renscratch().oldSourceStyle=z;A.renscratch().oldTargetStyle=w;A.renscratch().oldStyle=u;if(I!=G||C!=y||F||D){this.svgRemove(A.renscratch().svgGroup);this.makeSvgEdge(A);return}this.svg.change(A.renscratch().svg,{"pointer-events":"visibleStroke",stroke:q(u.lineColor),strokeWidth:c(u.width),strokeDashArray:e(u.style).array,"stroke-linecap":"butt",cursor:h(u.cursor),fill:"none",visibility:r(u.visibility)});this.svg.change(A.renscratch().svgGroup,{opacity:b(u.opacity)});
this.svg.change(A.renscratch().svgTargetArrow,{fill:q(u.targetArrowColor),cursor:h(u.cursor),visibility:r(u.visibility)});this.svg.change(A.renscratch().svgSourceArrow,{fill:q(u.sourceArrowColor),cursor:h(u.cursor),visibility:r(u.visibility)});var B={visibility:r(u.visibility),"pointer-events":"none",fill:q(u.labelFillColor),"font-family":u.labelFontFamily,"font-weight":u.labelFontWeight,"font-style":u.labelFontStyle,"text-decoration":u.labelFontDecoration,"font-variant":u.labelFontVariant,"font-size":u.labelFontSize,"text-rendering":"geometricPrecision"};
this.svg.change(A.renscratch().svgLabel,B);this.svg.change(A.renscratch().svgLabelOutline,j.extend({},B,{fill:"none",stroke:q(u.labelOutlineColor),strokeWidth:c(u.labelOutlineWidth)*2,opacity:b(u.labelOutlineOpacity),}));this.svg.change(A.renscratch().svgLabelGroup,{opacity:b(u.labelOpacity)});var v=u.labelText==null?"":u.labelText;A.renscratch().svgLabel.textContent=v;A.renscratch().svgLabelOutline.textContent=v;this.updateLabelPosition(A,"middle","middle");m.console.debug("SVG renderer collapsed mappers and updated style for edge `%s` to %o",A.id(),u)
};f.prototype.addElements=function(w,v){var u=this;var x=this.cy;w.nodes().each(function(z,y){u.makeSvgElement(y)});w.edges().each(function(z,y){u.makeSvgElement(y)});u.positionEdges(w.edges().parallelEdges());if(v){u.updateMapperBounds(w)}};f.prototype.updatePosition=function(x){m.console.debug("SVG renderer is updating node positions");x=x.collection();var u=this.cy.container();var w=u.svg("get");var v=this;var y=this.options.cy;x.nodes().each(function(B,A){var z=v.getSvgElement(A);var C=A.position(false);
v.updateNodePositionFromShape(A);v.positionSvgNodeLabel(A);m.console.debug("SVG renderer is moving node `%s` to position (%o, %o)",A.id(),C.x,C.y)});v.positionEdges(x.closedNeighborhood().edges())};f.prototype.positionEdges=function(v){var u=this;v.each(function(w,x){if(x.renscratch().svgGroup!=null){u.svgRemove(x.renscratch().svgGroup)}u.makeSvgEdge(x);var z=x.source().position(false);var y=x.target().position(false);m.console.debug("SVG renderer is moving edge `%s` to position (%o, %o, %o, %o)",x.id(),z.x,z.y,y.x,y.y)
})};f.prototype.drawElements=function(v){var u=this;u.updateElementsStyle(v)};f.prototype.removeElements=function(z,x){m.console.debug("SVG renderer is removing elements");var u=this.cy.container();var w=u.svg("get");var A=this.options.cy;var v=this;z.each(function(C,B){if(B.renscratch().svgGroup!=null){w.remove(B.renscratch().svgGroup);B.removeRenscratch("svg");B.removeRenscratch("svgGroup");B.removeRenscratch("svgSourceArrow");B.removeRenscratch("svgTargetArrow");B.removeRenscratch("svgLabel")}else{m.console.debug("Element with group `%s` and ID `%s` has no associated SVG element",B.group(),B.id())
}});if(v.selectedElements!=null){v.selectedElements=v.selectedElements.not(z)}var y=v.cy.collection();z.edges().each(function(B,C){var D=C.source();var E=C.target();y=y.add(D.edgesWith(E))});v.updatePosition(y);if(x){this.updateMapperBounds(z)}};f.prototype.notify=function(w){var u=this.options.cy.container();m.console.debug("Notify SVG renderer with params (%o)",w);if(w.type==null){m.console.error("The SVG renderer should be notified with a `type` field");return}var v=this;switch(w.type){case"load":v.init(function(){v.addElements(w.collection)
});break;case"add":this.addElements(w.collection,w.updateMappers);break;case"remove":this.removeElements(w.collection,w.updateMappers);break;case"position":this.updatePosition(w.collection);break;case"style":this.updateStyle(w.style);break;case"bypass":this.updateBypass(w.collection);break;case"class":this.updateClass(w.collection);break;case"data":this.updateData(w.collection,w.updateMappers);break;case"select":case"unselect":this.updateSelection(w.collection);break;case"draw":this.drawElements(w.collection);
break;default:m.console.debug("The SVG renderer doesn't consider the `%s` event",w.type);break}};function a(u){this.options=u;this.cy=u.cy;this.renderer=u.renderer;if(this.renderer.name()!="svg"){m.console.error("The SVG exporter can be used only if the SVG renderer is used")}}a.prototype.run=function(){return this.options.cy.container().svg("get").toSVG()};j.cytoscapeweb("renderer","svg",f);j.cytoscapeweb("exporter","svg",a)})(jQuery,jQuery.cytoscapeweb);(function(b,a){var c={};function d(e){this.options=b.extend(true,{},c,e)
}d.prototype.run=function(){var e=this.options;var f=e.cy;f.nodes().positions(function(){return{x:0,y:0}});f.one("layoutready",e.ready);f.trigger("layoutready");f.one("layoutstop",e.stop);f.trigger("layoutstop")};d.prototype.stop=function(){};b.cytoscapeweb("layout","null",d)})(jQuery,jQuery.cytoscapeweb);(function(c,a){var d={ready:undefined,stop:undefined,fit:true};function b(e){this.options=c.extend(true,{},d,e)}b.prototype.run=function(){var h=this.options;var l=h.cy;var g=l.nodes();var f=l.edges();
var k=l.container();var j=k.width();var e=k.height();g.positions(function(n,m){if(m.locked()){return false}return{x:Math.round(Math.random()*j),y:Math.round(Math.random()*e)}});l.one("layoutready",h.ready);l.trigger("layoutready");if(h.fit){l.fit()}l.one("layoutstop",h.stop);l.trigger("layoutstop")};b.prototype.stop=function(){};c.cytoscapeweb("layout","random",b)})(jQuery,jQuery.cytoscapeweb);(function(b,a){var d={fit:true,rows:undefined,columns:undefined};function c(e){this.options=b.extend({},d,e)
}c.prototype.run=function(){var x=options=this.options;var h=x.cy;var t=h.nodes();var g=h.edges();var u=h.container();a.console.debug("Running grid layout with options (%o)",options);var s=u.width();var r=u.height();a.console.debug("Running grid layout on container of size (w, h) = (%i, %i) with %i nodes",s,r,t.size());if(r==0||s==0){b.cytoscapeweb("warn","Running grid layout on container of size 0");t.positions(function(){return{x:0,y:0}})}else{var j=t.size();var o=Math.sqrt(j*r/s);var n=Math.round(o);
var p=Math.round(s/r*o);a.console.debug("Grid layout decided on initial (cols, rows) = (%i, %i)",p,n);function m(z){if(z==undefined){return Math.min(n,p)}else{var y=Math.min(n,p);if(y==n){n=z;a.console.debug("Grid layout set small number of rows to %i",n)}else{p=z;a.console.debug("Grid layout set small number of columns to %i",p)}}}function e(z){if(z==undefined){return Math.max(n,p)}else{var y=Math.max(n,p);if(y==n){n=z;a.console.debug("Grid layout set large number of rows to %i",n)}else{p=z;a.console.debug("Grid layout set large number of columns to %i",p)
}}}if(options.rows!=null&&options.columns!=null){n=options.rows;p=options.columns}else{if(options.rows!=null&&options.columns==null){n=options.rows;p=Math.ceil(j/n)}else{if(options.rows==null&&options.columns!=null){p=options.columns;n=Math.ceil(j/p)}else{if(p*n>j){var w=m();var q=e();a.console.debug("Grid layout is looking to make a reduction");if((w-1)*q>=j){m(w-1)}else{if((q-1)*w>=j){e(q-1)}}}else{a.console.debug("Grid layout is looking to make an increase");while(p*n<j){var w=m();var q=e();if((q+1)*w>=j){e(q+1)
}else{m(w+1)}}}}}}a.console.debug("Grid layout split area into cells (cols, rows) = (%i, %i)",p,n);var v=s/p;var f=r/n;var l=0;var k=0;t.positions(function(B,A){if(A.locked()){return false}var z=k*v+v/2;var C=l*f+f/2;k++;if(k>=p){k=0;l++}return{x:z,y:C}})}if(x.fit){h.reset()}h.one("layoutready",x.ready);h.trigger("layoutready");h.one("layoutstop",x.stop);h.trigger("layoutstop")};c.prototype.stop=function(){};b.cytoscapeweb("layout","grid",c)})(jQuery,jQuery.cytoscapeweb);(function(c,a){var d={fit:true};
function b(e){this.options=c.extend(true,{},d,e)}b.prototype.run=function(){var h=this.options;var k=h.cy;var g=k.nodes();var f=k.edges();var e=k.container();function j(l){if(h.positions==null){return null}if(h.positions[l._private.data.id]==null){return null}return h.positions[l._private.data.id]}g.positions(function(m,n){var l=j(n);if(n.locked()||l==null){return false}return l});if(h.pan!=null){k.pan(h.pan);k.zoom(h.zoom)}k.one("layoutready",h.ready);k.trigger("layoutready");if(h.fit){k.fit()}k.one("layoutstop",h.stop);
k.trigger("layoutstop")};c.cytoscapeweb("layout","preset",b);c.cytoscapeweb("core","presetLayout",function(){var g=this;var e={};var f={};g.nodes().each(function(h,j){f[j.data("id")]=j.position()});e.positions=f;e.name="preset";e.zoom=g.zoom();e.pan=g.pan();return e})})(jQuery,jQuery.cytoscapeweb);(jQuery.color||(function(a){a.color={isEqual:function(b,d){if(b.length!==d.length){return false}var c=b.length;while(c--){if(b[c]!==d[c]){return false}}return true},fix:function(b,d){var c=d.length;while(c--){if(typeof b[c]==="number"){switch(d.charAt(c)){case"i":b[c]=Math.round(b[c]);
break;case"o":b[c]=Math.min(255,Math.max(0,Math.round(b[c])));break;case"1":b[c]=Math.min(1,Math.max(0,b[c]));break}}}return b},self:function(b){return b},alpha:function(b){return b===undefined?1:b},palette:{},fns:[]}})(jQuery));(jQuery.color&&(function(a){a.color.RGB={fix:function(b){b=a.color.fix(b,"ooo1");return b},toRGB:a.color.self,toHEX:function(b){return"#"+(16777216+b[0]*65536+b[1]*256+b[2]).toString(16).slice(-6)},toCSS:function(b){if(a.color.alpha(b[3])===0){return"transparent"}if(a.color.alpha(b[3])<1){return"rgba("+b.join(",")+")"
}return"rgb("+Array.prototype.slice.call(b,0,3).join(",")+")"},red:function(b){return b[0]},green:function(b){return b[1]},blue:function(b){return b[2]},alpha:function(b){return a.color.alpha(b[3])}};a.color.RGB.toString=a.color.RGB.toHEX;a.color.fns.push("RGB.toRGB","RGB.toHEX","RGB.toCSS","RGB.red","RGB.green","RGB.blue","RGB.alpha")})(jQuery));(jQuery.color&&(function(a){a.color.HueBased={fix:function(b){b[0]=(b[0]+1)%1;return a.color.fix(b,"1111")},complementary:function(c,b){return[(c[0]+0.5+(b||0))%1,c[1],c[2],c[3]]
},analogous:function(c,b){return[(c[0]+1+(b||0))%1,c[1],c[2],c[3]]},hue:function(b){return b[0]},alpha:function(b){return a.color.alpha(b[3])}}})(jQuery));(jQuery.color&&(function(a){a.color.HSV=a.extend({toHSV:a.color.self,toRGB:function(d){var h=d[0]*6,e=Math.floor(h),g=h-e,m=d[1],k=d[2]*255,j=d[3],c=Math.round(k*(1-m)),b=Math.round(k*(1-g*m)),l=Math.round(k*(1-(1-g)*m));k=Math.round(k);switch(e%6){case 0:return[k,l,c,j];case 1:return[b,k,c,j];case 2:return[c,k,l,j];case 3:return[c,b,k,j];case 4:return[l,c,k,j];
case 5:return[k,c,b,j]}},saturationV:function(b){return b[1]},value:function(b){return b[2]}},a.color.HueBased);a.color.RGB.toHSV=function(f){var k=f[0]/255,j=f[1]/255,e=f[2]/255,h=Math.min(k,j,e),c=Math.max(k,j,e),l=c-h;return[l===0?0:(j===c?(e-k)/l/6+(1/3):e===c?(k-j)/l/6+(2/3):(j-e)/l/6+1)%1,l===0?0:l/c,c,f[3]]};a.color.fns.push("HSV.toHSV","HSV.toRGB","RGB.toHSV","HSV.complementary","HSV.analogous","HSV.hue","HSV.saturationV","HSV.value","HSV.alpha")})(jQuery));(jQuery.color&&(function(a){a.color.HSL=a.extend({toHSL:a.color.self,toRGB:function(d){var f=d[0],e=d[1],b=d[2],g=b<0.5?b*(1+e):b+e-(b*e),j=2*b-g;
function k(c){var h=c<0?c+1:c>1?c-1:c;return h<1/6?j+(g-j)*6*h:h<1/2?g:h<2/3?j+(g-j)*6*(2/3-h):j}return[Math.round(255*k(f+1/3)),Math.round(255*k(f)),Math.round(255*k(f-1/3)),d[3]]},saturationL:function(b){return b[1]},lightness:function(b){return b[2]}},a.color.HueBased);a.color.RGB.toHSL=function(f){var k=f[0]/255,j=f[1]/255,e=f[2]/255,h=Math.min(k,j,e),c=Math.max(k,j,e),m=c-h,l=c+h;return[m===0?0:(j===c?(e-k)/m/6+(1/3):e===c?(k-j)/m/6+(2/3):(j-e)/m/6+1)%1,m===0?0:l>1?m/(2-c-h):m/l,l/2,f[3]]};a.color.fns.push("HSL.toHSL","HSL.toRGB","RGB.toHSL","HSL.complementary","HSL.analogous","HSL.hue","HSL.saturationL","HSL.lightness","HSL.alpha")
})(jQuery));(jQuery.color&&jQuery.Color||(function(a){a.Color=function(f,j,g){if(typeof this==="function"){return new a.Color(f,j,g)}if(typeof f==="string"&&a.color.parse){if(!g){g=f}f=a.color.parse(f)}if(f&&f.length){var h;h=this.length=f.length;while(h--){this[h]=f[h]}}if(f){this.space=j||f.space||"RGB";this.name=g||f.name}};function c(f,l){var h=a.Color.isInstance(f)&&f.space!==this.space?this.to(f.space):new a.Color(this),k=h.length,j=false;while(k--){if(typeof f[k]==="number"){var g=l?h[k]+f[k]:f[k];
if(g!==h[k]){h[k]=g;j=true}}}return j?h.setName():this}a.Color.fn=a.Color.prototype={color:"0.6",util:function(){return a.color[this.space]},to:function(f){return this["to"+f]()},fix:function(){return this.util().fix(this)},modify:function(f){return c.call(this,f)},adjust:function(f){return c.call(this,f,true)},setName:function(f){this.name=f;return this},toString:function(){if(!this.space){return""}var f=this.util();return f.hasOwnProperty("toString")?f.toString(this):this.to("RGB").toString()},join:[].join,push:[].push};
a.Color.isInstance=function(f){return f&&typeof f==="object"&&f.color===a.Color.fn.color&&f.space};a.Color.fnspace={};function e(g,h,j,k,f){return function(){var m=[g];Array.prototype.push.apply(m,arguments);var l=j.apply(h,m);return a.isArray(l)?new a.Color(l,k,f?g.name:undefined):l}}function d(g,h){var f=/^to/.test(h)?h.substring(2):false;return function(){var l=this,k=l.util();if(!k[h]){l=l.to(a.Color.fnspace[h]);k=l.util()}var m=e(l,k,k[h],f||l.space,!!f),j=m.apply(l,arguments);if(f){this[h]=function(){return j
};if(a.Color.isInstance(j)){l=this;j["to"+this.space]=function(){return l}}}else{this[h]=m}return j}}function b(){var g=this.split("."),f=g[1],h=g[0];if(!a.Color.fnspace[f]&&f!=="to"+h){a.Color.fnspace[f]=h}if(!a.Color.fn[f]){a.Color.fn[f]=d(this,f)}}a.each(a.color.fns,b);a.color.fns.push=function(){a.each(arguments,b);return Array.prototype.push.apply(this,arguments)}})(jQuery));(jQuery.color&&(function(a){a.extend(a.color,{parse:function(c){var b;if(typeof c==="string"){if((b=/^\s*rgb(a)?\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*(?:,\s*([0-9]+(?:\.[0-9]+)?)\s*)?\)\s*$/.exec(c))&&!b[1]===!b[5]){return[parseInt(b[2],10),parseInt(b[3],10),parseInt(b[4],10),b[5]?parseFloat(b[5]):1]
}if((b=/^\s*rgb(a)?\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*(?:,\s*([0-9]+(?:\.[0-9]+)?)\s*)?\)\s*$/.exec(c))&&!b[1]===!b[5]){return[parseFloat(b[2])*255/100,parseFloat(b[3])*255/100,parseFloat(b[4])*255/100,b[5]?parseFloat(b[5]):1]}if((b=/^\s*#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})\s*$/.exec(c))){return[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16),1]}if((b=/^\s*#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])\s*$/.exec(c))){return[parseInt(b[1]+b[1],16),parseInt(b[2]+b[2],16),parseInt(b[3]+b[3],16),1]
}if((b=/^\s*hsl(a)?\(\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*(?:,\s*([0-9]+(?:\.[0-9]+)?)\s*)?\)\s*$/.exec(c))&&!b[1]===!b[5]){return[parseInt(b[2],10)/360,parseFloat(b[3])/100,parseFloat(b[4])/100,b[5]?parseFloat(b[5]):1]}return a.color.named(c)}if(c&&(c.length===3||c.length===4)){if(c.length===3){c.push(1)}return c}},named:function(c){var b;c=a.trim(c.toLowerCase());if(c==="transparent"){return[0,0,0,0]}a.each(a.color.palette,function(e,d){if(d[c]){b=d[c];return false
}});return b}})})(jQuery));(jQuery.Color&&(function(a){a.Color.fn.related=function(d){var b=a.Color.fn.related.i18n,c=d||a.Color.fn.related.offset,e=Math.round(c*360)+b.deg;return{"anal-":this.analogous(-c).setName(b.anal+" -"+e),anal0:this.analogous().setName(b.orig),"anal+":this.analogous(c).setName(b.anal+" +"+e),"comp-":this.complementary(-c).setName(b.split+" -"+e),comp0:this.complementary().setName(b.comp),"comp+":this.complementary(c).setName(b.split+" +"+e),"triad-":this.analogous(-1/3).setName(b.triad+" -120"+b.deg),triad0:this.analogous().setName(b.orig),"triad+":this.analogous(1/3).setName(b.triad+" +120"+b.deg)}
};a.Color.fn.related.offset=30/360;a.Color.fn.related.i18n={deg:"°",anal:"Analogous",orig:"Original",split:"Split Complementary",comp:"Complementary",triad:"Triadic"}})(jQuery));(jQuery.color&&(function(a){a.color.palette.css3={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}
})(jQuery));(function(a){a.fn.cssColor=function(b){return a.Color(this.css(b))};a.Color.fn.applyCSS=function(b,c){a(b).css(c,this.toCSS());return this}})(jQuery);(function(e){function d(){this._settings=[];this._extensions=[];this.regional=[];this.regional[""]={errorLoadingText:"Error loading",notSupportedText:"This browser does not support SVG"};this.local=this.regional[""];this._uuid=new Date().getTime();this._renesis=c("RenesisX.RenesisCtrl")}function c(j){try{return !!(window.ActiveXObject&&new ActiveXObject(j))
}catch(k){return false}}var g="svgwrapper";e.extend(d.prototype,{markerClassName:"hasSVG",svgNS:"http://www.w3.org/2000/svg",xlinkNS:"http://www.w3.org/1999/xlink",_wrapperClass:b,_attrNames:{class_:"class",in_:"in",alignmentBaseline:"alignment-baseline",baselineShift:"baseline-shift",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorRendering:"color-rendering",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",underlinePosition:"underline-position",underlineThickness:"underline-thickness",vertAdvY:"vert-adv-y",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode"},_attachSVG:function(j,l){var k=(j.namespaceURI==this.svgNS?j:null);
var j=(k?null:j);if(e(j||k).hasClass(this.markerClassName)){return}if(typeof l=="string"){l={loadURL:l}}else{if(typeof l=="function"){l={onLoad:l}}}e(j||k).addClass(this.markerClassName);try{if(!k){k=document.createElementNS(this.svgNS,"svg");k.setAttribute("version","1.1");if(j.clientWidth>0){k.setAttribute("width",j.clientWidth)}if(j.clientHeight>0){k.setAttribute("height",j.clientHeight)}j.appendChild(k)}this._afterLoad(j,k,l||{})}catch(m){if(e.browser.msie){if(!j.id){j.id="svg"+(this._uuid++)
}this._settings[j.id]=l;j.innerHTML='<embed type="image/svg+xml" width="100%" height="100%" src="'+(l.initPath||"")+'blank.svg" pluginspage="http://www.adobe.com/svg/viewer/install/main.html"/>'}else{j.innerHTML='<p class="svg_error">'+this.local.notSupportedText+"</p>"}}},_registerSVG:function(){for(var l=0;l<document.embeds.length;l++){var j=document.embeds[l].parentNode;if(!e(j).hasClass(e.svg.markerClassName)||e.data(j,g)){continue}var k=null;try{k=document.embeds[l].getSVGDocument()}catch(m){setTimeout(e.svg._registerSVG,250);
return}k=(k?k.documentElement:null);if(k){e.svg._afterLoad(j,k)}}},_afterLoad:function(j,k,l){var l=l||this._settings[j.id];this._settings[j?j.id:""]=null;var n=new this._wrapperClass(k,j);e.data(j||k,g,n);try{if(l.loadURL){n.load(l.loadURL,l)}if(l.settings){n.configure(l.settings)}if(l.onLoad&&!l.loadURL){l.onLoad.apply(j||k,[n])}}catch(m){alert(m)}},_getSVG:function(j){j=(typeof j=="string"?e(j)[0]:(j.jquery?j[0]:j));return e.data(j,g)},_destroySVG:function(j){var k=e(j);if(!k.hasClass(this.markerClassName)){return
}k.removeClass(this.markerClassName);if(j.namespaceURI!=this.svgNS){k.empty()}e.removeData(j,g)},addExtension:function(k,j){this._extensions.push([k,j])},isSVGElem:function(j){return(j.nodeType==1&&j.namespaceURI==e.svg.svgNS)}});function b(k,j){this._svg=k;this._container=j;for(var l=0;l<e.svg._extensions.length;l++){var m=e.svg._extensions[l];this[m[0]]=new m[1](this)}}e.extend(b.prototype,{_width:function(){return(this._container?this._container.clientWidth:this._svg.width)},_height:function(){return(this._container?this._container.clientHeight:this._svg.height)
},root:function(){return this._svg},configure:function(o,n,k){if(!o.nodeName){k=n;n=o;o=this._svg}if(k){for(var m=o.attributes.length-1;m>=0;m--){var j=o.attributes.item(m);if(!(j.nodeName=="onload"||j.nodeName=="version"||j.nodeName.substring(0,5)=="xmlns")){o.attributes.removeNamedItem(j.nodeName)}}}for(var l in n){o.setAttribute(e.svg._attrNames[l]||l,n[l])}return this},getElementById:function(j){return this._svg.ownerDocument.getElementById(j)},change:function(k,l){if(k){for(var j in l){if(l[j]==null){k.removeAttribute(e.svg._attrNames[j]||j)
}else{k.setAttribute(e.svg._attrNames[j]||j,l[j])}}}return this},_args:function(k,n,j){n.splice(0,0,"parent");n.splice(n.length,0,"settings");var l={};var o=0;if(k[0]!=null&&k[0].jquery){k[0]=k[0][0]}if(k[0]!=null&&!(typeof k[0]=="object"&&k[0].nodeName)){l.parent=null;o=1}for(var m=0;m<k.length;m++){l[n[m+o]]=k[m]}if(j){e.each(j,function(p,q){if(typeof l[q]=="object"){l.settings=l[q];l[q]=null}})}return l},title:function(l,n,k){var j=this._args(arguments,["text"]);var m=this._makeNode(j.parent,"title",j.settings||{});
m.appendChild(this._svg.ownerDocument.createTextNode(j.text));return m},describe:function(l,n,k){var j=this._args(arguments,["text"]);var m=this._makeNode(j.parent,"desc",j.settings||{});m.appendChild(this._svg.ownerDocument.createTextNode(j.text));return m},defs:function(l,m,k){var j=this._args(arguments,["id"],["id"]);return this._makeNode(j.parent,"defs",e.extend((j.id?{id:j.id}:{}),j.settings||{}))},symbol:function(p,q,l,o,n,j,m){var k=this._args(arguments,["id","x1","y1","width","height"]);return this._makeNode(k.parent,"symbol",e.extend({id:k.id,viewBox:k.x1+" "+k.y1+" "+k.width+" "+k.height},k.settings||{}))
},marker:function(p,j,r,q,m,k,n,l){var o=this._args(arguments,["id","refX","refY","mWidth","mHeight","orient"],["orient"]);return this._makeNode(o.parent,"marker",e.extend({id:o.id,refX:o.refX,refY:o.refY,markerWidth:o.mWidth,markerHeight:o.mHeight,orient:o.orient||"auto"},o.settings||{}))},style:function(l,n,k){var j=this._args(arguments,["styles"]);var m=this._makeNode(j.parent,"style",e.extend({type:"text/css"},j.settings||{}));m.appendChild(this._svg.ownerDocument.createTextNode(j.styles));if(e.browser.opera){e("head").append('<style type="text/css">'+j.styles+"</style>")
}return m},script:function(n,j,m,l){var k=this._args(arguments,["script","type"],["type"]);var o=this._makeNode(k.parent,"script",e.extend({type:k.type||"text/javascript"},k.settings||{}));o.appendChild(this._svg.ownerDocument.createTextNode(k.script));if(!e.browser.mozilla){e.globalEval(k.script)}return o},linearGradient:function(r,k,s,l,q,j,p,m){var o=this._args(arguments,["id","stops","x1","y1","x2","y2"],["x1"]);var n=e.extend({id:o.id},(o.x1!=null?{x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2}:{}));return this._gradient(o.parent,"linearGradient",e.extend(n,o.settings||{}),o.stops)
},radialGradient:function(t,k,u,p,n,j,o,l,m){var s=this._args(arguments,["id","stops","cx","cy","r","fx","fy"],["cx"]);var q=e.extend({id:s.id},(s.cx!=null?{cx:s.cx,cy:s.cy,r:s.r,fx:s.fx,fy:s.fy}:{}));return this._gradient(s.parent,"radialGradient",e.extend(q,s.settings||{}),s.stops)},_gradient:function(n,j,m,p){var o=this._makeNode(n,j,m);for(var l=0;l<p.length;l++){var k=p[l];this._makeNode(o,"stop",e.extend({offset:k[0],stopColor:k[1]},(k[2]!=null?{stopOpacity:k[2]}:{})))}return o},pattern:function(t,j,s,q,k,u,r,p,m,v,l){var o=this._args(arguments,["id","x","y","width","height","vx","vy","vwidth","vheight"],["vx"]);
var n=e.extend({id:o.id,x:o.x,y:o.y,width:o.width,height:o.height},(o.vx!=null?{viewBox:o.vx+" "+o.vy+" "+o.vwidth+" "+o.vheight}:{}));return this._makeNode(o.parent,"pattern",e.extend(n,o.settings||{}))},clipPath:function(m,n,j,l){var k=this._args(arguments,["id","units"]);k.units=k.units||"userSpaceOnUse";return this._makeNode(k.parent,"clipPath",e.extend({id:k.id,clipPathUnits:k.units},k.settings||{}))},mask:function(o,q,k,p,n,j,m){var l=this._args(arguments,["id","x","y","width","height"]);return this._makeNode(l.parent,"mask",e.extend({id:l.id,x:l.x,y:l.y,width:l.width,height:l.height},l.settings||{}))
},createPath:function(){return new f()},createText:function(){return new h()},svg:function(s,r,p,j,t,q,o,l,u,k){var n=this._args(arguments,["x","y","width","height","vx","vy","vwidth","vheight"],["vx"]);var m=e.extend({x:n.x,y:n.y,width:n.width,height:n.height},(n.vx!=null?{viewBox:n.vx+" "+n.vy+" "+n.vwidth+" "+n.vheight}:{}));return this._makeNode(n.parent,"svg",e.extend(m,n.settings||{}))},group:function(l,m,k){var j=this._args(arguments,["id"],["id"]);return this._makeNode(j.parent,"g",e.extend({id:j.id},j.settings||{}))
},use:function(q,p,o,j,r,k,m){var n=this._args(arguments,["x","y","width","height","ref"]);if(typeof n.x=="string"){n.ref=n.x;n.settings=n.y;n.x=n.y=n.width=n.height=null}var l=this._makeNode(n.parent,"use",e.extend({x:n.x,y:n.y,width:n.width,height:n.height},n.settings||{}));l.setAttributeNS(e.svg.xlinkNS,"href",n.ref);return l},link:function(l,n,k){var j=this._args(arguments,["ref"]);var m=this._makeNode(j.parent,"a",j.settings);m.setAttributeNS(e.svg.xlinkNS,"href",j.ref);return m},image:function(q,p,o,j,r,k,m){var n=this._args(arguments,["x","y","width","height","ref"]);
var l=this._makeNode(n.parent,"image",e.extend({x:n.x,y:n.y,width:n.width,height:n.height},n.settings||{}));l.setAttributeNS(e.svg.xlinkNS,"href",n.ref);return l},path:function(l,m,k){var j=this._args(arguments,["path"]);return this._makeNode(j.parent,"path",e.extend({d:(j.path.path?j.path.path():j.path)},j.settings||{}))},rect:function(q,p,o,l,r,k,j,m){var n=this._args(arguments,["x","y","width","height","rx","ry"],["rx"]);return this._makeNode(n.parent,"rect",e.extend({x:n.x,y:n.y,width:n.width,height:n.height},(n.rx?{rx:n.rx,ry:n.ry}:{}),n.settings||{}))
},circle:function(m,j,o,n,l){var k=this._args(arguments,["cx","cy","r"]);return this._makeNode(k.parent,"circle",e.extend({cx:k.cx,cy:k.cy,r:k.r},k.settings||{}))},ellipse:function(m,j,p,o,n,l){var k=this._args(arguments,["cx","cy","rx","ry"]);return this._makeNode(k.parent,"ellipse",e.extend({cx:k.cx,cy:k.cy,rx:k.rx,ry:k.ry},k.settings||{}))},line:function(p,l,o,j,m,n){var k=this._args(arguments,["x1","y1","x2","y2"]);return this._makeNode(k.parent,"line",e.extend({x1:k.x1,y1:k.y1,x2:k.x2,y2:k.y2},k.settings||{}))
},polyline:function(m,l,k){var j=this._args(arguments,["points"]);return this._poly(j.parent,"polyline",j.points,j.settings)},polygon:function(m,l,k){var j=this._args(arguments,["points"]);return this._poly(j.parent,"polygon",j.points,j.settings)},_poly:function(n,j,m,l){var o="";for(var k=0;k<m.length;k++){o+=m[k].join()+" "}return this._makeNode(n,j,e.extend({points:e.trim(o)},l||{}))},text:function(m,j,o,n,l){var k=this._args(arguments,["x","y","value"]);if(typeof k.x=="string"&&arguments.length<4){k.value=k.x;
k.settings=k.y;k.x=k.y=null}return this._text(k.parent,"text",k.value,e.extend({x:(k.x&&a(k.x)?k.x.join(" "):k.x),y:(k.y&&a(k.y)?k.y.join(" "):k.y)},k.settings||{}))},textpath:function(l,o,n,k){var j=this._args(arguments,["path","value"]);var m=this._text(j.parent,"textPath",j.value,j.settings||{});m.setAttributeNS(e.svg.xlinkNS,"href",j.path);return m},_text:function(r,j,q,n){var m=this._makeNode(r,j,n);if(typeof q=="string"){m.appendChild(m.ownerDocument.createTextNode(q))}else{for(var o=0;o<q._parts.length;
o++){var l=q._parts[o];if(l[0]=="tspan"){var k=this._makeNode(m,l[0],l[2]);k.appendChild(m.ownerDocument.createTextNode(l[1]));m.appendChild(k)}else{if(l[0]=="tref"){var k=this._makeNode(m,l[0],l[2]);k.setAttributeNS(e.svg.xlinkNS,"href",l[1]);m.appendChild(k)}else{if(l[0]=="textpath"){var p=e.extend({},l[2]);p.href=null;var k=this._makeNode(m,l[0],p);k.setAttributeNS(e.svg.xlinkNS,"href",l[2].href);k.appendChild(m.ownerDocument.createTextNode(l[1]));m.appendChild(k)}else{m.appendChild(m.ownerDocument.createTextNode(l[1]))
}}}}}return m},other:function(m,k,l){var j=this._args(arguments,["name"]);return this._makeNode(j.parent,j.name,j.settings||{})},_makeNode:function(l,j,k){l=l||this._svg;var m=this._svg.ownerDocument.createElementNS(e.svg.svgNS,j);for(var j in k){var n=k[j];if(n!=null&&n!=null&&(typeof n!="string"||n!="")){m.setAttribute(e.svg._attrNames[j]||j,n)}}l.appendChild(m);return m},add:function(l,m){var k=this._args((arguments.length==1?[null,l]:arguments),["node"]);var j=this;k.parent=k.parent||this._svg;
k.node=(k.node.jquery?k.node:e(k.node));try{if(e.svg._renesis){throw"Force traversal"}k.parent.appendChild(k.node.cloneNode(true))}catch(n){k.node.each(function(){var o=j._cloneAsSVG(this);if(o){k.parent.appendChild(o)}})}return this},clone:function(m,n){var j=this;var l=this._args((arguments.length==1?[null,m]:arguments),["node"]);l.parent=l.parent||this._svg;l.node=(l.node.jquery?l.node:e(l.node));var k=[];l.node.each(function(){var o=j._cloneAsSVG(this);if(o){o.id="";l.parent.appendChild(o);k.push(o)
}});return k},_cloneAsSVG:function(m){var l=null;if(m.nodeType==1){l=this._svg.ownerDocument.createElementNS(e.svg.svgNS,this._checkName(m.nodeName));for(var k=0;k<m.attributes.length;k++){var j=m.attributes.item(k);if(j.nodeName!="xmlns"&&j.nodeValue){if(j.prefix=="xlink"){l.setAttributeNS(e.svg.xlinkNS,j.localName||j.baseName,j.nodeValue)}else{l.setAttribute(this._checkName(j.nodeName),j.nodeValue)}}}for(var k=0;k<m.childNodes.length;k++){var o=this._cloneAsSVG(m.childNodes[k]);if(o){l.appendChild(o)
}}}else{if(m.nodeType==3){if(e.trim(m.nodeValue)){l=this._svg.ownerDocument.createTextNode(m.nodeValue)}}else{if(m.nodeType==4){if(e.trim(m.nodeValue)){try{l=this._svg.ownerDocument.createCDATASection(m.nodeValue)}catch(n){l=this._svg.ownerDocument.createTextNode(m.nodeValue.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"))}}}}}return l},_checkName:function(j){j=(j.substring(0,1)>="A"&&j.substring(0,1)<="Z"?j.toLowerCase():j);return(j.substring(0,4)=="svg:"?j.substring(4):j)},load:function(j,m){m=(typeof m=="boolean"?{addTo:m}:(typeof m=="function"?{onLoad:m}:(typeof m=="string"?{parent:m}:(typeof m=="object"&&m.nodeName?{parent:m}:(typeof m=="object"&&m.jquery?{parent:m}:m||{})))));
if(!m.parent&&!m.addTo){this.clear(false)}var k=[this._svg.getAttribute("width"),this._svg.getAttribute("height")];var p=this;var o=function(q){q=e.svg.local.errorLoadingText+": "+q;if(m.onLoad){m.onLoad.apply(p._container||p._svg,[p,q])}else{p.text(null,10,20,q)}};var n=function(r){var q=new ActiveXObject("Microsoft.XMLDOM");q.validateOnParse=false;q.resolveExternals=false;q.async=false;q.loadXML(r);if(q.parseError.errorCode!=0){o(q.parseError.reason);return null}return q};var l=function(s){if(!s){return
}if(s.documentElement.nodeName!="svg"){var w=s.getElementsByTagName("parsererror");var r=(w.length?w[0].getElementsByTagName("div"):[]);o(!w.length?"???":(r.length?r[0]:w[0]).firstChild.nodeValue);return}var x=(m.parent?e(m.parent)[0]:p._svg);var y={};for(var t=0;t<s.documentElement.attributes.length;t++){var v=s.documentElement.attributes.item(t);if(!(v.nodeName=="version"||v.nodeName.substring(0,5)=="xmlns")){y[v.nodeName]=v.nodeValue}}p.configure(x,y,!m.parent);var q=s.documentElement.childNodes;
for(var t=0;t<q.length;t++){try{if(e.svg._renesis){throw"Force traversal"}x.appendChild(p._svg.ownerDocument.importNode(q[t],true));if(q[t].nodeName=="script"){e.globalEval(q[t].textContent)}}catch(u){p.add(x,q[t])}}if(!m.changeSize){p.configure(x,{width:k[0],height:k[1]})}if(m.onLoad){m.onLoad.apply(p._container||p._svg,[p])}};if(j.match("<svg")){l(e.browser.msie?n(j):new DOMParser().parseFromString(j,"text/xml"))}else{e.ajax({url:j,dataType:(e.browser.msie?"text":"xml"),success:function(q){l(e.browser.msie?n(q):q)
},error:function(r,s,q){o(s+(q?" "+q.message:""))}})}return this},remove:function(j){j=(j.jquery?j[0]:j);j.parentNode.removeChild(j);return this},clear:function(j){if(j){this.configure({},true)}while(this._svg.firstChild){this._svg.removeChild(this._svg.firstChild)}return this},toSVG:function(j){j=j||this._svg;return(typeof XMLSerializer=="undefined"?this._toSVG(j):new XMLSerializer().serializeToString(j))},_toSVG:function(m){var l="";if(!m){return l}if(m.nodeType==3){l=m.nodeValue}else{if(m.nodeType==4){l="<![CDATA["+m.nodeValue+"]]>"
}else{l="<"+m.nodeName;if(m.attributes){for(var k=0;k<m.attributes.length;k++){var j=m.attributes.item(k);if(!(e.trim(j.nodeValue)==""||j.nodeValue.match(/^\[object/)||j.nodeValue.match(/^function/))){l+=" "+(j.namespaceURI==e.svg.xlinkNS?"xlink:":"")+j.nodeName+'="'+j.nodeValue+'"'}}}if(m.firstChild){l+=">";var n=m.firstChild;while(n){l+=this._toSVG(n);n=n.nextSibling}l+="</"+m.nodeName+">"}else{l+="/>"}}}return l}});function f(){this._path=""}e.extend(f.prototype,{reset:function(){this._path="";
return this},move:function(j,l,k){k=(a(j)?l:k);return this._coords((k?"m":"M"),j,l)},line:function(j,l,k){k=(a(j)?l:k);return this._coords((k?"l":"L"),j,l)},horiz:function(j,k){this._path+=(k?"h":"H")+(a(j)?j.join(" "):j);return this},vert:function(k,j){this._path+=(j?"v":"V")+(a(k)?k.join(" "):k);return this},curveC:function(l,n,k,m,j,p,o){o=(a(l)?n:o);return this._coords((o?"c":"C"),l,n,k,m,j,p)},smoothC:function(k,l,j,n,m){m=(a(k)?l:m);return this._coords((m?"s":"S"),k,l,j,n)},curveQ:function(k,l,j,n,m){m=(a(k)?l:m);
return this._coords((m?"q":"Q"),k,l,j,n)},smoothQ:function(j,l,k){k=(a(j)?l:k);return this._coords((k?"t":"T"),j,l)},_coords:function(m,l,r,k,q,j,p){if(a(l)){for(var n=0;n<l.length;n++){var o=l[n];this._path+=(n==0?m:" ")+o[0]+","+o[1]+(o.length<4?"":" "+o[2]+","+o[3]+(o.length<6?"":" "+o[4]+","+o[5]))}}else{this._path+=m+l+","+r+(k==null?"":" "+k+","+q+(j==null?"":" "+j+","+p))}return this},arc:function(m,j,p,s,l,r,q,k){k=(a(m)?j:k);this._path+=(k?"a":"A");if(a(m)){for(var n=0;n<m.length;n++){var o=m[n];
this._path+=(n==0?"":" ")+o[0]+","+o[1]+" "+o[2]+" "+(o[3]?"1":"0")+","+(o[4]?"1":"0")+" "+o[5]+","+o[6]}}else{this._path+=m+","+j+" "+p+" "+(s?"1":"0")+","+(l?"1":"0")+" "+r+","+q}return this},close:function(){this._path+="z";return this},path:function(){return this._path}});f.prototype.moveTo=f.prototype.move;f.prototype.lineTo=f.prototype.line;f.prototype.horizTo=f.prototype.horiz;f.prototype.vertTo=f.prototype.vert;f.prototype.curveCTo=f.prototype.curveC;f.prototype.smoothCTo=f.prototype.smoothC;
f.prototype.curveQTo=f.prototype.curveQ;f.prototype.smoothQTo=f.prototype.smoothQ;f.prototype.arcTo=f.prototype.arc;function h(){this._parts=[]}e.extend(h.prototype,{reset:function(){this._parts=[];return this},string:function(j){this._parts[this._parts.length]=["text",j];return this},span:function(k,j){this._parts[this._parts.length]=["tspan",k,j];return this},ref:function(k,j){this._parts[this._parts.length]=["tref",k,j];return this},path:function(l,k,j){this._parts[this._parts.length]=["textpath",k,e.extend({href:l},j||{})];
return this}});e.fn.svg=function(k){var j=Array.prototype.slice.call(arguments,1);if(typeof k=="string"&&k=="get"){return e.svg["_"+k+"SVG"].apply(e.svg,[this[0]].concat(j))}return this.each(function(){if(typeof k=="string"){e.svg["_"+k+"SVG"].apply(e.svg,[this].concat(j))}else{e.svg._attachSVG(this,k||{})}})};function a(j){return(j&&j.constructor==Array)}e.svg=new d()})(jQuery);Array.prototype.foreach=function(b){for(var a=0;a<this.length;a++){b(this[a])}};Array.prototype.map=function(c){var a=new Array();
for(var b=0;b<this.length;b++){a.push(c(this[b]))}return a};Array.prototype.min=function(){var b=this[0];for(var a=0;a<this.length;a++){if(this[a]<b){b=this[a]}}return b};Array.prototype.max=function(){var a=this[0];for(var b=0;b<this.length;b++){if(this[b]>a){a=this[b]}}return a};AntiZoomAndPan.VERSION="1.2";function AntiZoomAndPan(){this.init()}AntiZoomAndPan.prototype.init=function(){var a=svgDocument.documentElement;this.svgNodes=new Array();this.x_trans=0;this.y_trans=0;this.scale=1;this.lastTM=a.createSVGMatrix();
a.addEventListener("SVGZoom",this,false);a.addEventListener("SVGScroll",this,false);a.addEventListener("SVGResize",this,false)};AntiZoomAndPan.prototype.appendNode=function(a){this.svgNodes.push(a)};AntiZoomAndPan.prototype.removeNode=function(b){for(var a=0;a<this.svgNodes.length;a++){if(this.svgNodes[a]===b){this.svgNodes.splice(a,1);break}}};AntiZoomAndPan.prototype.handleEvent=function(b){var a=b.type;if(this[a]==null){throw new Error("Unsupported event type: "+a)}this[a](b)};AntiZoomAndPan.prototype.SVGZoom=function(a){this.update()
};AntiZoomAndPan.prototype.SVGScroll=function(a){this.update()};AntiZoomAndPan.prototype.SVGResize=function(a){this.update()};AntiZoomAndPan.prototype.update=function(){if(this.svgNodes.length>0){var a=svgDocument.documentElement;var c=(window.ViewBox!=null)?new ViewBox(a):null;var b=(c!=null)?c.getTM():a.createSVGMatrix();var f=a.currentTranslate;b=b.scale(1/a.currentScale);b=b.translate(-f.x,-f.y);for(var e=0;e<this.svgNodes.length;e++){var g=this.svgNodes[e];var h=b.multiply(this.lastTM.multiply(g.getCTM()));
var d="matrix("+[h.a,h.b,h.c,h.d,h.e,h.f].join(",")+")";this.svgNodes[e].setAttributeNS(null,"transform",d)}this.lastTM=b.inverse()}};EventHandler.VERSION=1;function EventHandler(){this.init()}EventHandler.prototype.init=function(){};EventHandler.prototype.handleEvent=function(a){if(this[a.type]==null){throw new Error("Unsupported event type: "+a.type)}this[a.type](a)};var svgns="http://www.w3.org/2000/svg";Mouser.prototype=new EventHandler();Mouser.prototype.constructor=Mouser;Mouser.superclass=EventHandler.prototype;
function Mouser(){this.init()}Mouser.prototype.init=function(){this.svgNode=null;this.handles=new Array();this.shapes=new Array();this.lastPoint=null;this.currentNode=null;this.realize()};Mouser.prototype.realize=function(){if(this.svgNode==null){var a=svgDocument.createElementNS(svgns,"rect");this.svgNode=a;a.setAttributeNS(null,"x","-32767");a.setAttributeNS(null,"y","-32767");a.setAttributeNS(null,"width","65535");a.setAttributeNS(null,"height","65535");a.setAttributeNS(null,"fill","none");a.setAttributeNS(null,"pointer-events","all");
a.setAttributeNS(null,"display","none");svgDocument.documentElement.appendChild(a)}};Mouser.prototype.register=function(b){if(this.handleIndex(b)==-1){var a=b.owner;b.select(true);this.handles.push(b);if(a!=null&&this.shapeIndex(a)==-1){this.shapes.push(a)}}};Mouser.prototype.unregister=function(b){var a=this.handleIndex(b);if(a!=-1){b.select(false);this.handles.splice(a,1)}};Mouser.prototype.registerShape=function(a){if(this.shapeIndex(a)==-1){a.select(true);this.shapes.push(a)}};Mouser.prototype.unregisterShape=function(a){var b=this.shapeIndex(a);
if(b!=-1){a.select(false);a.selectHandles(false);a.showHandles(false);a.unregisterHandles();this.shapes.splice(b,1)}};Mouser.prototype.unregisterAll=function(){for(var a=0;a<this.handles.length;a++){this.handles[a].select(false)}this.handles=new Array()};Mouser.prototype.unregisterShapes=function(){for(var b=0;b<this.shapes.length;b++){var a=this.shapes[b];a.select(false);a.selectHandles(false);a.showHandles(false);a.unregisterHandles()}this.shapes=new Array()};Mouser.prototype.handleIndex=function(c){var a=-1;
for(var b=0;b<this.handles.length;b++){if(this.handles[b]===c){a=b;break}}return a};Mouser.prototype.shapeIndex=function(b){var a=-1;for(var c=0;c<this.shapes.length;c++){if(this.shapes[c]===b){a=c;break}}return a};Mouser.prototype.beginDrag=function(b){this.currentNode=b.target;var a=this.getUserCoordinate(this.currentNode,b.clientX,b.clientY);this.lastPoint=new Point2D(a.x,a.y);this.svgNode.addEventListener("mouseup",this,false);this.svgNode.addEventListener("mousemove",this,false);svgDocument.documentElement.appendChild(this.svgNode);
this.svgNode.setAttributeNS(null,"display","inline")};Mouser.prototype.mouseup=function(a){this.lastPoint=null;this.currentNode=null;this.svgNode.removeEventListener("mouseup",this,false);this.svgNode.removeEventListener("mousemove",this,false);this.svgNode.setAttributeNS(null,"display","none")};Mouser.prototype.mousemove=function(g){var d=this.getUserCoordinate(this.currentNode,g.clientX,g.clientY);var b=new Point2D(d.x,d.y);var j=b.subtract(this.lastPoint);var h=new Array();var k=new Date().getTime();
this.lastPoint.setFromPoint(b);for(var c=0;c<this.handles.length;c++){var f=this.handles[c];var a=f.owner;f.translate(j);if(a!=null){if(a.lastUpdate!=k){a.lastUpdate=k;h.push(a)}}else{h.push(f)}}for(var c=0;c<h.length;c++){h[c].update()}};Mouser.prototype.getUserCoordinate=function(a,e,d){var g=svgDocument.documentElement;var f=g.getCurrentTranslate();var h=g.getCurrentScale();var j=this.getTransformToElement(a);var c=j.inverse();var b=svgDocument.documentElement.createSVGPoint();b.x=(e-f.x)/h;b.y=(d-f.y)/h;
return b.matrixTransform(c)};Mouser.prototype.getTransformToElement=function(a){var b=a.getCTM();while((a=a.parentNode)!=svgDocument){b=a.getCTM().multiply(b)}return b};ViewBox.VERSION="1.0";function ViewBox(a){if(arguments.length>0){this.init(a)}}ViewBox.prototype.init=function(a){var d=a.getAttributeNS(null,"viewBox");var c=a.getAttributeNS(null,"preserveAspectRatio");if(d!=""){var b=d.split(/\s*,\s*|\s+/);this.x=parseFloat(b[0]);this.y=parseFloat(b[1]);this.width=parseFloat(b[2]);this.height=parseFloat(b[3])
}else{this.x=0;this.y=0;this.width=innerWidth;this.height=innerHeight}this.setPAR(c)};ViewBox.prototype.getTM=function(){var k=svgDocument.documentElement;var h=svgDocument.documentElement.createSVGMatrix();var c=k.getAttributeNS(null,"width");var a=k.getAttributeNS(null,"height");c=(c!="")?parseFloat(c):innerWidth;a=(a!="")?parseFloat(a):innerHeight;var g=this.width/c;var e=this.height/a;h=h.translate(this.x,this.y);if(this.alignX=="none"){h=h.scaleNonUniform(g,e)}else{if(g<e&&this.meetOrSlice=="meet"||g>e&&this.meetOrSlice=="slice"){var b=0;
var d=c*e-this.width;if(this.alignX=="Mid"){b=-d/2}else{if(this.alignX=="Max"){b=-d}}h=h.translate(b,0);h=h.scale(e)}else{if(g>e&&this.meetOrSlice=="meet"||g<e&&this.meetOrSlice=="slice"){var j=0;var f=a*g-this.height;if(this.alignY=="Mid"){j=-f/2}else{if(this.alignY=="Max"){j=-f}}h=h.translate(0,j);h=h.scale(g)}else{h=h.scale(g)}}}return h};ViewBox.prototype.setPAR=function(a){if(a){var b=a.split(/\s+/);var c=b[0];if(c=="none"){this.alignX="none";this.alignY="none"}else{this.alignX=c.substring(1,4);
this.alignY=c.substring(5,9)}if(b.length==2){this.meetOrSlice=b[1]}else{this.meetOrSlice="meet"}}else{this.align="xMidYMid";this.alignX="Mid";this.alignY="Mid";this.meetOrSlice="meet"}};function Intersection(a){if(arguments.length>0){this.init(a)}}Intersection.prototype.init=function(a){this.status=a;this.points=new Array()};Intersection.prototype.appendPoint=function(a){this.points.push(a)};Intersection.prototype.appendPoints=function(a){this.points=this.points.concat(a)};Intersection.intersectShapes=function(c,b){var e=c.getIntersectionParams();
var d=b.getIntersectionParams();var a;if(e!=null&&d!=null){if(e.name=="Path"){a=Intersection.intersectPathShape(c,b)}else{if(d.name=="Path"){a=Intersection.intersectPathShape(b,c)}else{var g;var f;if(e.name<d.name){g="intersect"+e.name+d.name;f=e.params.concat(d.params)}else{g="intersect"+d.name+e.name;f=d.params.concat(e.params)}if(!(g in Intersection)){throw new Error("Intersection not available: "+g)}a=Intersection[g].apply(null,f)}}}else{a=new Intersection("No Intersection")}return a};Intersection.intersectPathShape=function(b,a){return b.intersectShape(a)
};Intersection.intersectBezier2Bezier2=function(O,M,L,o,m,l){var K,J;var q,r,t;var z,B,D;var w=0.0001;var v=new Intersection("No Intersection");K=M.multiply(-2);q=O.add(K.add(L));K=O.multiply(-2);J=M.multiply(2);r=K.add(J);t=new Point2D(O.x,O.y);K=m.multiply(-2);z=o.add(K.add(l));K=o.multiply(-2);J=m.multiply(2);B=K.add(J);D=new Point2D(o.x,o.y);var K=q.x*r.y-r.x*q.y;var J=z.x*r.y-r.x*z.y;var I=B.x*r.y-r.x*B.y;var H=r.x*(t.y-D.y)+r.y*(-t.x+D.x);var G=z.x*q.y-q.x*z.y;var F=B.x*q.y-q.x*B.y;var E=q.x*(t.y-D.y)+q.y*(-t.x+D.x);
var h=new Polynomial(-G*G,-2*G*F,K*J-F*F-2*G*E,K*I-2*F*E,K*H-E*E);var n=h.getRoots();for(var C=0;C<n.length;C++){var x=n[C];if(0<=x&&x<=1){var p=new Polynomial(-q.x,-r.x,-t.x+D.x+x*B.x+x*x*z.x).getRoots();var u=new Polynomial(-q.y,-r.y,-t.y+D.y+x*B.y+x*x*z.y).getRoots();if(p.length>0&&u.length>0){checkRoots:for(var A=0;A<p.length;A++){var N=p[A];if(0<=N&&N<=1){for(var y=0;y<u.length;y++){if(Math.abs(N-u[y])<w){v.points.push(z.multiply(x*x).add(B.multiply(x).add(D)));break checkRoots}}}}}}}return v
};Intersection.intersectBezier2Bezier3=function(O,N,M,x,w,v,u){var Y,X,W,U;var e,f,g;var F,G,H,I;var q=new Intersection("No Intersection");Y=N.multiply(-2);e=O.add(Y.add(M));Y=O.multiply(-2);X=N.multiply(2);f=Y.add(X);g=new Point2D(O.x,O.y);Y=x.multiply(-1);X=w.multiply(3);W=v.multiply(-3);U=Y.add(X.add(W.add(u)));F=new Vector2D(U.x,U.y);Y=x.multiply(3);X=w.multiply(-6);W=v.multiply(3);U=Y.add(X.add(W));G=new Vector2D(U.x,U.y);Y=x.multiply(-3);X=w.multiply(3);W=Y.add(X);H=new Vector2D(W.x,W.y);I=new Vector2D(x.x,x.y);
var K=g.x*g.x;var t=g.y*g.y;var E=f.x*f.x;var o=f.y*f.y;var A=e.x*e.x;var n=e.y*e.y;var m=I.x*I.x;var Q=I.y*I.y;var h=H.x*H.x;var J=H.y*H.y;var V=G.x*G.x;var C=G.y*G.y;var P=F.x*F.x;var y=F.y*F.y;var B=new Polynomial(-2*e.x*e.y*F.x*F.y+A*y+n*P,-2*e.x*e.y*G.x*F.y-2*e.x*e.y*G.y*F.x+2*n*G.x*F.x+2*A*G.y*F.y,-2*e.x*H.x*e.y*F.y-2*e.x*e.y*H.y*F.x-2*e.x*e.y*G.x*G.y+2*H.x*n*F.x+n*V+A*(2*H.y*F.y+C),2*g.x*e.x*e.y*F.y+2*g.y*e.x*e.y*F.x+f.x*f.y*e.x*F.y+f.x*f.y*e.y*F.x-2*I.x*e.x*e.y*F.y-2*e.x*I.y*e.y*F.x-2*e.x*H.x*e.y*G.y-2*e.x*e.y*H.y*G.x-2*g.x*n*F.x-2*g.y*A*F.y+2*I.x*n*F.x+2*H.x*n*G.x-o*e.x*F.x-E*e.y*F.y+A*(2*I.y*F.y+2*H.y*G.y),2*g.x*e.x*e.y*G.y+2*g.y*e.x*e.y*G.x+f.x*f.y*e.x*G.y+f.x*f.y*e.y*G.x-2*I.x*e.x*e.y*G.y-2*e.x*I.y*e.y*G.x-2*e.x*H.x*e.y*H.y-2*g.x*n*G.x-2*g.y*A*G.y+2*I.x*n*G.x-o*e.x*G.x-E*e.y*G.y+h*n+A*(2*I.y*G.y+J),2*g.x*e.x*e.y*H.y+2*g.y*e.x*H.x*e.y+f.x*f.y*e.x*H.y+f.x*f.y*H.x*e.y-2*I.x*e.x*e.y*H.y-2*e.x*I.y*H.x*e.y-2*g.x*H.x*n-2*g.y*A*H.y+2*I.x*H.x*n-o*e.x*H.x-E*e.y*H.y+2*A*I.y*H.y,-2*g.x*g.y*e.x*e.y-g.x*f.x*f.y*e.y-g.y*f.x*f.y*e.x+2*g.x*e.x*I.y*e.y+2*g.y*I.x*e.x*e.y+f.x*I.x*f.y*e.y+f.x*f.y*e.x*I.y-2*I.x*e.x*I.y*e.y-2*g.x*I.x*n+g.x*o*e.x+g.y*E*e.y-2*g.y*A*I.y-I.x*o*e.x-E*I.y*e.y+K*n+t*A+m*n+A*Q);
var r=B.getRootsInInterval(0,1);for(var T=0;T<r.length;T++){var L=r[T];var l=new Polynomial(e.x,f.x,g.x-I.x-L*H.x-L*L*G.x-L*L*L*F.x).getRoots();var D=new Polynomial(e.y,f.y,g.y-I.y-L*H.y-L*L*G.y-L*L*L*F.y).getRoots();if(l.length>0&&D.length>0){var p=0.0001;checkRoots:for(var S=0;S<l.length;S++){var z=l[S];if(0<=z&&z<=1){for(var R=0;R<D.length;R++){if(Math.abs(z-D[R])<p){q.points.push(F.multiply(L*L*L).add(G.multiply(L*L).add(H.multiply(L).add(I))));break checkRoots}}}}}}if(q.points.length>0){q.status="Intersection"
}return q};Intersection.intersectBezier2Circle=function(e,d,b,f,a){return Intersection.intersectBezier2Ellipse(e,d,b,f,a,a)};Intersection.intersectBezier2Ellipse=function(r,p,o,k,d,c){var n,m;var e,g,j;var u=new Intersection("No Intersection");n=p.multiply(-2);e=r.add(n.add(o));n=r.multiply(-2);m=p.multiply(2);g=n.add(m);j=new Point2D(r.x,r.y);var h=d*d;var l=c*c;var q=new Polynomial(l*e.x*e.x+h*e.y*e.y,2*(l*e.x*g.x+h*e.y*g.y),l*(2*e.x*j.x+g.x*g.x)+h*(2*e.y*j.y+g.y*g.y)-2*(l*k.x*e.x+h*k.y*e.y),2*(l*g.x*(j.x-k.x)+h*g.y*(j.y-k.y)),l*(j.x*j.x+k.x*k.x)+h*(j.y*j.y+k.y*k.y)-2*(l*k.x*j.x+h*k.y*j.y)-h*l).getRoots();
for(var f=0;f<q.length;f++){var s=q[f];if(0<=s&&s<=1){u.points.push(e.multiply(s*s).add(g.multiply(s).add(j)))}}if(u.points.length>0){u.status="Intersection"}return u};Intersection.intersectBezier2Line=function(f,e,d,x,v){var u,s;var k,l,o;var g;var m;var p=x.min(v);var q=x.max(v);var h=new Intersection("No Intersection");u=e.multiply(-2);k=f.add(u.add(d));u=f.multiply(-2);s=e.multiply(2);l=u.add(s);o=new Point2D(f.x,f.y);m=new Vector2D(x.y-v.y,v.x-x.x);g=x.x*v.y-v.x*x.y;roots=new Polynomial(m.dot(k),m.dot(l),m.dot(o)+g).getRoots();
for(var r=0;r<roots.length;r++){var j=roots[r];if(0<=j&&j<=1){var c=f.lerp(e,j);var y=e.lerp(d,j);var w=c.lerp(y,j);if(x.x==v.x){if(p.y<=w.y&&w.y<=q.y){h.status="Intersection";h.appendPoint(w)}}else{if(x.y==v.y){if(p.x<=w.x&&w.x<=q.x){h.status="Intersection";h.appendPoint(w)}}else{if(w.gte(p)&&w.lte(q)){h.status="Intersection";h.appendPoint(w)}}}}}return h};Intersection.intersectBezier2Polygon=function(j,g,f,h){var k=new Intersection("No Intersection");var c=h.length;for(var e=0;e<c;e++){var b=h[e];
var a=h[(e+1)%c];var d=Intersection.intersectBezier2Line(j,g,f,b,a);k.appendPoints(d.points)}if(k.points.length>0){k.status="Intersection"}return k};Intersection.intersectBezier2Rectangle=function(n,m,l,b,a){var d=b.min(a);var k=b.max(a);var c=new Point2D(k.x,d.y);var j=new Point2D(d.x,k.y);var h=Intersection.intersectBezier2Line(n,m,l,d,c);var g=Intersection.intersectBezier2Line(n,m,l,c,k);var f=Intersection.intersectBezier2Line(n,m,l,k,j);var e=Intersection.intersectBezier2Line(n,m,l,j,d);var o=new Intersection("No Intersection");
o.appendPoints(h.points);o.appendPoints(g.points);o.appendPoints(f.points);o.appendPoints(e.points);if(o.points.length>0){o.status="Intersection"}return o};Intersection.intersectBezier3Bezier3=function(ae,ac,ab,aa,I,G,F,E){var aq,ap,ao,am;var e,f,g,h;var S,T,U,V;var y=new Intersection("No Intersection");aq=ae.multiply(-1);ap=ac.multiply(3);ao=ab.multiply(-3);am=aq.add(ap.add(ao.add(aa)));e=new Vector2D(am.x,am.y);aq=ae.multiply(3);ap=ac.multiply(-6);ao=ab.multiply(3);am=aq.add(ap.add(ao));f=new Vector2D(am.x,am.y);
aq=ae.multiply(-3);ap=ac.multiply(3);ao=aq.add(ap);g=new Vector2D(ao.x,ao.y);h=new Vector2D(ae.x,ae.y);aq=I.multiply(-1);ap=G.multiply(3);ao=F.multiply(-3);am=aq.add(ap.add(ao.add(E)));S=new Vector2D(am.x,am.y);aq=I.multiply(3);ap=G.multiply(-6);ao=F.multiply(3);am=aq.add(ap.add(ao));T=new Vector2D(am.x,am.y);aq=I.multiply(-3);ap=G.multiply(3);ao=aq.add(ap);U=new Vector2D(ao.x,ao.y);V=new Vector2D(I.x,I.y);var Y=h.x*h.x;var X=h.x*h.x*h.x;var D=h.y*h.y;var B=h.y*h.y*h.y;var R=g.x*g.x;var Q=g.x*g.x*g.x;
var w=g.y*g.y;var v=g.y*g.y*g.y;var M=f.x*f.x;var L=f.x*f.x*f.x;var u=f.y*f.y;var t=f.y*f.y*f.y;var A=e.x*e.x;var z=e.x*e.x*e.x;var o=e.y*e.y;var n=e.y*e.y*e.y;var r=V.x*V.x;var q=V.x*V.x*V.x;var ah=V.y*V.y;var ag=V.y*V.y*V.y;var m=U.x*U.x;var l=U.x*U.x*U.x;var W=U.y*U.y;var an=T.x*T.x;var al=T.x*T.x*T.x;var O=T.y*T.y;var af=S.x*S.x;var ad=S.x*S.x*S.x;var J=S.y*S.y;var H=S.y*S.y*S.y;var N=new Polynomial(-z*H+n*ad-3*e.x*o*af*S.y+3*A*e.y*S.x*J,-6*e.x*T.x*o*S.x*S.y+6*A*e.y*T.y*S.x*S.y+3*T.x*n*af-3*z*T.y*J-3*e.x*o*T.y*af+3*A*T.x*e.y*J,-6*U.x*e.x*o*S.x*S.y-6*e.x*T.x*o*T.y*S.x+6*A*T.x*e.y*T.y*S.y+3*U.x*n*af+3*an*n*S.x+3*U.x*A*e.y*J-3*e.x*U.y*o*af-3*e.x*an*o*S.y+A*e.y*S.x*(6*U.y*S.y+3*O)+z*(-U.y*J-2*O*S.y-S.y*(2*U.y*S.y+O)),g.x*f.y*e.x*e.y*S.x*S.y-g.y*f.x*e.x*e.y*S.x*S.y+6*U.x*T.x*n*S.x+3*g.x*f.x*e.x*e.y*J+6*h.x*e.x*o*S.x*S.y-3*g.x*f.x*o*S.x*S.y-3*g.y*f.y*e.x*e.y*af-6*h.y*A*e.y*S.x*S.y-6*V.x*e.x*o*S.x*S.y+3*g.y*f.y*A*S.x*S.y-2*f.x*u*e.x*S.x*S.y-6*U.x*e.x*T.x*o*S.y-6*U.x*e.x*o*T.y*S.x-6*e.x*U.y*T.x*o*S.x+6*U.x*A*e.y*T.y*S.y+2*M*f.y*e.y*S.x*S.y+al*n-3*h.x*n*af+3*h.y*z*J+3*V.x*n*af+t*e.x*af-L*e.y*J-3*h.x*A*e.y*J+3*h.y*e.x*o*af-2*g.x*f.y*A*J+g.x*f.y*o*af-g.y*f.x*A*J+2*g.y*f.x*o*af+3*V.x*A*e.y*J-f.x*u*e.y*af-3*V.y*e.x*o*af+M*f.y*e.x*J-3*e.x*an*o*T.y+A*e.y*S.x*(6*V.y*S.y+6*U.y*T.y)+A*T.x*e.y*(6*U.y*S.y+3*O)+z*(-2*U.y*T.y*S.y-V.y*J-T.y*(2*U.y*S.y+O)-S.y*(2*V.y*S.y+2*U.y*T.y)),6*g.x*f.x*e.x*e.y*T.y*S.y+g.x*f.y*e.x*T.x*e.y*S.y+g.x*f.y*e.x*e.y*T.y*S.x-g.y*f.x*e.x*T.x*e.y*S.y-g.y*f.x*e.x*e.y*T.y*S.x-6*g.y*f.y*e.x*T.x*e.y*S.x-6*h.x*T.x*n*S.x+6*V.x*T.x*n*S.x+6*h.y*z*T.y*S.y+2*t*e.x*T.x*S.x-2*L*e.y*T.y*S.y+6*h.x*e.x*T.x*o*S.y+6*h.x*e.x*o*T.y*S.x+6*h.y*e.x*T.x*o*S.x-3*g.x*f.x*T.x*o*S.y-3*g.x*f.x*o*T.y*S.x+2*g.x*f.y*T.x*o*S.x+4*g.y*f.x*T.x*o*S.x-6*h.x*A*e.y*T.y*S.y-6*h.y*A*T.x*e.y*S.y-6*h.y*A*e.y*T.y*S.x-4*g.x*f.y*A*T.y*S.y-6*V.x*e.x*T.x*o*S.y-6*V.x*e.x*o*T.y*S.x-2*g.y*f.x*A*T.y*S.y+3*g.y*f.y*A*T.x*S.y+3*g.y*f.y*A*T.y*S.x-2*f.x*u*e.x*T.x*S.y-2*f.x*u*e.x*T.y*S.x-2*f.x*u*T.x*e.y*S.x-6*V.y*e.x*T.x*o*S.x-6*U.x*e.x*U.y*o*S.x-6*U.x*e.x*T.x*o*T.y+6*V.x*A*e.y*T.y*S.y+2*M*f.y*e.x*T.y*S.y+2*M*f.y*T.x*e.y*S.y+2*M*f.y*e.y*T.y*S.x+3*U.x*an*n+3*m*n*S.x-3*e.x*U.y*an*o-3*m*e.x*o*S.y+A*T.x*e.y*(6*V.y*S.y+6*U.y*T.y)+A*e.y*S.x*(6*V.y*T.y+3*W)+U.x*A*e.y*(6*U.y*S.y+3*O)+z*(-2*V.y*T.y*S.y-S.y*(2*V.y*T.y+W)-U.y*(2*U.y*S.y+O)-T.y*(2*V.y*S.y+2*U.y*T.y)),g.x*U.x*f.y*e.x*e.y*S.y+g.x*f.y*e.x*U.y*e.y*S.x+g.x*f.y*e.x*T.x*e.y*T.y-g.y*f.x*U.x*e.x*e.y*S.y-g.y*f.x*e.x*U.y*e.y*S.x-g.y*f.x*e.x*T.x*e.y*T.y-6*g.y*U.x*f.y*e.x*e.y*S.x-6*h.x*U.x*n*S.x+6*V.x*U.x*n*S.x+2*U.x*t*e.x*S.x+6*h.x*U.x*e.x*o*S.y+6*h.x*e.x*U.y*o*S.x+6*h.x*e.x*T.x*o*T.y+6*h.y*U.x*e.x*o*S.x-3*g.x*f.x*U.x*o*S.y-3*g.x*f.x*U.y*o*S.x-3*g.x*f.x*T.x*o*T.y+2*g.x*U.x*f.y*o*S.x+4*g.y*f.x*U.x*o*S.x-6*h.y*U.x*A*e.y*S.y-6*h.y*A*U.y*e.y*S.x-6*h.y*A*T.x*e.y*T.y-6*V.x*U.x*e.x*o*S.y-6*V.x*e.x*U.y*o*S.x-6*V.x*e.x*T.x*o*T.y+3*g.y*U.x*f.y*A*S.y-3*g.y*f.y*e.x*an*e.y+3*g.y*f.y*A*U.y*S.x+3*g.y*f.y*A*T.x*T.y-2*f.x*U.x*u*e.x*S.y-2*f.x*U.x*u*e.y*S.x-2*f.x*u*e.x*U.y*S.x-2*f.x*u*e.x*T.x*T.y-6*V.y*U.x*e.x*o*S.x-6*U.x*e.x*U.y*T.x*o+6*V.y*A*U.y*e.y*S.x+2*M*U.x*f.y*e.y*S.y+2*M*f.y*U.y*e.y*S.x+2*M*f.y*T.x*e.y*T.y-3*h.x*an*n+3*V.x*an*n+3*m*T.x*n+t*e.x*an+3*h.y*e.x*an*o+g.x*f.y*an*o+2*g.y*f.x*an*o-f.x*u*an*e.y-3*V.y*e.x*an*o-3*m*e.x*o*T.y+M*f.y*e.x*(2*U.y*S.y+O)+g.x*f.x*e.x*e.y*(6*U.y*S.y+3*O)+U.x*A*e.y*(6*V.y*S.y+6*U.y*T.y)+L*e.y*(-2*U.y*S.y-O)+h.y*z*(6*U.y*S.y+3*O)+g.y*f.x*A*(-2*U.y*S.y-O)+g.x*f.y*A*(-4*U.y*S.y-2*O)+h.x*A*e.y*(-6*U.y*S.y-3*O)+A*T.x*e.y*(6*V.y*T.y+3*W)+V.x*A*e.y*(6*U.y*S.y+3*O)+z*(-2*V.y*U.y*S.y-T.y*(2*V.y*T.y+W)-V.y*(2*U.y*S.y+O)-U.y*(2*V.y*S.y+2*U.y*T.y)),-h.x*g.x*f.y*e.x*e.y*S.y+h.x*g.y*f.x*e.x*e.y*S.y+6*h.x*g.y*f.y*e.x*e.y*S.x-6*h.y*g.x*f.x*e.x*e.y*S.y-h.y*g.x*f.y*e.x*e.y*S.x+h.y*g.y*f.x*e.x*e.y*S.x+g.x*g.y*f.x*f.y*e.x*S.y-g.x*g.y*f.x*f.y*e.y*S.x+g.x*V.x*f.y*e.x*e.y*S.y+g.x*V.y*f.y*e.x*e.y*S.x+g.x*U.x*f.y*e.x*e.y*T.y+g.x*f.y*e.x*U.y*T.x*e.y-V.x*g.y*f.x*e.x*e.y*S.y-6*V.x*g.y*f.y*e.x*e.y*S.x-g.y*f.x*V.y*e.x*e.y*S.x-g.y*f.x*U.x*e.x*e.y*T.y-g.y*f.x*e.x*U.y*T.x*e.y-6*g.y*U.x*f.y*e.x*T.x*e.y-6*h.x*V.x*n*S.x-6*h.x*U.x*T.x*n-2*h.x*t*e.x*S.x+6*V.x*U.x*T.x*n+2*V.x*t*e.x*S.x+2*U.x*t*e.x*T.x+2*h.y*L*e.y*S.y-6*h.x*h.y*e.x*o*S.x+3*h.x*g.x*f.x*o*S.y-2*h.x*g.x*f.y*o*S.x-4*h.x*g.y*f.x*o*S.x+3*h.y*g.x*f.x*o*S.x+6*h.x*h.y*A*e.y*S.y+6*h.x*V.x*e.x*o*S.y-3*h.x*g.y*f.y*A*S.y+2*h.x*f.x*u*e.x*S.y+2*h.x*f.x*u*e.y*S.x+6*h.x*V.y*e.x*o*S.x+6*h.x*U.x*e.x*o*T.y+6*h.x*e.x*U.y*T.x*o+4*h.y*g.x*f.y*A*S.y+6*h.y*V.x*e.x*o*S.x+2*h.y*g.y*f.x*A*S.y-3*h.y*g.y*f.y*A*S.x+2*h.y*f.x*u*e.x*S.x+6*h.y*U.x*e.x*T.x*o-3*g.x*V.x*f.x*o*S.y+2*g.x*V.x*f.y*o*S.x+g.x*g.y*u*e.x*S.x-3*g.x*f.x*V.y*o*S.x-3*g.x*f.x*U.x*o*T.y-3*g.x*f.x*U.y*T.x*o+2*g.x*U.x*f.y*T.x*o+4*V.x*g.y*f.x*o*S.x+4*g.y*f.x*U.x*T.x*o-2*h.x*M*f.y*e.y*S.y-6*h.y*V.x*A*e.y*S.y-6*h.y*V.y*A*e.y*S.x-6*h.y*U.x*A*e.y*T.y-2*h.y*M*f.y*e.x*S.y-2*h.y*M*f.y*e.y*S.x-6*h.y*A*U.y*T.x*e.y-g.x*g.y*M*e.y*S.y-2*g.x*w*e.x*e.y*S.x+3*V.x*g.y*f.y*A*S.y-2*V.x*f.x*u*e.x*S.y-2*V.x*f.x*u*e.y*S.x-6*V.x*V.y*e.x*o*S.x-6*V.x*U.x*e.x*o*T.y-6*V.x*e.x*U.y*T.x*o+3*g.y*V.y*f.y*A*S.x+3*g.y*U.x*f.y*A*T.y+3*g.y*f.y*A*U.y*T.x-2*f.x*V.y*u*e.x*S.x-2*f.x*U.x*u*e.x*T.y-2*f.x*U.x*u*T.x*e.y-2*f.x*u*e.x*U.y*T.x-6*V.y*U.x*e.x*T.x*o-w*f.x*f.y*e.x*S.x+2*V.x*M*f.y*e.y*S.y+6*V.y*A*U.y*T.x*e.y+2*R*g.y*e.x*e.y*S.y+R*f.x*f.y*e.y*S.y+2*M*V.y*f.y*e.y*S.x+2*M*U.x*f.y*e.y*T.y+2*M*f.y*U.y*T.x*e.y+l*n+3*Y*n*S.x-3*D*z*S.y+3*r*n*S.x+v*A*S.x-Q*o*S.y-g.x*w*A*S.y+R*g.y*o*S.x-3*Y*e.x*o*S.y+3*D*A*e.y*S.x-R*u*e.x*S.y+w*M*e.y*S.x-3*m*e.x*U.y*o-3*r*e.x*o*S.y+3*ah*A*e.y*S.x+g.x*f.x*e.x*e.y*(6*V.y*S.y+6*U.y*T.y)+L*e.y*(-2*V.y*S.y-2*U.y*T.y)+h.y*z*(6*V.y*S.y+6*U.y*T.y)+g.y*f.x*A*(-2*V.y*S.y-2*U.y*T.y)+M*f.y*e.x*(2*V.y*S.y+2*U.y*T.y)+g.x*f.y*A*(-4*V.y*S.y-4*U.y*T.y)+h.x*A*e.y*(-6*V.y*S.y-6*U.y*T.y)+V.x*A*e.y*(6*V.y*S.y+6*U.y*T.y)+U.x*A*e.y*(6*V.y*T.y+3*W)+z*(-2*V.y*U.y*T.y-ah*S.y-U.y*(2*V.y*T.y+W)-V.y*(2*V.y*S.y+2*U.y*T.y)),-h.x*g.x*f.y*e.x*e.y*T.y+h.x*g.y*f.x*e.x*e.y*T.y+6*h.x*g.y*f.y*e.x*T.x*e.y-6*h.y*g.x*f.x*e.x*e.y*T.y-h.y*g.x*f.y*e.x*T.x*e.y+h.y*g.y*f.x*e.x*T.x*e.y+g.x*g.y*f.x*f.y*e.x*T.y-g.x*g.y*f.x*f.y*T.x*e.y+g.x*V.x*f.y*e.x*e.y*T.y+g.x*V.y*f.y*e.x*T.x*e.y+g.x*U.x*f.y*e.x*U.y*e.y-V.x*g.y*f.x*e.x*e.y*T.y-6*V.x*g.y*f.y*e.x*T.x*e.y-g.y*f.x*V.y*e.x*T.x*e.y-g.y*f.x*U.x*e.x*U.y*e.y-6*h.x*V.x*T.x*n-2*h.x*t*e.x*T.x+2*V.x*t*e.x*T.x+2*h.y*L*e.y*T.y-6*h.x*h.y*e.x*T.x*o+3*h.x*g.x*f.x*o*T.y-2*h.x*g.x*f.y*T.x*o-4*h.x*g.y*f.x*T.x*o+3*h.y*g.x*f.x*T.x*o+6*h.x*h.y*A*e.y*T.y+6*h.x*V.x*e.x*o*T.y-3*h.x*g.y*f.y*A*T.y+2*h.x*f.x*u*e.x*T.y+2*h.x*f.x*u*T.x*e.y+6*h.x*V.y*e.x*T.x*o+6*h.x*U.x*e.x*U.y*o+4*h.y*g.x*f.y*A*T.y+6*h.y*V.x*e.x*T.x*o+2*h.y*g.y*f.x*A*T.y-3*h.y*g.y*f.y*A*T.x+2*h.y*f.x*u*e.x*T.x-3*g.x*V.x*f.x*o*T.y+2*g.x*V.x*f.y*T.x*o+g.x*g.y*u*e.x*T.x-3*g.x*f.x*V.y*T.x*o-3*g.x*f.x*U.x*U.y*o+4*V.x*g.y*f.x*T.x*o-2*h.x*M*f.y*e.y*T.y-6*h.y*V.x*A*e.y*T.y-6*h.y*V.y*A*T.x*e.y-6*h.y*U.x*A*U.y*e.y-2*h.y*M*f.y*e.x*T.y-2*h.y*M*f.y*T.x*e.y-g.x*g.y*M*e.y*T.y-2*g.x*w*e.x*T.x*e.y+3*V.x*g.y*f.y*A*T.y-2*V.x*f.x*u*e.x*T.y-2*V.x*f.x*u*T.x*e.y-6*V.x*V.y*e.x*T.x*o-6*V.x*U.x*e.x*U.y*o+3*g.y*V.y*f.y*A*T.x+3*g.y*U.x*f.y*A*U.y-2*f.x*V.y*u*e.x*T.x-2*f.x*U.x*u*e.x*U.y-w*f.x*f.y*e.x*T.x+2*V.x*M*f.y*e.y*T.y-3*g.y*m*f.y*e.x*e.y+6*V.y*U.x*A*U.y*e.y+2*R*g.y*e.x*e.y*T.y+R*f.x*f.y*e.y*T.y+2*M*V.y*f.y*T.x*e.y+2*M*U.x*f.y*U.y*e.y-3*h.x*m*n+3*V.x*m*n+3*Y*T.x*n-3*D*z*T.y+3*r*T.x*n+m*t*e.x+v*A*T.x-Q*o*T.y+3*h.y*m*e.x*o-g.x*w*A*T.y+g.x*m*f.y*o+2*g.y*f.x*m*o+R*g.y*T.x*o-f.x*m*u*e.y-3*V.y*m*e.x*o-3*Y*e.x*o*T.y+3*D*A*T.x*e.y-R*u*e.x*T.y+w*M*T.x*e.y-3*r*e.x*o*T.y+3*ah*A*T.x*e.y+M*f.y*e.x*(2*V.y*T.y+W)+g.x*f.x*e.x*e.y*(6*V.y*T.y+3*W)+L*e.y*(-2*V.y*T.y-W)+h.y*z*(6*V.y*T.y+3*W)+g.y*f.x*A*(-2*V.y*T.y-W)+g.x*f.y*A*(-4*V.y*T.y-2*W)+h.x*A*e.y*(-6*V.y*T.y-3*W)+V.x*A*e.y*(6*V.y*T.y+3*W)+z*(-2*V.y*W-ah*T.y-V.y*(2*V.y*T.y+W)),-h.x*g.x*f.y*e.x*U.y*e.y+h.x*g.y*f.x*e.x*U.y*e.y+6*h.x*g.y*U.x*f.y*e.x*e.y-6*h.y*g.x*f.x*e.x*U.y*e.y-h.y*g.x*U.x*f.y*e.x*e.y+h.y*g.y*f.x*U.x*e.x*e.y-g.x*g.y*f.x*U.x*f.y*e.y+g.x*g.y*f.x*f.y*e.x*U.y+g.x*V.x*f.y*e.x*U.y*e.y+6*g.x*f.x*V.y*e.x*U.y*e.y+g.x*V.y*U.x*f.y*e.x*e.y-V.x*g.y*f.x*e.x*U.y*e.y-6*V.x*g.y*U.x*f.y*e.x*e.y-g.y*f.x*V.y*U.x*e.x*e.y-6*h.x*V.x*U.x*n-2*h.x*U.x*t*e.x+6*h.y*V.y*z*U.y+2*V.x*U.x*t*e.x+2*h.y*L*U.y*e.y-2*L*V.y*U.y*e.y-6*h.x*h.y*U.x*e.x*o+3*h.x*g.x*f.x*U.y*o-2*h.x*g.x*U.x*f.y*o-4*h.x*g.y*f.x*U.x*o+3*h.y*g.x*f.x*U.x*o+6*h.x*h.y*A*U.y*e.y+6*h.x*V.x*e.x*U.y*o-3*h.x*g.y*f.y*A*U.y+2*h.x*f.x*U.x*u*e.y+2*h.x*f.x*u*e.x*U.y+6*h.x*V.y*U.x*e.x*o+4*h.y*g.x*f.y*A*U.y+6*h.y*V.x*U.x*e.x*o+2*h.y*g.y*f.x*A*U.y-3*h.y*g.y*U.x*f.y*A+2*h.y*f.x*U.x*u*e.x-3*g.x*V.x*f.x*U.y*o+2*g.x*V.x*U.x*f.y*o+g.x*g.y*U.x*u*e.x-3*g.x*f.x*V.y*U.x*o+4*V.x*g.y*f.x*U.x*o-6*h.x*V.y*A*U.y*e.y-2*h.x*M*f.y*U.y*e.y-6*h.y*V.x*A*U.y*e.y-6*h.y*V.y*U.x*A*e.y-2*h.y*M*U.x*f.y*e.y-2*h.y*M*f.y*e.x*U.y-g.x*g.y*M*U.y*e.y-4*g.x*V.y*f.y*A*U.y-2*g.x*w*U.x*e.x*e.y+3*V.x*g.y*f.y*A*U.y-2*V.x*f.x*U.x*u*e.y-2*V.x*f.x*u*e.x*U.y-6*V.x*V.y*U.x*e.x*o-2*g.y*f.x*V.y*A*U.y+3*g.y*V.y*U.x*f.y*A-2*f.x*V.y*U.x*u*e.x-w*f.x*U.x*f.y*e.x+6*V.x*V.y*A*U.y*e.y+2*V.x*M*f.y*U.y*e.y+2*R*g.y*e.x*U.y*e.y+R*f.x*f.y*U.y*e.y+2*M*V.y*U.x*f.y*e.y+2*M*V.y*f.y*e.x*U.y+3*Y*U.x*n-3*D*z*U.y+3*r*U.x*n+v*U.x*A-Q*U.y*o-3*ah*z*U.y-g.x*w*A*U.y+R*g.y*U.x*o-3*Y*e.x*U.y*o+3*D*U.x*A*e.y-R*u*e.x*U.y+w*M*U.x*e.y-3*r*e.x*U.y*o+3*ah*U.x*A*e.y,h.x*h.y*g.x*f.y*e.x*e.y-h.x*h.y*g.y*f.x*e.x*e.y+h.x*g.x*g.y*f.x*f.y*e.y-h.y*g.x*g.y*f.x*f.y*e.x-h.x*g.x*V.y*f.y*e.x*e.y+6*h.x*V.x*g.y*f.y*e.x*e.y+h.x*g.y*f.x*V.y*e.x*e.y-h.y*g.x*V.x*f.y*e.x*e.y-6*h.y*g.x*f.x*V.y*e.x*e.y+h.y*V.x*g.y*f.x*e.x*e.y-g.x*V.x*g.y*f.x*f.y*e.y+g.x*g.y*f.x*V.y*f.y*e.x+g.x*V.x*V.y*f.y*e.x*e.y-V.x*g.y*f.x*V.y*e.x*e.y-2*h.x*V.x*t*e.x+2*h.y*L*V.y*e.y-3*h.x*h.y*g.x*f.x*o-6*h.x*h.y*V.x*e.x*o+3*h.x*h.y*g.y*f.y*A-2*h.x*h.y*f.x*u*e.x-2*h.x*g.x*V.x*f.y*o-h.x*g.x*g.y*u*e.x+3*h.x*g.x*f.x*V.y*o-4*h.x*V.x*g.y*f.x*o+3*h.y*g.x*V.x*f.x*o+6*h.x*h.y*V.y*A*e.y+2*h.x*h.y*M*f.y*e.y+2*h.x*g.x*w*e.x*e.y+2*h.x*V.x*f.x*u*e.y+6*h.x*V.x*V.y*e.x*o-3*h.x*g.y*V.y*f.y*A+2*h.x*f.x*V.y*u*e.x+h.x*w*f.x*f.y*e.x+h.y*g.x*g.y*M*e.y+4*h.y*g.x*V.y*f.y*A-3*h.y*V.x*g.y*f.y*A+2*h.y*V.x*f.x*u*e.x+2*h.y*g.y*f.x*V.y*A+g.x*V.x*g.y*u*e.x-3*g.x*V.x*f.x*V.y*o-2*h.x*M*V.y*f.y*e.y-6*h.y*V.x*V.y*A*e.y-2*h.y*V.x*M*f.y*e.y-2*h.y*R*g.y*e.x*e.y-h.y*R*f.x*f.y*e.y-2*h.y*M*V.y*f.y*e.x-2*g.x*V.x*w*e.x*e.y-g.x*g.y*M*V.y*e.y+3*V.x*g.y*V.y*f.y*A-2*V.x*f.x*V.y*u*e.x-V.x*w*f.x*f.y*e.x+3*D*g.x*f.x*e.x*e.y+3*g.x*f.x*ah*e.x*e.y+2*V.x*M*V.y*f.y*e.y-3*Y*g.y*f.y*e.x*e.y+2*R*g.y*V.y*e.x*e.y+R*f.x*V.y*f.y*e.y-3*r*g.y*f.y*e.x*e.y-X*n+B*z+q*n-ag*z-3*h.x*r*n-h.x*v*A+3*Y*V.x*n+h.y*Q*o+3*h.y*ah*z+V.x*v*A+Y*t*e.x-3*D*V.y*z-D*L*e.y+r*t*e.x-Q*V.y*o-L*ah*e.y-h.x*R*g.y*o+h.y*g.x*w*A-3*h.x*D*A*e.y-h.x*w*M*e.y+h.y*R*u*e.x-g.x*w*V.y*A+3*Y*h.y*e.x*o+Y*g.x*f.y*o+2*Y*g.y*f.x*o-2*D*g.x*f.y*A-D*g.y*f.x*A+R*V.x*g.y*o-3*h.x*ah*A*e.y+3*h.y*r*e.x*o+g.x*r*f.y*o-2*g.x*ah*f.y*A+V.x*w*M*e.y-g.y*f.x*ah*A-Y*f.x*u*e.y-3*Y*V.y*e.x*o+3*D*V.x*A*e.y+D*M*f.y*e.x-R*V.y*u*e.x+2*r*g.y*f.x*o+3*V.x*ah*A*e.y-r*f.x*u*e.y-3*r*V.y*e.x*o+M*ah*f.y*e.x);
var C=N.getRootsInInterval(0,1);for(var ak=0;ak<C.length;ak++){var Z=C[ak];var p=new Polynomial(e.x,f.x,g.x,h.x-V.x-Z*U.x-Z*Z*T.x-Z*Z*Z*S.x).getRoots();var P=new Polynomial(e.y,f.y,g.y,h.y-V.y-Z*U.y-Z*Z*T.y-Z*Z*Z*S.y).getRoots();if(p.length>0&&P.length>0){var x=0.0001;checkRoots:for(var aj=0;aj<p.length;aj++){var K=p[aj];if(0<=K&&K<=1){for(var ai=0;ai<P.length;ai++){if(Math.abs(K-P[ai])<x){y.points.push(S.multiply(Z*Z*Z).add(T.multiply(Z*Z).add(U.multiply(Z).add(V))));break checkRoots}}}}}}if(y.points.length>0){y.status="Intersection"
}return y};Intersection.intersectBezier3Circle=function(f,e,d,b,g,a){return Intersection.intersectBezier3Ellipse(f,e,d,b,g,a,a)};Intersection.intersectBezier3Ellipse=function(h,g,f,e,n,l,k){var B,A,z,y;var s,u,v,w;var p=new Intersection("No Intersection");B=h.multiply(-1);A=g.multiply(3);z=f.multiply(-3);y=B.add(A.add(z.add(e)));s=new Vector2D(y.x,y.y);B=h.multiply(3);A=g.multiply(-6);z=f.multiply(3);y=B.add(A.add(z));u=new Vector2D(y.x,y.y);B=h.multiply(-3);A=g.multiply(3);z=B.add(A);v=new Vector2D(z.x,z.y);
w=new Vector2D(h.x,h.y);var r=l*l;var j=k*k;var m=new Polynomial(s.x*s.x*j+s.y*s.y*r,2*(s.x*u.x*j+s.y*u.y*r),2*(s.x*v.x*j+s.y*v.y*r)+u.x*u.x*j+u.y*u.y*r,2*s.x*j*(w.x-n.x)+2*s.y*r*(w.y-n.y)+2*(u.x*v.x*j+u.y*v.y*r),2*u.x*j*(w.x-n.x)+2*u.y*r*(w.y-n.y)+v.x*v.x*j+v.y*v.y*r,2*v.x*j*(w.x-n.x)+2*v.y*r*(w.y-n.y),w.x*w.x*j-2*w.y*n.y*r-2*w.x*n.x*j+w.y*w.y*r+n.x*n.x*j+n.y*n.y*r-r*j);var o=m.getRootsInInterval(0,1);for(var x=0;x<o.length;x++){var q=o[x];p.points.push(s.multiply(q*q*q).add(u.multiply(q*q).add(v.multiply(q).add(w))))
}if(p.points.length>0){p.status="Intersection"}return p};Intersection.intersectBezier3Line=function(h,g,f,e,G,E){var C,A,y,x;var o,p,q,s;var j;var r;var u=G.min(E);var w=G.max(E);var k=new Intersection("No Intersection");C=h.multiply(-1);A=g.multiply(3);y=f.multiply(-3);x=C.add(A.add(y.add(e)));o=new Vector2D(x.x,x.y);C=h.multiply(3);A=g.multiply(-6);y=f.multiply(3);x=C.add(A.add(y));p=new Vector2D(x.x,x.y);C=h.multiply(-3);A=g.multiply(3);y=C.add(A);q=new Vector2D(y.x,y.y);s=new Vector2D(h.x,h.y);
r=new Vector2D(G.y-E.y,E.x-G.x);j=G.x*E.y-E.x*G.y;roots=new Polynomial(r.dot(o),r.dot(p),r.dot(q),r.dot(s)+j).getRoots();for(var v=0;v<roots.length;v++){var l=roots[v];if(0<=l&&l<=1){var H=h.lerp(g,l);var F=g.lerp(f,l);var D=f.lerp(e,l);var B=H.lerp(F,l);var z=F.lerp(D,l);var m=B.lerp(z,l);if(G.x==E.x){if(u.y<=m.y&&m.y<=w.y){k.status="Intersection";k.appendPoint(m)}}else{if(G.y==E.y){if(u.x<=m.x&&m.x<=w.x){k.status="Intersection";k.appendPoint(m)}}else{if(m.gte(u)&&m.lte(w)){k.status="Intersection";
k.appendPoint(m)}}}}}return k};Intersection.intersectBezier3Polygon=function(k,h,g,f,j){var l=new Intersection("No Intersection");var c=j.length;for(var e=0;e<c;e++){var b=j[e];var a=j[(e+1)%c];var d=Intersection.intersectBezier3Line(k,h,g,f,b,a);l.appendPoints(d.points)}if(l.points.length>0){l.status="Intersection"}return l};Intersection.intersectBezier3Rectangle=function(o,n,m,l,b,a){var d=b.min(a);var k=b.max(a);var c=new Point2D(k.x,d.y);var j=new Point2D(d.x,k.y);var h=Intersection.intersectBezier3Line(o,n,m,l,d,c);
var g=Intersection.intersectBezier3Line(o,n,m,l,c,k);var f=Intersection.intersectBezier3Line(o,n,m,l,k,j);var e=Intersection.intersectBezier3Line(o,n,m,l,j,d);var p=new Intersection("No Intersection");p.appendPoints(h.points);p.appendPoints(g.points);p.appendPoints(f.points);p.appendPoints(e.points);if(p.points.length>0){p.status="Intersection"}return p};Intersection.intersectCircleCircle=function(j,f,g,e){var q;var c=f+e;var l=Math.abs(f-e);var o=j.distanceFrom(g);if(o>c){q=new Intersection("Outside")
}else{if(o<l){q=new Intersection("Inside")}else{q=new Intersection("Intersection");var n=(f*f-e*e+o*o)/(2*o);var k=Math.sqrt(f*f-n*n);var d=j.lerp(g,n/o);var m=k/o;q.points.push(new Point2D(d.x-m*(g.y-j.y),d.y+m*(g.x-j.x)));q.points.push(new Point2D(d.x+m*(g.y-j.y),d.y-m*(g.x-j.x)))}}return q};Intersection.intersectCircleEllipse=function(e,b,a,d,c){return Intersection.intersectEllipseEllipse(e,b,b,a,d,c)};Intersection.intersectCircleLine=function(n,d,j,g){var q;var p=(g.x-j.x)*(g.x-j.x)+(g.y-j.y)*(g.y-j.y);
var o=2*((g.x-j.x)*(j.x-n.x)+(g.y-j.y)*(j.y-n.y));var l=n.x*n.x+n.y*n.y+j.x*j.x+j.y*j.y-2*(n.x*j.x+n.y*j.y)-d*d;var f=o*o-4*p*l;if(f<0){q=new Intersection("Outside")}else{if(f==0){q=new Intersection("Tangent")}else{var m=Math.sqrt(f);var k=(-o+m)/(2*p);var h=(-o-m)/(2*p);if((k<0||k>1)&&(h<0||h>1)){if((k<0&&h<0)||(k>1&&h>1)){q=new Intersection("Outside")}else{q=new Intersection("Inside")}}else{q=new Intersection("Intersection");if(0<=k&&k<=1){q.points.push(j.lerp(g,k))}if(0<=h&&h<=1){q.points.push(j.lerp(g,h))
}}}}return q};Intersection.intersectCirclePolygon=function(h,a,j){var k=new Intersection("No Intersection");var e=j.length;var f;for(var g=0;g<e;g++){var d=j[g];var b=j[(g+1)%e];f=Intersection.intersectCircleLine(h,a,d,b);k.appendPoints(f.points)}if(k.points.length>0){k.status="Intersection"}else{k.status=f.status}return k};Intersection.intersectCircleRectangle=function(m,a,d,b){var f=d.min(b);var n=d.max(b);var e=new Point2D(n.x,f.y);var l=new Point2D(f.x,n.y);var k=Intersection.intersectCircleLine(m,a,f,e);
var j=Intersection.intersectCircleLine(m,a,e,n);var h=Intersection.intersectCircleLine(m,a,n,l);var g=Intersection.intersectCircleLine(m,a,l,f);var o=new Intersection("No Intersection");o.appendPoints(k.points);o.appendPoints(j.points);o.appendPoints(h.points);o.appendPoints(g.points);if(o.points.length>0){o.status="Intersection"}else{o.status=k.status}return o};Intersection.intersectEllipseEllipse=function(p,s,e,o,r,d){var u=[e*e,0,s*s,-2*e*e*p.x,-2*s*s*p.y,e*e*p.x*p.x+s*s*p.y*p.y-s*s*e*e];var t=[d*d,0,r*r,-2*d*d*o.x,-2*r*r*o.y,d*d*o.x*o.x+r*r*o.y*o.y-r*r*d*d];
var c=Intersection.bezout(u,t);var k=c.getRoots();var v=0.001;var n=(u[0]*u[0]+2*u[1]*u[1]+u[2]*u[2])*v;var l=(t[0]*t[0]+2*t[1]*t[1]+t[2]*t[2])*v;var j=new Intersection("No Intersection");for(var g=0;g<k.length;g++){var m=new Polynomial(u[0],u[3]+k[g]*u[1],u[5]+k[g]*(u[4]+k[g]*u[2]));var f=m.getRoots();for(var h=0;h<f.length;h++){var q=(u[0]*f[h]+u[1]*k[g]+u[3])*f[h]+(u[2]*k[g]+u[4])*k[g]+u[5];if(Math.abs(q)<n){q=(t[0]*f[h]+t[1]*k[g]+t[3])*f[h]+(t[2]*k[g]+t[4])*k[g]+t[5];if(Math.abs(q)<l){j.appendPoint(new Point2D(f[h],k[g]))
}}}}if(j.points.length>0){j.status="Intersection"}return j};Intersection.intersectEllipseLine=function(r,h,g,y,w){var l;var x=new Vector2D(y.x,y.y);var o=Vector2D.fromPoints(y,w);var u=new Vector2D(r.x,r.y);var n=x.subtract(u);var f=new Vector2D(o.x/(h*h),o.y/(g*g));var e=new Vector2D(n.x/(h*h),n.y/(g*g));var v=o.dot(f);var s=o.dot(e);var r=n.dot(e)-1;var q=s*s-v*r;if(q<0){l=new Intersection("Outside")}else{if(q>0){var p=Math.sqrt(q);var k=(-s-p)/v;var j=(-s+p)/v;if((k<0||1<k)&&(j<0||1<j)){if((k<0&&j<0)||(k>1&&j>1)){l=new Intersection("Outside")
}else{l=new Intersection("Inside")}}else{l=new Intersection("Intersection");if(0<=k&&k<=1){l.appendPoint(y.lerp(w,k))}if(0<=j&&j<=1){l.appendPoint(y.lerp(w,j))}}}else{var m=-s/v;if(0<=m&&m<=1){l=new Intersection("Intersection");l.appendPoint(y.lerp(w,m))}else{l=new Intersection("Outside")}}}return l};Intersection.intersectEllipsePolygon=function(g,b,a,k){var l=new Intersection("No Intersection");var d=k.length;for(var f=0;f<d;f++){var j=k[f];var h=k[(f+1)%d];var e=Intersection.intersectEllipseLine(g,b,a,j,h);
l.appendPoints(e.points)}if(l.points.length>0){l.status="Intersection"}return l};Intersection.intersectEllipseRectangle=function(n,b,a,e,d){var g=e.min(d);var o=e.max(d);var f=new Point2D(o.x,g.y);var m=new Point2D(g.x,o.y);var l=Intersection.intersectEllipseLine(n,b,a,g,f);var k=Intersection.intersectEllipseLine(n,b,a,f,o);var j=Intersection.intersectEllipseLine(n,b,a,o,m);var h=Intersection.intersectEllipseLine(n,b,a,m,g);var p=new Intersection("No Intersection");p.appendPoints(l.points);p.appendPoints(k.points);
p.appendPoints(j.points);p.appendPoints(h.points);if(p.points.length>0){p.status="Intersection"}return p};Intersection.intersectLineLine=function(e,c,j,h){var k;var f=(h.x-j.x)*(e.y-j.y)-(h.y-j.y)*(e.x-j.x);var g=(c.x-e.x)*(e.y-j.y)-(c.y-e.y)*(e.x-j.x);var d=(h.y-j.y)*(c.x-e.x)-(h.x-j.x)*(c.y-e.y);if(d!=0){var b=f/d;var a=g/d;if(0<=b&&b<=1&&0<=a&&a<=1){k=new Intersection("Intersection");k.points.push(new Point2D(e.x+b*(c.x-e.x),e.y+b*(c.y-e.y)))}else{k=new Intersection("No Intersection")}}else{if(f==0||g==0){k=new Intersection("Coincident")
}else{k=new Intersection("Parallel")}}return k};Intersection.intersectLinePolygon=function(b,a,h){var j=new Intersection("No Intersection");var c=h.length;for(var e=0;e<c;e++){var g=h[e];var f=h[(e+1)%c];var d=Intersection.intersectLineLine(b,a,g,f);j.appendPoints(d.points)}if(j.points.length>0){j.status="Intersection"}return j};Intersection.intersectLineRectangle=function(b,a,d,c){var f=d.min(c);var m=d.max(c);var e=new Point2D(m.x,f.y);var l=new Point2D(f.x,m.y);var k=Intersection.intersectLineLine(f,e,b,a);
var j=Intersection.intersectLineLine(e,m,b,a);var h=Intersection.intersectLineLine(m,l,b,a);var g=Intersection.intersectLineLine(l,f,b,a);var n=new Intersection("No Intersection");n.appendPoints(k.points);n.appendPoints(j.points);n.appendPoints(h.points);n.appendPoints(g.points);if(n.points.length>0){n.status="Intersection"}return n};Intersection.intersectPolygonPolygon=function(f,e){var c=new Intersection("No Intersection");var h=f.length;for(var g=0;g<h;g++){var d=f[g];var b=f[(g+1)%h];var a=Intersection.intersectLinePolygon(d,b,e);
c.appendPoints(a.points)}if(c.points.length>0){c.status="Intersection"}return c};Intersection.intersectPolygonRectangle=function(l,b,a){var d=b.min(a);var k=b.max(a);var c=new Point2D(k.x,d.y);var j=new Point2D(d.x,k.y);var h=Intersection.intersectLinePolygon(d,c,l);var g=Intersection.intersectLinePolygon(c,k,l);var f=Intersection.intersectLinePolygon(k,j,l);var e=Intersection.intersectLinePolygon(j,d,l);var m=new Intersection("No Intersection");m.appendPoints(h.points);m.appendPoints(g.points);m.appendPoints(f.points);
m.appendPoints(e.points);if(m.points.length>0){m.status="Intersection"}return m};Intersection.intersectRayRay=function(d,b,h,g){var j;var e=(g.x-h.x)*(d.y-h.y)-(g.y-h.y)*(d.x-h.x);var f=(b.x-d.x)*(d.y-h.y)-(b.y-d.y)*(d.x-h.x);var c=(g.y-h.y)*(b.x-d.x)-(g.x-h.x)*(b.y-d.y);if(c!=0){var a=e/c;j=new Intersection("Intersection");j.points.push(new Point2D(d.x+a*(b.x-d.x),d.y+a*(b.y-d.y)))}else{if(e==0||f==0){j=new Intersection("Coincident")}else{j=new Intersection("Parallel")}}return j};Intersection.intersectRectangleRectangle=function(b,a,m,k){var d=b.min(a);
var l=b.max(a);var c=new Point2D(l.x,d.y);var j=new Point2D(d.x,l.y);var h=Intersection.intersectLineRectangle(d,c,m,k);var g=Intersection.intersectLineRectangle(c,l,m,k);var f=Intersection.intersectLineRectangle(l,j,m,k);var e=Intersection.intersectLineRectangle(j,d,m,k);var n=new Intersection("No Intersection");n.appendPoints(h.points);n.appendPoints(g.points);n.appendPoints(f.points);n.appendPoints(e.points);if(n.points.length>0){n.status="Intersection"}return n};Intersection.bezout=function(o,m){var j=o[0]*m[1]-m[0]*o[1];
var h=o[0]*m[2]-m[0]*o[2];var g=o[0]*m[3]-m[0]*o[3];var f=o[0]*m[4]-m[0]*o[4];var e=o[0]*m[5]-m[0]*o[5];var b=o[1]*m[2]-m[1]*o[2];var a=o[1]*m[4]-m[1]*o[4];var p=o[1]*m[5]-m[1]*o[5];var n=o[2]*m[3]-m[2]*o[3];var d=o[3]*m[4]-m[3]*o[4];var c=o[3]*m[5]-m[3]*o[5];var l=p+d;var k=a-n;return new Polynomial(j*b-h*h,j*k+g*b-2*h*f,j*l+g*k-f*f-2*h*e,j*c+g*l-2*f*e,g*c-e*e)};function IntersectionParams(a,b){if(arguments.length>0){this.init(a,b)}}IntersectionParams.prototype.init=function(a,b){this.name=a;this.params=b
};function Point2D(a,b){if(arguments.length>0){this.init(a,b)}}Point2D.prototype.init=function(a,b){this.x=a;this.y=b};Point2D.prototype.add=function(a){return new Point2D(this.x+a.x,this.y+a.y)};Point2D.prototype.addEquals=function(a){this.x+=a.x;this.y+=a.y;return this};Point2D.prototype.scalarAdd=function(a){return new Point2D(this.x+a,this.y+a)};Point2D.prototype.scalarAddEquals=function(a){this.x+=a;this.y+=a;return this};Point2D.prototype.subtract=function(a){return new Point2D(this.x-a.x,this.y-a.y)
};Point2D.prototype.subtractEquals=function(a){this.x-=a.x;this.y-=a.y;return this};Point2D.prototype.scalarSubtract=function(a){return new Point2D(this.x-a,this.y-a)};Point2D.prototype.scalarSubtractEquals=function(a){this.x-=a;this.y-=a;return this};Point2D.prototype.multiply=function(a){return new Point2D(this.x*a,this.y*a)};Point2D.prototype.multiplyEquals=function(a){this.x*=a;this.y*=a;return this};Point2D.prototype.divide=function(a){return new Point2D(this.x/a,this.y/a)};Point2D.prototype.divideEquals=function(a){this.x/=a;
this.y/=a;return this};Point2D.prototype.eq=function(a){return(this.x==a.x&&this.y==a.y)};Point2D.prototype.lt=function(a){return(this.x<a.x&&this.y<a.y)};Point2D.prototype.lte=function(a){return(this.x<=a.x&&this.y<=a.y)};Point2D.prototype.gt=function(a){return(this.x>a.x&&this.y>a.y)};Point2D.prototype.gte=function(a){return(this.x>=a.x&&this.y>=a.y)};Point2D.prototype.lerp=function(b,a){return new Point2D(this.x+(b.x-this.x)*a,this.y+(b.y-this.y)*a)};Point2D.prototype.distanceFrom=function(c){var b=this.x-c.x;
var a=this.y-c.y;return Math.sqrt(b*b+a*a)};Point2D.prototype.min=function(a){return new Point2D(Math.min(this.x,a.x),Math.min(this.y,a.y))};Point2D.prototype.max=function(a){return new Point2D(Math.max(this.x,a.x),Math.max(this.y,a.y))};Point2D.prototype.toString=function(){return this.x+","+this.y};Point2D.prototype.setXY=function(a,b){this.x=a;this.y=b};Point2D.prototype.setFromPoint=function(a){this.x=a.x;this.y=a.y};Point2D.prototype.swap=function(b){var a=this.x;var c=this.y;this.x=b.x;this.y=b.y;
b.x=a;b.y=c};Polynomial.TOLERANCE=0.000001;Polynomial.ACCURACY=6;function Polynomial(){this.init(arguments)}Polynomial.prototype.init=function(a){this.coefs=new Array();for(var b=a.length-1;b>=0;b--){this.coefs.push(a[b])}};Polynomial.prototype.eval=function(b){var a=0;for(var c=this.coefs.length-1;c>=0;c--){a=a*b+this.coefs[c]}return a};Polynomial.prototype.multiply=function(d){var a=new Polynomial();for(var c=0;c<=this.getDegree()+d.getDegree();c++){a.coefs.push(0)}for(var c=0;c<=this.getDegree();
c++){for(var b=0;b<=d.getDegree();b++){a.coefs[c+b]+=this.coefs[c]*d.coefs[b]}}return a};Polynomial.prototype.divide_scalar=function(a){for(var b=0;b<this.coefs.length;b++){this.coefs[b]/=a}};Polynomial.prototype.simplify=function(){for(var a=this.getDegree();a>=0;a--){if(Math.abs(this.coefs[a])<=Polynomial.TOLERANCE){this.coefs.pop()}else{break}}};Polynomial.prototype.bisection=function(min,max){var minValue=this.eval(min);var maxValue=this.eval(max);var result;if(Math.abs(minValue)<=Polynomial.TOLERANCE){result=min
}else{if(Math.abs(maxValue)<=Polynomial.TOLERANCE){result=max}else{if(minValue*maxValue<=0){var tmp1=Math.log(max-min);var tmp2=Math.log(10)*Polynomial.ACCURACY;var iters=Math.ceil((tmp1+tmp2)/Math.log(2));for(var i=0;i<iters;i++){result=0.5*(min+max);var value=this.eval(result);if(Math.abs(value)<=Polynomial.TOLERANCE){break}if(value*minValue<0){max=result;maxValue=value}else{min=result;minValue=value}}}}}return result};Polynomial.prototype.toString=function(){var b=new Array();var d=new Array();
for(var e=this.coefs.length-1;e>=0;e--){var f=this.coefs[e];if(f!=0){var c=(f<0)?" - ":" + ";f=Math.abs(f);if(e>0){if(f==1){f="x"}else{f+="x"}}if(e>1){f+="^"+e}d.push(c);b.push(f)}}d[0]=(d[0]==" + ")?"":"-";var a="";for(var e=0;e<b.length;e++){a+=d[e]+b[e]}return a};Polynomial.prototype.getDegree=function(){return this.coefs.length-1};Polynomial.prototype.getDerivative=function(){var a=new Polynomial();for(var b=1;b<this.coefs.length;b++){a.coefs.push(b*this.coefs[b])}return a};Polynomial.prototype.getRoots=function(){var a;
this.simplify();switch(this.getDegree()){case 0:a=new Array();break;case 1:a=this.getLinearRoot();break;case 2:a=this.getQuadraticRoots();break;case 3:a=this.getCubicRoots();break;case 4:a=this.getQuarticRoots();break;default:a=new Array()}return a};Polynomial.prototype.getRootsInInterval=function(e,a){var c=new Array();var b;if(this.getDegree()==1){b=this.bisection(e,a);if(b!=null){c.push(b)}}else{var f=this.getDerivative();var d=f.getRootsInInterval(e,a);if(d.length>0){b=this.bisection(e,d[0]);
if(b!=null){c.push(b)}for(i=0;i<=d.length-2;i++){b=this.bisection(d[i],d[i+1]);if(b!=null){c.push(b)}}b=this.bisection(d[d.length-1],a);if(b!=null){c.push(b)}}else{b=this.bisection(e,a);if(b!=null){c.push(b)}}}return c};Polynomial.prototype.getLinearRoot=function(){var b=new Array();var c=this.coefs[1];if(c!=0){b.push(-this.coefs[0]/c)}return b};Polynomial.prototype.getQuadraticRoots=function(){var h=new Array();if(this.getDegree()==2){var g=this.coefs[2];var f=this.coefs[1]/g;var l=this.coefs[0]/g;
var k=f*f-4*l;if(k>0){var j=Math.sqrt(k);h.push(0.5*(-f+j));h.push(0.5*(-f-j))}else{if(k==0){h.push(0.5*-f)}}}return h};Polynomial.prototype.getCubicRoots=function(){var m=new Array();if(this.getDegree()==3){var k=this.coefs[3];var l=this.coefs[2]/k;var n=this.coefs[1]/k;var p=this.coefs[0]/k;var v=(3*n-l*l)/3;var u=(2*l*l*l-9*n*l+27*p)/27;var j=l/3;var f=u*u/4+v*v*v/27;var o=u/2;if(Math.abs(f)<=Polynomial.TOLERANCE){disrim=0}if(f>0){var s=Math.sqrt(f);var t;var q;t=-o+s;if(t>=0){q=Math.pow(t,1/3)
}else{q=-Math.pow(-t,1/3)}t=-o-s;if(t>=0){q+=Math.pow(t,1/3)}else{q-=Math.pow(-t,1/3)}m.push(q-j)}else{if(f<0){var g=Math.sqrt(-v/3);var r=Math.atan2(Math.sqrt(-f),-o)/3;var d=Math.cos(r);var c=Math.sin(r);var h=Math.sqrt(3);m.push(2*g*d-j);m.push(-g*(d+h*c)-j);m.push(-g*(d-h*c)-j)}else{var t;if(o>=0){t=-Math.pow(o,1/3)}else{t=Math.pow(-o,1/3)}m.push(2*t-j);m.push(-t-j)}}}return m};Polynomial.prototype.getQuarticRoots=function(){var l=new Array();if(this.getDegree()==4){var c=this.coefs[4];var h=this.coefs[3]/c;
var j=this.coefs[2]/c;var k=this.coefs[1]/c;var n=this.coefs[0]/c;var b=new Polynomial(1,-j,h*k-4*n,-h*h*n+4*j*n-k*k).getCubicRoots();var t=b[0];var a=h*h/4-j+t;if(Math.abs(a)<=Polynomial.TOLERANCE){a=0}if(a>0){var r=Math.sqrt(a);var o=3*h*h/4-r*r-2*j;var m=(4*h*j-8*k-h*h*h)/(4*r);var q=o+m;var g=o-m;if(Math.abs(q)<=Polynomial.TOLERANCE){q=0}if(Math.abs(g)<=Polynomial.TOLERANCE){g=0}if(q>=0){var p=Math.sqrt(q);l.push(-h/4+(r+p)/2);l.push(-h/4+(r-p)/2)}if(g>=0){var p=Math.sqrt(g);l.push(-h/4+(p-r)/2);
l.push(-h/4-(p+r)/2)}}else{if(a<0){}else{var m=t*t-4*n;if(m>=-Polynomial.TOLERANCE){if(m<0){m=0}m=2*Math.sqrt(m);o=3*h*h/4-2*j;if(o+m>=Polynomial.TOLERANCE){var s=Math.sqrt(o+m);l.push(-h/4+s/2);l.push(-h/4-s/2)}if(o-m>=Polynomial.TOLERANCE){var s=Math.sqrt(o-m);l.push(-h/4+s/2);l.push(-h/4-s/2)}}}}}return l};function Vector2D(a,b){if(arguments.length>0){this.init(a,b)}}Vector2D.prototype.init=function(a,b){this.x=a;this.y=b};Vector2D.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)
};Vector2D.prototype.dot=function(a){return this.x*a.x+this.y*a.y};Vector2D.prototype.cross=function(a){return this.x*a.y-this.y*a.x};Vector2D.prototype.unit=function(){return this.divide(this.length())};Vector2D.prototype.unitEquals=function(){this.divideEquals(this.length());return this};Vector2D.prototype.add=function(a){return new Vector2D(this.x+a.x,this.y+a.y)};Vector2D.prototype.addEquals=function(a){this.x+=a.x;this.y+=a.y;return this};Vector2D.prototype.subtract=function(a){return new Vector2D(this.x-a.x,this.y-a.y)
};Vector2D.prototype.subtractEquals=function(a){this.x-=a.x;this.y-=a.y;return this};Vector2D.prototype.multiply=function(a){return new Vector2D(this.x*a,this.y*a)};Vector2D.prototype.multiplyEquals=function(a){this.x*=a;this.y*=a;return this};Vector2D.prototype.divide=function(a){return new Vector2D(this.x/a,this.y/a)};Vector2D.prototype.divideEquals=function(a){this.x/=a;this.y/=a;return this};Vector2D.prototype.perp=function(){return new Vector2D(-this.y,this.x)};Vector2D.fromPoints=function(b,a){return new Vector2D(a.x-b.x,a.y-b.y)
};Shape.prototype=new EventHandler();Shape.prototype.constructor=Shape;Shape.superclass=EventHandler.prototype;function Shape(a){if(arguments.length>0){this.init(a)}}Shape.prototype.init=function(a){this.svgNode=a;this.locked=false;this.visible=true;this.selected=false;this.callback=null;this.lastUpdate=null};Shape.prototype.show=function(a){var b=(a)?"inline":"none";this.visible=a;this.svgNode.setAttributeNS(null,"display",b)};Shape.prototype.refresh=function(){};Shape.prototype.update=function(){this.refresh();
if(this.owner){this.owner.update(this)}if(this.callback!=null){this.callback(this)}};Shape.prototype.translate=function(a){};Shape.prototype.select=function(a){this.selected=a};Shape.prototype.registerHandles=function(){};Shape.prototype.unregisterHandles=function(){};Shape.prototype.selectHandles=function(a){};Shape.prototype.showHandles=function(a){};Shape.prototype.mousedown=function(a){if(!this.locked){if(a.shiftKey){if(this.selected){mouser.unregisterShape(this)}else{mouser.registerShape(this);
this.showHandles(true);this.selectHandles(true);this.registerHandles()}}else{if(this.selected){this.selectHandles(true);this.registerHandles()}else{mouser.unregisterShapes();mouser.registerShape(this);this.showHandles(true);this.selectHandles(false)}}}};Circle.prototype=new Shape();Circle.prototype.constructor=Circle;Circle.superclass=Shape.prototype;function Circle(a){if(arguments.length>0){this.init(a)}}Circle.prototype.init=function(c){if(c.localName=="circle"){Circle.superclass.init.call(this,c);
var a=parseFloat(c.getAttributeNS(null,"cx"));var d=parseFloat(c.getAttributeNS(null,"cy"));var b=parseFloat(c.getAttributeNS(null,"r"));this.center=new Handle(a,d,this);this.last=new Point2D(a,d);this.radius=new Handle(a+b,d,this)}else{throw new Error("Circle.init: Invalid SVG Node: "+c.localName)}};Circle.prototype.realize=function(){if(this.svgNode!=null){this.center.realize();this.radius.realize();this.center.show(false);this.radius.show(false);this.svgNode.addEventListener("mousedown",this,false)
}};Circle.prototype.translate=function(a){this.center.translate(a);this.radius.translate(a);this.refresh()};Circle.prototype.refresh=function(){var a=this.radius.point.distanceFrom(this.center.point);this.svgNode.setAttributeNS(null,"cx",this.center.point.x);this.svgNode.setAttributeNS(null,"cy",this.center.point.y);this.svgNode.setAttributeNS(null,"r",a)};Circle.prototype.registerHandles=function(){mouser.register(this.center);mouser.register(this.radius)};Circle.prototype.unregisterHandles=function(){mouser.unregister(this.center);
mouser.unregister(this.radius)};Circle.prototype.selectHandles=function(a){this.center.select(a);this.radius.select(a)};Circle.prototype.showHandles=function(a){this.center.show(a);this.radius.show(a)};Circle.prototype.getIntersectionParams=function(){return new IntersectionParams("Circle",[this.center.point,parseFloat(this.svgNode.getAttributeNS(null,"r"))])};Ellipse.prototype=new Shape();Ellipse.prototype.constructor=Ellipse;Ellipse.superclass=Shape.prototype;function Ellipse(a){if(arguments.length>0){this.init(a)
}}Ellipse.prototype.init=function(b){if(b==null||b.localName!="ellipse"){throw new Error("Ellipse.init: Invalid localName: "+b.localName)}Ellipse.superclass.init.call(this,b);var a=parseFloat(b.getAttributeNS(null,"cx"));var e=parseFloat(b.getAttributeNS(null,"cy"));var d=parseFloat(b.getAttributeNS(null,"rx"));var c=parseFloat(b.getAttributeNS(null,"ry"));this.center=new Handle(a,e,this);this.radiusX=new Handle(a+d,e,this);this.radiusY=new Handle(a,e+c,this)};Ellipse.prototype.realize=function(){this.center.realize();
this.radiusX.realize();this.radiusY.realize();this.center.show(false);this.radiusX.show(false);this.radiusY.show(false);this.svgNode.addEventListener("mousedown",this,false)};Ellipse.prototype.refresh=function(){var b=Math.abs(this.center.point.x-this.radiusX.point.x);var a=Math.abs(this.center.point.y-this.radiusY.point.y);this.svgNode.setAttributeNS(null,"cx",this.center.point.x);this.svgNode.setAttributeNS(null,"cy",this.center.point.y);this.svgNode.setAttributeNS(null,"rx",b);this.svgNode.setAttributeNS(null,"ry",a)
};Ellipse.prototype.registerHandles=function(){mouser.register(this.center);mouser.register(this.radiusX);mouser.register(this.radiusY)};Ellipse.prototype.unregisterHandles=function(){mouser.unregister(this.center);mouser.unregister(this.radiusX);mouser.unregister(this.radiusY)};Ellipse.prototype.selectHandles=function(a){this.center.select(a);this.radiusX.select(a);this.radiusY.select(a)};Ellipse.prototype.showHandles=function(a){this.center.show(a);this.radiusX.show(a);this.radiusY.show(a)};Ellipse.prototype.getIntersectionParams=function(){return new IntersectionParams("Ellipse",[this.center.point,parseFloat(this.svgNode.getAttributeNS(null,"rx")),parseFloat(this.svgNode.getAttributeNS(null,"ry"))])
};Handle.prototype=new Shape();Handle.prototype.constructor=Handle;Handle.superclass=Shape.prototype;Handle.NO_CONSTRAINTS=0;Handle.CONSTRAIN_X=1;Handle.CONSTRAIN_Y=2;function Handle(b,c,a){if(arguments.length>0){this.init(b,c,a)}}Handle.prototype.init=function(b,c,a){Handle.superclass.init.call(this,null);this.point=new Point2D(b,c);this.owner=a;this.constrain=Handle.NO_CONSTRAINTS};Handle.prototype.realize=function(){if(this.svgNode==null){var b="http://www.w3.org/2000/svg";var c=svgDocument.createElementNS(b,"rect");
var a;if(this.owner!=null&&this.owner.svgNode!=null){a=this.owner.svgNode.parentNode}else{a=svgDocument.documentElement}c.setAttributeNS(null,"x",this.point.x-2);c.setAttributeNS(null,"y",this.point.y-2);c.setAttributeNS(null,"width",4);c.setAttributeNS(null,"height",4);c.setAttributeNS(null,"stroke","black");c.setAttributeNS(null,"fill","white");c.addEventListener("mousedown",this,false);a.appendChild(c);this.svgNode=c;this.show(this.visible)}};Handle.prototype.unrealize=function(){this.svgNode.removeEventListener("mousedown",this,false);
this.svgNode.parentNode.removeChild(this.svgNode)};Handle.prototype.translate=function(a){if(this.constrain==Handle.CONSTRAIN_X){this.point.x+=a.x}else{if(this.constrain==Handle.CONSTRAIN_Y){this.point.y+=a.y}else{this.point.addEquals(a)}}this.refresh()};Handle.prototype.refresh=function(){this.svgNode.setAttributeNS(null,"x",this.point.x-2);this.svgNode.setAttributeNS(null,"y",this.point.y-2)};Handle.prototype.select=function(a){Handle.superclass.select.call(this,a);if(a){this.svgNode.setAttributeNS(null,"fill","black")
}else{this.svgNode.setAttributeNS(null,"fill","white")}};Handle.prototype.mousedown=function(b){if(!this.locked){if(b.shiftKey){if(this.selected){mouser.unregister(this)}else{mouser.register(this);mouser.beginDrag(b)}}else{if(!this.selected){var a=this.owner;mouser.unregisterAll();mouser.register(this)}mouser.beginDrag(b)}}};Lever.prototype=new Shape();Lever.prototype.constructor=Lever;Lever.superclass=Shape.prototype;function Lever(c,e,b,d,a){if(arguments.length>0){this.init(c,e,b,d,a)}}Lever.prototype.init=function(c,e,b,d,a){Lever.superclass.init.call(this,null);
this.point=new Handle(c,e,this);this.lever=new LeverHandle(b,d,this);this.owner=a};Lever.prototype.realize=function(){if(this.svgNode==null){var c="http://www.w3.org/2000/svg";var a=svgDocument.createElementNS(c,"line");var b;if(this.owner!=null&&this.owner.svgNode!=null){b=this.owner.svgNode.parentNode}else{b=svgDocument.documentElement}a.setAttributeNS(null,"x1",this.point.point.x);a.setAttributeNS(null,"y1",this.point.point.y);a.setAttributeNS(null,"x2",this.lever.point.x);a.setAttributeNS(null,"y2",this.lever.point.y);
a.setAttributeNS(null,"stroke","black");b.appendChild(a);this.svgNode=a;this.point.realize();this.lever.realize();this.show(this.visible)}};Lever.prototype.refresh=function(){this.svgNode.setAttributeNS(null,"x1",this.point.point.x);this.svgNode.setAttributeNS(null,"y1",this.point.point.y);this.svgNode.setAttributeNS(null,"x2",this.lever.point.x);this.svgNode.setAttributeNS(null,"y2",this.lever.point.y)};LeverHandle.prototype=new Handle();LeverHandle.prototype.constructor=LeverHandle;LeverHandle.superclass=Handle.prototype;
function LeverHandle(b,c,a){if(arguments.length>0){this.init(b,c,a)}}LeverHandle.prototype.realize=function(){if(this.svgNode==null){var b="http://www.w3.org/2000/svg";var c=svgDocument.createElementNS(b,"circle");var a;if(this.owner!=null&&this.owner.svgNode!=null){a=this.owner.svgNode.parentNode}else{a=svgDocument.documentElement}c.setAttributeNS(null,"cx",this.point.x);c.setAttributeNS(null,"cy",this.point.y);c.setAttributeNS(null,"r",2.5);c.setAttributeNS(null,"fill","black");c.addEventListener("mousedown",this,false);
a.appendChild(c);this.svgNode=c;this.show(this.visible)}};LeverHandle.prototype.refresh=function(){this.svgNode.setAttributeNS(null,"cx",this.point.x);this.svgNode.setAttributeNS(null,"cy",this.point.y)};LeverHandle.prototype.select=function(a){LeverHandle.superclass.select.call(this,a);this.svgNode.setAttributeNS(null,"fill","black")};Line.prototype=new Shape();Line.prototype.constructor=Line;Line.superclass=Shape.prototype;function Line(a){if(arguments.length>0){this.init(a)}}Line.prototype.init=function(e){if(e==null||e.localName!="line"){throw new Error("Line.init: Invalid localName: "+e.localName)
}Line.superclass.init.call(this,e);var b=parseFloat(e.getAttributeNS(null,"x1"));var d=parseFloat(e.getAttributeNS(null,"y1"));var a=parseFloat(e.getAttributeNS(null,"x2"));var c=parseFloat(e.getAttributeNS(null,"y2"));this.p1=new Handle(b,d,this);this.p2=new Handle(a,c,this)};Line.prototype.realize=function(){this.p1.realize();this.p2.realize();this.p1.show(false);this.p2.show(false);this.svgNode.addEventListener("mousedown",this,false)};Line.prototype.refresh=function(){this.svgNode.setAttributeNS(null,"x1",this.p1.point.x);
this.svgNode.setAttributeNS(null,"y1",this.p1.point.y);this.svgNode.setAttributeNS(null,"x2",this.p2.point.x);this.svgNode.setAttributeNS(null,"y2",this.p2.point.y)};Line.prototype.registerHandles=function(){mouser.register(this.p1);mouser.register(this.p2)};Line.prototype.unregisterHandles=function(){mouser.unregister(this.p1);mouser.unregister(this.p2)};Line.prototype.selectHandles=function(a){this.p1.select(a);this.p2.select(a)};Line.prototype.showHandles=function(a){this.p1.show(a);this.p2.show(a)
};Line.prototype.cut=function(b){var d=this.p1.point.lerp(this.p2.point,b);var c=this.svgNode.cloneNode(true);this.p2.point.setFromPoint(d);this.p2.update();if(this.svgNode.nextSibling!=null){this.svgNode.parentNode.insertBefore(c,this.svgNode.nextSibling)}else{this.svgNode.parentNode.appendChild(c)}var a=new Line(c);a.realize();a.p1.point.setFromPoint(d);a.p1.update()};Line.prototype.getIntersectionParams=function(){return new IntersectionParams("Line",[this.p1.point,this.p2.point])};function Token(a,b){if(arguments.length>0){this.init(a,b)
}}Token.prototype.init=function(a,b){this.type=a;this.text=b};Token.prototype.typeis=function(a){return this.type==a};Path.prototype=new Shape();Path.prototype.constructor=Path;Path.superclass=Shape.prototype;Path.COMMAND=0;Path.NUMBER=1;Path.EOD=2;Path.PARAMS={A:["rx","ry","x-axis-rotation","large-arc-flag","sweep-flag","x","y"],a:["rx","ry","x-axis-rotation","large-arc-flag","sweep-flag","x","y"],C:["x1","y1","x2","y2","x","y"],c:["x1","y1","x2","y2","x","y"],H:["x"],h:["x"],L:["x","y"],l:["x","y"],M:["x","y"],m:["x","y"],Q:["x1","y1","x","y"],q:["x1","y1","x","y"],S:["x2","y2","x","y"],s:["x2","y2","x","y"],T:["x","y"],t:["x","y"],V:["y"],v:["y"],Z:[],z:[]};
function Path(a){if(arguments.length>0){this.init(a)}}Path.prototype.init=function(a){if(a==null||a.localName!="path"){throw new Error("Path.init: Invalid localName: "+a.localName)}Path.superclass.init.call(this,a);this.segments=null;this.parseData(a.getAttributeNS(null,"d"))};Path.prototype.realize=function(){for(var a=0;a<this.segments.length;a++){this.segments[a].realize()}this.svgNode.addEventListener("mousedown",this,false)};Path.prototype.unrealize=function(){for(var a=0;a<this.segments.length;
a++){this.segments[a].unrealize()}this.svgNode.removeEventListener("mousedown",this,false)};Path.prototype.refresh=function(){var b=new Array();for(var a=0;a<this.segments.length;a++){b.push(this.segments[a].toString())}this.svgNode.setAttributeNS(null,"d",b.join(" "))};Path.prototype.registerHandles=function(){for(var a=0;a<this.segments.length;a++){this.segments[a].registerHandles()}};Path.prototype.unregisterHandles=function(){for(var a=0;a<this.segments.length;a++){this.segments[a].unregisterHandles()
}};Path.prototype.selectHandles=function(a){for(var b=0;b<this.segments.length;b++){this.segments[b].selectHandles(a)}};Path.prototype.showHandles=function(b){for(var a=0;a<this.segments.length;a++){this.segments[a].showHandles(b)}};Path.prototype.appendPathSegment=function(a){a.previous=this.segments[this.segments.length-1];this.segments.push(a)};Path.prototype.parseData=function(m){var n=this.tokenize(m);var k=0;var b=n[k];var j="BOD";this.segments=new Array();while(!b.typeis(Path.EOD)){var l;var e=new Array();
if(j=="BOD"){if(b.text=="M"||b.text=="m"){k++;l=Path.PARAMS[b.text].length;j=b.text}else{throw new Error("Path data must begin with a moveto command")}}else{if(b.typeis(Path.NUMBER)){l=Path.PARAMS[j].length}else{k++;l=Path.PARAMS[b.text].length;j=b.text}}if((k+l)<n.length){for(var f=k;f<k+l;f++){var c=n[f];if(c.typeis(Path.NUMBER)){e[e.length]=c.text}else{throw new Error("Parameter type is not a number: "+j+","+c.text)}}var h;var a=this.segments.length;var g=(a==0)?null:this.segments[a-1];switch(j){case"A":h=new AbsoluteArcPath(e,this,g);
break;case"C":h=new AbsoluteCurveto3(e,this,g);break;case"c":h=new RelativeCurveto3(e,this,g);break;case"H":h=new AbsoluteHLineto(e,this,g);break;case"L":h=new AbsoluteLineto(e,this,g);break;case"l":h=new RelativeLineto(e,this,g);break;case"M":h=new AbsoluteMoveto(e,this,g);break;case"m":h=new RelativeMoveto(e,this,g);break;case"Q":h=new AbsoluteCurveto2(e,this,g);break;case"q":h=new RelativeCurveto2(e,this,g);break;case"S":h=new AbsoluteSmoothCurveto3(e,this,g);break;case"s":h=new RelativeSmoothCurveto3(e,this,g);
break;case"T":h=new AbsoluteSmoothCurveto2(e,this,g);break;case"t":h=new RelativeSmoothCurveto2(e,this,g);break;case"Z":h=new RelativeClosePath(e,this,g);break;case"z":h=new RelativeClosePath(e,this,g);break;default:throw new Error("Unsupported segment type: "+j)}this.segments.push(h);k+=l;b=n[k];if(j=="M"){j="L"}if(j=="m"){j="l"}}else{throw new Error("Path data ended before all parameters were found")}}};Path.prototype.tokenize=function(b){var a=new Array();while(b!=""){if(b.match(/^([ \t\r\n,]+)/)){b=b.substr(RegExp.$1.length)
}else{if(b.match(/^([aAcChHlLmMqQsStTvVzZ])/)){a[a.length]=new Token(Path.COMMAND,RegExp.$1);b=b.substr(RegExp.$1.length)}else{if(b.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/)){a[a.length]=new Token(Path.NUMBER,parseFloat(RegExp.$1));b=b.substr(RegExp.$1.length)}else{throw new Error("Unrecognized segment command: "+b)}}}}a[a.length]=new Token(Path.EOD,null);return a};Path.prototype.intersectShape=function(c){var b=new Intersection("No Intersection");for(var d=0;d<this.segments.length;
d++){var a=Intersection.intersectShapes(this.segments[d],c);b.appendPoints(a.points)}if(b.points.length>0){b.status="Intersection"}return b};Path.prototype.getIntersectionParams=function(){return new IntersectionParams("Path",[])};function AbsolutePathSegment(d,c,a,b){if(arguments.length>0){this.init(d,c,a,b)}}AbsolutePathSegment.prototype.init=function(f,e,a,c){this.command=f;this.owner=a;this.previous=c;this.handles=new Array();var b=0;while(b<e.length){var d=new Handle(e[b],e[b+1],a);this.handles.push(d);
b+=2}};AbsolutePathSegment.prototype.realize=function(){for(var a=0;a<this.handles.length;a++){var b=this.handles[a];b.realize();b.show(false)}};AbsolutePathSegment.prototype.unrealize=function(){for(var a=0;a<this.handles.length;a++){this.handles[a].unrealize()}};AbsolutePathSegment.prototype.registerHandles=function(){for(var a=0;a<this.handles.length;a++){mouser.register(this.handles[a])}};AbsolutePathSegment.prototype.unregisterHandles=function(){for(var a=0;a<this.handles.length;a++){mouser.unregister(this.handles[a])
}};AbsolutePathSegment.prototype.selectHandles=function(a){for(var b=0;b<this.handles.length;b++){this.handles[b].select(a)}};AbsolutePathSegment.prototype.showHandles=function(b){for(var a=0;a<this.handles.length;a++){this.handles[a].show(b)}};AbsolutePathSegment.prototype.toString=function(){var b=new Array();var c="";if(this.previous==null||this.previous.constructor!=this.constuctor){c=this.command}for(var a=0;a<this.handles.length;a++){b.push(this.handles[a].point.toString())}return c+b.join(" ")
};AbsolutePathSegment.prototype.getLastPoint=function(){return this.handles[this.handles.length-1].point};AbsolutePathSegment.prototype.getIntersectionParams=function(){return null};AbsoluteArcPath.prototype=new AbsolutePathSegment();AbsoluteArcPath.prototype.constructor=AbsoluteArcPath;AbsoluteArcPath.superclass=AbsolutePathSegment.prototype;function AbsoluteArcPath(c,a,b){if(arguments.length>0){this.init("A",c,a,b)}}AbsoluteArcPath.prototype.init=function(f,e,c,d){var b=new Array();var g=e.pop();
var a=e.pop();b.push(a,g);AbsoluteArcPath.superclass.init.call(this,f,b,c,d);this.rx=parseFloat(e.shift());this.ry=parseFloat(e.shift());this.angle=parseFloat(e.shift());this.arcFlag=parseFloat(e.shift());this.sweepFlag=parseFloat(e.shift())};AbsoluteArcPath.prototype.toString=function(){var a=new Array();var b="";if(this.previous.constructor!=this.constuctor){b=this.command}return b+[this.rx,this.ry,this.angle,this.arcFlag,this.sweepFlag,this.handles[0].point.toString()].join(",")};AbsoluteArcPath.prototype.getIntersectionParams=function(){return new IntersectionParams("Ellipse",[this.getCenter(),this.rx,this.ry])
};AbsoluteArcPath.prototype.getCenter=function(){var r=this.previous.getLastPoint();var m=this.handles[0].point;var g=this.rx;var f=this.ry;var x=this.angle*Math.PI/180;var y=Math.cos(x);var n=Math.sin(x);var k=0.000001;var t=r.subtract(m).divide(2);var u=t.x*y+t.y*n;var e=t.x*-n+t.y*y;var h=u*u;var a=e*e;var l=(h/(g*g))+(a/(f*f));if(l>1){var p=Math.sqrt(l);g*=p;f*=p}var q=g*g;var b=f*f;var j=q*a;var v=b*h;var p=(q*b-j-v)/(j+v);if(Math.abs(p)<k){p=0}var w=Math.sqrt(p);if(this.arcFlag==this.sweepFlag){w=-w
}var z=r.add(m).divide(2);var d=w*g*e/f;var o=w*-f*u/g;return new Point2D(d*y-o*n+z.x,d*n+o*y+z.y)};AbsoluteCurveto2.prototype=new AbsolutePathSegment();AbsoluteCurveto2.prototype.constructor=AbsoluteCurveto2;AbsoluteCurveto2.superclass=AbsolutePathSegment.prototype;function AbsoluteCurveto2(c,a,b){if(arguments.length>0){this.init("Q",c,a,b)}}AbsoluteCurveto2.prototype.getControlPoint=function(){return this.handles[0].point};AbsoluteCurveto2.prototype.getIntersectionParams=function(){return new IntersectionParams("Bezier2",[this.previous.getLastPoint(),this.handles[0].point,this.handles[1].point])
};AbsoluteCurveto3.prototype=new AbsolutePathSegment();AbsoluteCurveto3.prototype.constructor=AbsoluteCurveto3;AbsoluteCurveto3.superclass=AbsolutePathSegment.prototype;function AbsoluteCurveto3(c,a,b){if(arguments.length>0){this.init("C",c,a,b)}}AbsoluteCurveto3.prototype.getLastControlPoint=function(){return this.handles[1].point};AbsoluteCurveto3.prototype.getIntersectionParams=function(){return new IntersectionParams("Bezier3",[this.previous.getLastPoint(),this.handles[0].point,this.handles[1].point,this.handles[2].point])
};AbsoluteHLineto.prototype=new AbsolutePathSegment();AbsoluteHLineto.prototype.constructor=AbsoluteHLineto;AbsoluteHLineto.superclass=AbsolutePathSegment.prototype;function AbsoluteHLineto(c,a,b){if(arguments.length>0){this.init("H",c,a,b)}}AbsoluteHLineto.prototype.init=function(f,e,b,d){var c=d.getLastPoint();var a=new Array();a.push(e.pop(),c.y);AbsoluteHLineto.superclass.init.call(this,f,a,b,d)};AbsoluteHLineto.prototype.toString=function(){var a=new Array();var b="";if(this.previous.constructor!=this.constuctor){b=this.command
}return b+this.handles[0].point.x};AbsoluteLineto.prototype=new AbsolutePathSegment();AbsoluteLineto.prototype.constructor=AbsoluteLineto;AbsoluteLineto.superclass=AbsolutePathSegment.prototype;function AbsoluteLineto(c,a,b){if(arguments.length>0){this.init("L",c,a,b)}}AbsoluteLineto.prototype.toString=function(){var a=new Array();var b="";if(this.previous.constructor!=this.constuctor){if(this.previous.constructor!=AbsoluteMoveto){b=this.command}}return b+this.handles[0].point.toString()};AbsoluteLineto.prototype.getIntersectionParams=function(){return new IntersectionParams("Line",[this.previous.getLastPoint(),this.handles[0].point])
};AbsoluteMoveto.prototype=new AbsolutePathSegment();AbsoluteMoveto.prototype.constructor=AbsoluteMoveto;AbsoluteMoveto.superclass=AbsolutePathSegment.prototype;function AbsoluteMoveto(c,a,b){if(arguments.length>0){this.init("M",c,a,b)}}AbsoluteMoveto.prototype.toString=function(){return"M"+this.handles[0].point.toString()};AbsoluteSmoothCurveto2.prototype=new AbsolutePathSegment();AbsoluteSmoothCurveto2.prototype.constructor=AbsoluteSmoothCurveto2;AbsoluteSmoothCurveto2.superclass=AbsolutePathSegment.prototype;
function AbsoluteSmoothCurveto2(c,a,b){if(arguments.length>0){this.init("T",c,a,b)}}AbsoluteSmoothCurveto2.prototype.getControlPoint=function(){var c=this.previous.getLastPoint();var a;if(this.previous.command.match(/^[QqTt]$/)){var b=this.previous.getControlPoint();var d=b.subtract(c);a=c.subtract(d)}else{a=c}return a};AbsoluteSmoothCurveto2.prototype.getIntersectionParams=function(){return new IntersectionParams("Bezier2",[this.previous.getLastPoint(),this.getControlPoint(),this.handles[0].point])
};AbsoluteSmoothCurveto3.prototype=new AbsolutePathSegment();AbsoluteSmoothCurveto3.prototype.constructor=AbsoluteSmoothCurveto3;AbsoluteSmoothCurveto3.superclass=AbsolutePathSegment.prototype;function AbsoluteSmoothCurveto3(c,a,b){if(arguments.length>0){this.init("S",c,a,b)}}AbsoluteSmoothCurveto3.prototype.getFirstControlPoint=function(){var c=this.previous.getLastPoint();var a;if(this.previous.command.match(/^[SsCc]$/)){var b=this.previous.getLastControlPoint();var d=b.subtract(c);a=c.subtract(d)
}else{a=c}return a};AbsoluteSmoothCurveto3.prototype.getLastControlPoint=function(){return this.handles[0].point};AbsoluteSmoothCurveto3.prototype.getIntersectionParams=function(){return new IntersectionParams("Bezier3",[this.previous.getLastPoint(),this.getFirstControlPoint(),this.handles[0].point,this.handles[1].point])};RelativePathSegment.prototype=new AbsolutePathSegment();RelativePathSegment.prototype.constructor=RelativePathSegment;RelativePathSegment.superclass=AbsolutePathSegment.prototype;
function RelativePathSegment(d,c,a,b){if(arguments.length>0){this.init(d,c,a,b)}}RelativePathSegment.prototype.init=function(g,f,a,c){this.command=g;this.owner=a;this.previous=c;this.handles=new Array();var e;if(this.previous){e=this.previous.getLastPoint()}else{e=new Point2D(0,0)}var b=0;while(b<f.length){var d=new Handle(e.x+f[b],e.y+f[b+1],a);this.handles.push(d);b+=2}};RelativePathSegment.prototype.toString=function(){var c=new Array();var e="";var d;if(this.previous){d=this.previous.getLastPoint()
}else{d=new Point2D(0,0)}if(this.previous==null||this.previous.constructor!=this.constructor){e=this.command}for(var b=0;b<this.handles.length;b++){var a=this.handles[b].point.subtract(d);c.push(a.toString())}return e+c.join(" ")};RelativeClosePath.prototype=new RelativePathSegment();RelativeClosePath.prototype.constructor=RelativeClosePath;RelativeClosePath.superclass=RelativePathSegment.prototype;function RelativeClosePath(c,a,b){if(arguments.length>0){this.init("z",c,a,b)}}RelativeClosePath.prototype.getLastPoint=function(){var b=this.previous;
var a;while(b){if(b.command.match(/^[mMzZ]$/)){a=b.getLastPoint();break}b=b.previous}return a};RelativeClosePath.prototype.getIntersectionParams=function(){return new IntersectionParams("Line",[this.previous.getLastPoint(),this.getLastPoint()])};RelativeCurveto2.prototype=new RelativePathSegment();RelativeCurveto2.prototype.constructor=RelativeCurveto2;RelativeCurveto2.superclass=RelativePathSegment.prototype;function RelativeCurveto2(c,a,b){if(arguments.length>0){this.init("q",c,a,b)}}RelativeCurveto2.prototype.getControlPoint=function(){return this.handles[0].point
};RelativeCurveto2.prototype.getIntersectionParams=function(){return new IntersectionParams("Bezier2",[this.previous.getLastPoint(),this.handles[0].point,this.handles[1].point])};RelativeCurveto3.prototype=new RelativePathSegment();RelativeCurveto3.prototype.constructor=RelativeCurveto3;RelativeCurveto3.superclass=RelativePathSegment.prototype;function RelativeCurveto3(c,a,b){if(arguments.length>0){this.init("c",c,a,b)}}RelativeCurveto3.prototype.getLastControlPoint=function(){return this.handles[1].point
};RelativeCurveto3.prototype.getIntersectionParams=function(){return new IntersectionParams("Bezier3",[this.previous.getLastPoint(),this.handles[0].point,this.handles[1].point,this.handles[2].point])};RelativeLineto.prototype=new RelativePathSegment();RelativeLineto.prototype.constructor=RelativeLineto;RelativeLineto.superclass=RelativePathSegment.prototype;function RelativeLineto(c,a,b){if(arguments.length>0){this.init("l",c,a,b)}}RelativeLineto.prototype.toString=function(){var b=new Array();var d="";
var c;var a;if(this.previous){c=this.previous.getLastPoint()}else{c=new Point(0,0)}a=this.handles[0].point.subtract(c);if(this.previous.constructor!=this.constuctor){if(this.previous.constructor!=RelativeMoveto){cmd=this.command}}return cmd+a.toString()};RelativeLineto.prototype.getIntersectionParams=function(){return new IntersectionParams("Line",[this.previous.getLastPoint(),this.handles[0].point])};RelativeMoveto.prototype=new RelativePathSegment();RelativeMoveto.prototype.constructor=RelativeMoveto;
RelativeMoveto.superclass=RelativePathSegment.prototype;function RelativeMoveto(c,a,b){if(arguments.length>0){this.init("m",c,a,b)}}RelativeMoveto.prototype.toString=function(){return"m"+this.handles[0].point.toString()};RelativeSmoothCurveto2.prototype=new RelativePathSegment();RelativeSmoothCurveto2.prototype.constructor=RelativeSmoothCurveto2;RelativeSmoothCurveto2.superclass=RelativePathSegment.prototype;function RelativeSmoothCurveto2(c,a,b){if(arguments.length>0){this.init("t",c,a,b)}}RelativeSmoothCurveto2.prototype.getControlPoint=function(){var c=this.previous.getLastPoint();
var a;if(this.previous.command.match(/^[QqTt]$/)){var b=this.previous.getControlPoint();var d=b.subtract(c);a=c.subtract(d)}else{a=c}return a};RelativeSmoothCurveto2.prototype.getIntersectionParams=function(){return new IntersectionParams("Bezier2",[this.previous.getLastPoint(),this.getControlPoint(),this.handles[0].point])};RelativeSmoothCurveto3.prototype=new RelativePathSegment();RelativeSmoothCurveto3.prototype.constructor=RelativeSmoothCurveto3;RelativeSmoothCurveto3.superclass=RelativePathSegment.prototype;
function RelativeSmoothCurveto3(c,a,b){if(arguments.length>0){this.init("s",c,a,b)}}RelativeSmoothCurveto3.prototype.getFirstControlPoint=function(){var c=this.previous.getLastPoint();var a;if(this.previous.command.match(/^[SsCc]$/)){var b=this.previous.getLastControlPoint();var d=b.subtract(c);a=c.subtract(d)}else{a=c}return a};RelativeSmoothCurveto3.prototype.getLastControlPoint=function(){return this.handles[0].point};RelativeSmoothCurveto3.prototype.getIntersectionParams=function(){return new IntersectionParams("Bezier3",[this.previous.getLastPoint(),this.getFirstControlPoint(),this.handles[0].point,this.handles[1].point])
};Polygon.prototype=new Shape();Polygon.prototype.constructor=Polygon;Polygon.superclass=Shape.prototype;function Polygon(a){if(arguments.length>0){this.init(a)}}Polygon.prototype.init=function(d){if(d.localName=="polygon"){Polygon.superclass.init.call(this,d);var c=d.getAttributeNS(null,"points").split(/[\s,]+/);this.handles=new Array();for(var b=0;b<c.length;b+=2){var a=parseFloat(c[b]);var e=parseFloat(c[b+1]);this.handles.push(new Handle(a,e,this))}}else{throw new Error("Polygon.init: Invalid SVG Node: "+d.localName)
}};Polygon.prototype.realize=function(){if(this.svgNode!=null){for(var a=0;a<this.handles.length;a++){this.handles[a].realize();this.handles[a].show(false)}this.svgNode.addEventListener("mousedown",this,false)}};Polygon.prototype.refresh=function(){var b=new Array();for(var a=0;a<this.handles.length;a++){b.push(this.handles[a].point.toString())}this.svgNode.setAttributeNS(null,"points",b.join(" "))};Polygon.prototype.registerHandles=function(){for(var a=0;a<this.handles.length;a++){mouser.register(this.handles[a])
}};Polygon.prototype.unregisterHandles=function(){for(var a=0;a<this.handles.length;a++){mouser.unregister(this.handles[a])}};Polygon.prototype.selectHandles=function(a){for(var b=0;b<this.handles.length;b++){this.handles[b].select(a)}};Polygon.prototype.showHandles=function(b){for(var a=0;a<this.handles.length;a++){this.handles[a].show(b)}};Polygon.prototype.pointInPolygon=function(a){var e=this.handles.length;var b=0;var c;var g=this.handles[0].point;for(var d=1;d<=e;d++){var f=this.handles[d%e].point;
if(a.y>Math.min(g.y,f.y)){if(a.y<=Math.max(g.y,f.y)){if(a.x<=Math.max(g.x,f.x)){if(g.y!=f.y){c=(a.y-g.y)*(f.x-g.x)/(f.y-g.y)+g.x;if(g.x==f.x||a.x<=c){b++}}}}}g=f}return(b%2==1)};Polygon.prototype.getIntersectionParams=function(){var b=new Array();for(var a=0;a<this.handles.length;a++){b.push(this.handles[a].point)}return new IntersectionParams("Polygon",[b])};Polygon.prototype.getArea=function(){var e=0;var d=this.handles.length;var g=0;var f=0;for(var c=0;c<d;c++){var b=this.handles[c].point;var a=this.handles[(c+1)%d].point;
e+=(b.x*a.y-a.x*b.y)}return e/2};Polygon.prototype.getCentroid=function(){var e=this.handles.length;var d=6*this.getArea();var a=0;var c=0;for(var b=0;b<e;b++){var g=this.handles[b].point;var f=this.handles[(b+1)%e].point;var h=(g.x*f.y-f.x*g.y);a+=(g.x+f.x)*h;c+=(g.y+f.y)*h}return new Point2D(a/d,c/d)};Polygon.prototype.isClockwise=function(){return this.getArea()<0};Polygon.prototype.isCounterClockwise=function(){return this.getArea()>0};Polygon.prototype.isConcave=function(){var d=0;var b=0;var a=this.handles.length;
for(var c=0;c<a;c++){var k=this.handles[c].point;var j=this.handles[(c+1)%a].point;var g=this.handles[(c+2)%a].point;var h=Vector2D.fromPoints(k,j);var f=Vector2D.fromPoints(j,g);var e=h.cross(f);if(e<0){b++}else{d++}}return(b!=0&&d!=0)};Polygon.prototype.isConvex=function(){return !this.isConcave()};Rectangle.prototype=new Shape();Rectangle.prototype.constructor=Rectangle;Rectangle.superclass=Shape.prototype;function Rectangle(a){if(arguments.length>0){this.init(a)}}Rectangle.prototype.init=function(d){if(d.localName=="rect"){Rectangle.superclass.init.call(this,d);
var b=parseFloat(d.getAttributeNS(null,"x"));var e=parseFloat(d.getAttributeNS(null,"y"));var c=parseFloat(d.getAttributeNS(null,"width"));var a=parseFloat(d.getAttributeNS(null,"height"));this.p1=new Handle(b,e,this);this.p2=new Handle(b+c,e+a,this)}else{throw new Error("Rectangle.init: Invalid SVG Node: "+d.localName)}};Rectangle.prototype.realize=function(){if(this.svgNode!=null){this.p1.realize();this.p2.realize();this.p1.show(false);this.p2.show(false);this.svgNode.addEventListener("mousedown",this,false)
}};Rectangle.prototype.refresh=function(){var b=this.p1.point.min(this.p2.point);var a=this.p1.point.max(this.p2.point);this.svgNode.setAttributeNS(null,"x",b.x);this.svgNode.setAttributeNS(null,"y",b.y);this.svgNode.setAttributeNS(null,"width",a.x-b.x);this.svgNode.setAttributeNS(null,"height",a.y-b.y)};Rectangle.prototype.registerHandles=function(){mouser.register(this.p1);mouser.register(this.p2)};Rectangle.prototype.unregisterHandles=function(){mouser.unregister(this.p1);mouser.unregister(this.p2)
};Rectangle.prototype.selectHandles=function(a){this.p1.select(a);this.p2.select(a)};Rectangle.prototype.showHandles=function(a){this.p1.show(a);this.p2.show(a)};Rectangle.prototype.getIntersectionParams=function(){return new IntersectionParams("Rectangle",[this.p1.point,this.p2.point])};
/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 * 
 * Requires: 1.2.2+
 */
(function(d){var b=["DOMMouseScroll","mousewheel"];
if(d.event.fixHooks){for(var a=b.length;a;){d.event.fixHooks[b[--a]]=d.event.mouseHooks}}d.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var e=b.length;e;){this.addEventListener(b[--e],c,false)}}else{this.onmousewheel=c}},teardown:function(){if(this.removeEventListener){for(var e=b.length;e;){this.removeEventListener(b[--e],c,false)}}else{this.onmousewheel=null}}};d.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)
}});function c(k){var h=k||window.event,g=[].slice.call(arguments,1),l=0,j=true,f=0,e=0;k=d.event.fix(h);k.type="mousewheel";if(h.wheelDelta){l=h.wheelDelta/120}if(h.detail){l=-h.detail/3}e=l;if(h.axis!==undefined&&h.axis===h.HORIZONTAL_AXIS){e=0;f=-1*l}if(h.wheelDeltaY!==undefined){e=h.wheelDeltaY/120}if(h.wheelDeltaX!==undefined){f=-1*h.wheelDeltaX/120}g.unshift(k,l,f,e);return(d.event.dispatch||d.event.handle).apply(this,g)}})(jQuery);